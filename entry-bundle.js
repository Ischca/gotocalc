!function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=10)}([function(t,e,n){"use strict";function i(t){return"object"==typeof t&&null!==t||"function"==typeof t}function r(t){return null==t}n.d(e,"l",(function(){return ut})),n.d(e,"a",(function(){return ot})),n.d(e,"b",(function(){return at})),n.d(e,"d",(function(){return ct})),n.d(e,"i",(function(){return At})),n.d(e,"e",(function(){return Rt})),n.d(e,"f",(function(){return k})),n.d(e,"x",(function(){return i})),n.d(e,"c",(function(){return Mt})),n.d(e,"g",(function(){return T.a})),n.d(e,"j",(function(){return Q})),n.d(e,"k",(function(){return J})),n.d(e,"h",(function(){return Z})),n.d(e,"q",(function(){return tt})),n.d(e,"r",(function(){return et})),n.d(e,"s",(function(){return nt})),n.d(e,"u",(function(){return A})),n.d(e,"n",(function(){return E})),n.d(e,"z",(function(){return $})),n.d(e,"D",(function(){return V})),n.d(e,"F",(function(){return N})),n.d(e,"B",(function(){return B})),n.d(e,"o",(function(){return L})),n.d(e,"w",(function(){return R})),n.d(e,"y",(function(){return P})),n.d(e,"m",(function(){return M})),n.d(e,"A",(function(){return D})),n.d(e,"p",(function(){return U})),n.d(e,"t",(function(){return q})),n.d(e,"v",(function(){return H})),n.d(e,"C",(function(){return z})),n.d(e,"E",(function(){return K}));const s=new WeakMap;function o(t,e,n,i,r){return new TypeError(`${t}(${e.map(String).join(",")}) - Expected '${n}' to be of type ${r}, but got: ${Object.prototype.toString.call(i)} (${String(i)})`)}function a(t){switch(typeof t){case"undefined":case"string":case"symbol":return t;default:return""+t}}function c(t,e,n){let i=s.get(t);if(void 0===i){if(!n)return;i=new Map,s.set(t,i)}let r=i.get(e);if(void 0===r){if(!n)return;r=new Map,i.set(e,r)}return r}function l(t,e,n){const i=c(e,n,!1);return void 0!==i&&i.has(t)}function h(t,e,n){const i=c(e,n,!1);if(void 0!==i)return i.get(t)}function u(t,e,n,i){c(n,i,!0).set(t,e)}function d(t,e){const n=[],i=c(t,e,!1);if(void 0===i)return n;const r=i.keys();let s=0;for(const t of r)n[s]=t,++s;return n}function p(t,e){return function(n,r){if(!i(n))throw o("@metadata",[t,e,n,r],"target",n,"Object or Function");u(t,e,n,function(t){switch(typeof t){case"undefined":case"string":case"symbol":return t;default:throw new TypeError(`Invalid metadata propertyKey: ${t}.`)}}(r))}}function f(t,e,n,s){if(void 0!==n){if(!Array.isArray(t))throw o("Metadata.decorate",[t,e,n,s],"decorators",t,"Array");if(!i(e))throw o("Metadata.decorate",[t,e,n,s],"target",e,"Object or Function");if(!i(s)&&!r(s))throw o("Metadata.decorate",[t,e,n,s],"attributes",s,"Object, Function, null, or undefined");return null===s&&(s=void 0),function(t,e,n,s){for(let a=t.length-1;a>=0;--a){const c=(0,t[a])(e,n,s);if(!r(c)){if(!i(c))throw o("DecorateProperty",[t,e,n,s],"decorated",c,"Object, Function, null, or undefined");s=c}}return s}(t,e,n=function(t){switch(typeof t){case"string":case"symbol":return t;default:return""+t}}(n),s)}if(!Array.isArray(t))throw o("Metadata.decorate",[t,e,n,s],"decorators",t,"Array");if("function"!=typeof e)throw o("Metadata.decorate",[t,e,n,s],"target",e,"Function");return function(t,e){for(let n=t.length-1;n>=0;--n){const i=(0,t[n])(e);if(!r(i)){if("function"!=typeof i)throw o("DecorateConstructor",[t,e],"decorated",i,"Function, null, or undefined");e=i}}return e}(t,e)}function g(t,e,n,r){if(!i(n))throw o("Metadata.define",[t,e,n,r],"target",n,"Object or Function");return u(t,e,n,a(r))}function v(t,e,n){if(!i(e))throw o("Metadata.has",[t,e,n],"target",e,"Object or Function");return function t(e,n,i){if(l(e,n,i))return!0;const r=Object.getPrototypeOf(n);return null!==r&&t(e,r,i)}(t,e,a(n))}function b(t,e,n){if(!i(e))throw o("Metadata.hasOwn",[t,e,n],"target",e,"Object or Function");return l(t,e,a(n))}function m(t,e,n){if(!i(e))throw o("Metadata.get",[t,e,n],"target",e,"Object or Function");return function t(e,n,i){if(l(e,n,i))return h(e,n,i);const r=Object.getPrototypeOf(n);return null!==r?t(e,r,i):void 0}(t,e,a(n))}function y(t,e,n){if(!i(e))throw o("Metadata.getOwn",[t,e,n],"target",e,"Object or Function");return h(t,e,a(n))}function w(t,e){if(!i(t))throw o("Metadata.getKeys",[t,e],"target",t,"Object or Function");return function t(e,n){const i=d(e,n),r=Object.getPrototypeOf(e);if(null===r)return i;const s=t(r,n),o=i.length;if(0===o)return s;const a=s.length;if(0===a)return i;const c=new Set,l=[];let h,u=0;for(let t=0;t<o;++t)h=i[t],c.has(h)||(c.add(h),l[u]=h,++u);for(let t=0;t<a;++t)h=s[t],c.has(h)||(c.add(h),l[u]=h,++u);return l}(t,a(e))}function C(t,e){if(!i(t))throw o("Metadata.getOwnKeys",[t,e],"target",t,"Object or Function");return d(t,a(e))}function S(t,e,n){if(!i(e))throw o("Metadata.delete",[t,e,n],"target",e,"Object or Function");return function(t,e,n){const i=c(t,n,!1);return void 0!==i&&i.delete(e)}(e,t,a(n))}const k={define:g,has:v,hasOwn:b,get:m,getOwn:y,getKeys:w,getOwnKeys:C,delete:S};function O(t,e,n,i,r){if(!Reflect.defineProperty(t,e,{writable:i,enumerable:!1,configurable:r,value:n}))throw new Error(`Unable to apply metadata polyfill: could not add property '${e}' to the global Reflect object`)}function j(t,e,n){O(t,"[[$au]]",s,e,n),O(t,"metadata",p,e,n),O(t,"decorate",f,e,n),O(t,"defineMetadata",g,e,n),O(t,"hasMetadata",v,e,n),O(t,"hasOwnMetadata",b,e,n),O(t,"getMetadata",m,e,n),O(t,"getOwnMetadata",y,e,n),O(t,"getMetadataKeys",w,e,n),O(t,"getOwnMetadataKeys",C,e,n),O(t,"deleteMetadata",S,e,n)}var T=n(4);const x={};function A(t){switch(typeof t){case"number":return t>=0&&(0|t)===t;case"string":{const e=x[t];if(void 0!==e)return e;const n=t.length;if(0===n)return x[t]=!1;let i=0;for(let e=0;e<n;++e)if(i=t.charCodeAt(e),0===e&&48===i&&n>1||i<48||i>57)return x[t]=!1;return x[t]=!0}default:return!1}}function R(t){switch(typeof t){case"number":case"bigint":return!0;default:return!1}}function P(t){switch(typeof t){case"string":return!0;case"object":return t instanceof Date;default:return!1}}const I=function(){let t;!function(t){t[t.none=0]="none",t[t.digit=1]="digit",t[t.upper=2]="upper",t[t.lower=3]="lower"}(t||(t={}));const e=Object.assign(Object.create(null),{0:!0,1:!0,2:!0,3:!0,4:!0,5:!0,6:!0,7:!0,8:!0,9:!0});function n(t){return""===t?0:t!==t.toUpperCase()?3:t!==t.toLowerCase()?2:!0===e[t]?1:0}return function(t,e){const i=t.length;if(0===i)return t;let r,s=!1,o="",a="",c=0,l=t.charAt(0),h=n(l);for(let u=0;u<i;++u)r=c,a=l,c=h,l=t.charAt(u+1),h=n(l),0===c?o.length>0&&(s=!0):(!s&&o.length>0&&2===c&&(s=3===r||3===h),o+=e(a,s),s=!1);return o}}(),E=function(){const t=Object.create(null);function e(t,e){return e?t.toUpperCase():t.toLowerCase()}return function(n){let i=t[n];return void 0===i&&(i=t[n]=I(n,e)),i}}(),V=function(){const t=Object.create(null);return function(e){let n=t[e];return void 0===n&&(n=E(e),n.length>0&&(n=n[0].toUpperCase()+n.slice(1)),t[e]=n),n}}(),$=function(){const t=Object.create(null);function e(t,e){return e?"-"+t.toLowerCase():t.toLowerCase()}return function(n){let i=t[n];return void 0===i&&(i=t[n]=I(n,e)),i}}();function N(t){const{length:e}=t,n=Array(e);for(let i=0;i<e;++i)n[i]=t[i];return n}const F={};function B(t){return void 0===F[t]&&(F[t]=0),++F[t]}function L(t,e){return t-e}T.a.emptyArray;function M(t,e,n){return{configurable:!0,enumerable:n.enumerable,get(){const t=n.value.bind(this);return Reflect.defineProperty(this,e,{value:t,writable:!0,configurable:!0,enumerable:n.enumerable}),t}}}function D(...t){const e=[];let n=0;const i=t.length;let r,s=0;for(let o=0;o<i;++o)if(r=t[o],void 0!==r){s=r.length;for(let t=0;t<s;++t)e[n++]=r[t]}return e}function U(...t){const e=t.length;let n;for(let i=0;i<e;++i)if(n=t[i],void 0!==n)return n;throw new Error("No default value found")}const q=function(){const t=Function.prototype,e=Object.getPrototypeOf,n=new WeakMap;let i=t,r=0,s=void 0;return function(o){if(s=n.get(o),void 0===s)for(n.set(o,s=[i=o]),r=0;(i=e(i))!==t;)s[++r]=i;return s}}();function _(...t){return Object.assign(Object.create(null),...t)}const H=function(){const t=new WeakMap;let e=!1,n="",i=0;return function(r){return e=t.get(r),void 0===e&&(n=r.toString(),i=n.length,e=i>=29&&i<=100&&125===n.charCodeAt(i-1)&&n.charCodeAt(i-2)<=32&&93===n.charCodeAt(i-3)&&101===n.charCodeAt(i-4)&&100===n.charCodeAt(i-5)&&111===n.charCodeAt(i-6)&&99===n.charCodeAt(i-7)&&32===n.charCodeAt(i-8)&&101===n.charCodeAt(i-9)&&118===n.charCodeAt(i-10)&&105===n.charCodeAt(i-11)&&116===n.charCodeAt(i-12)&&97===n.charCodeAt(i-13)&&110===n.charCodeAt(i-14)&&88===n.charCodeAt(i-15),t.set(r,e)),e}}();function z(t,e){return t instanceof Promise?t.then(e):e(t)}function K(...t){let e=void 0,n=void 0,i=void 0;for(let r=0,s=t.length;r<s;++r)e=t[r],(e=t[r])instanceof Promise&&(void 0===n?n=e:void 0===i?i=[n,e]:i.push(e));return void 0===i?n:Promise.all(i)}var W;!function(t){t[t.trace=0]="trace",t[t.debug=1]="debug",t[t.info=2]="info",t[t.warn=3]="warn",t[t.error=4]="error",t[t.fatal=5]="fatal",t[t.none=6]="none"}(W||(W={}));const Q={level:3,write(t,...e){},error:(t,...e)=>new Error("Code "+t)},J={enabled:!1,liveLoggingEnabled:!1,liveWriter:null,enter(t,e,n){},leave(){},writeStack(t){},flushAll(t){},enableLiveLogging:function(t){return},disableLiveLogging(){}};const G={name:"au:annotation",appendTo(t,e){const n=k.getOwn(G.name,t);void 0===n?k.define(G.name,[e],t):n.push(e)},set(t,e,n){k.define(G.keyFor(e),n,t)},get:(t,e)=>k.getOwn(G.keyFor(e),t),getKeys(t){let e=k.getOwn(G.name,t);return void 0===e&&k.define(G.name,e=[],t),e},isKey:t=>t.startsWith(G.name),keyFor:(t,e)=>void 0===e?`${G.name}:${t}`:`${G.name}:${t}:${e}`},Y={name:"au:resource",appendTo(t,e){const n=k.getOwn(Y.name,t);void 0===n?k.define(Y.name,[e],t):n.push(e)},has:t=>k.hasOwn(Y.name,t),getAll(t){const e=k.getOwn(Y.name,t);return void 0===e?T.a.emptyArray:e.map(e=>k.getOwn(e,t))},getKeys(t){let e=k.getOwn(Y.name,t);return void 0===e&&k.define(Y.name,e=[],t),e},isKey:t=>t.startsWith(Y.name),keyFor:(t,e)=>void 0===e?`${Y.name}:${t}`:`${Y.name}:${t}:${e}`},Z={annotation:G,resource:Y},X=Object.prototype.hasOwnProperty;function tt(t,e,n,i){let r=k.getOwn(Z.annotation.keyFor(t),n);return void 0===r?(r=e[t],void 0===r?(r=n[t],void 0!==r&&X.call(n,t)?r:i()):r):r}function et(t,e,n){let i=k.getOwn(Z.annotation.keyFor(t),e);return void 0===i?(i=e[t],void 0!==i&&X.call(e,t)?i:n()):i}function nt(t,e,n){const i=e[t];return void 0===i?n():i}!function(t,e=!0,n=!1,i=!0,r=!0){if(function(t){return"[[$au]]"in t}(t)){if(t["[[$au]]"]===s)return;throw new Error("Conflicting @aurelia/metadata module import detected. Please make sure you have the same version of all Aurelia packages in your dependency tree.")}const o=["metadata","decorate","defineMetadata","hasMetadata","hasOwnMetadata","getMetadata","getOwnMetadata","getMetadataKeys","getOwnMetadataKeys","deleteMetadata"].filter((function(t){return t in Reflect}));if(o.length>0){if(e){const t=o.map((function(t){return`${t}:\n${Reflect[t].toString().slice(0,100)+"..."}`})).join("\n\n");throw new Error("Conflicting reflect.metadata polyfill found. If you have 'reflect-metadata' or any other reflect polyfill imported, please remove it, if not (or if you must use a specific polyfill) please file an issue at https://github.com/aurelia/aurelia/issues so that we can look into compatibility options for this scenario. Implementation summary:\n\n"+t)}n&&j(t,i,r)}else j(t,i,r)}(Reflect);class it{constructor(t,e){this.container=t,this.key=e}instance(t){return this.registerResolver(0,t)}singleton(t){return this.registerResolver(1,t)}transient(t){return this.registerResolver(2,t)}callback(t){return this.registerResolver(3,t)}cachedCallback(t){return this.registerResolver(3,xt(t))}aliasTo(t){return this.registerResolver(5,t)}registerResolver(t,e){const{container:n,key:i}=this;return this.container=this.key=void 0,n.registerResolver(i,new vt(i,t,e))}}function rt(t){const e=t.slice(),n=Object.keys(t),i=n.length;let r;for(let s=0;s<i;++s)r=n[s],A(r)||(e[r]=t[r]);return e}const st={defaultResolver:{none(t){throw Error(t.toString()+" not registered, did you forget to add @singleton()?")},singleton:t=>new vt(t,1,t),transient:t=>new vt(t,2,t)}.singleton},ot={createContainer:(t=st)=>new Ot(null,t),getDesignParamtypes:t=>k.getOwn("design:paramtypes",t),getAnnotationParamtypes(t){const e=Z.annotation.keyFor("di:paramtypes");return k.getOwn(e,t)},getOrCreateAnnotationParamTypes(t){const e=Z.annotation.keyFor("di:paramtypes");let n=k.getOwn(e,t);return void 0===n&&(k.define(e,n=[],t),Z.annotation.appendTo(t,e)),n},getDependencies(t){const e=Z.annotation.keyFor("di:dependencies");let n=k.getOwn(e,t);if(void 0===n){const i=t.inject;if(void 0===i){const e=ot.getDesignParamtypes(t),i=ot.getAnnotationParamtypes(t);if(void 0===e)if(void 0===i){const e=Object.getPrototypeOf(t);n="function"==typeof e&&e!==Function.prototype?rt(ot.getDependencies(e)):[]}else n=rt(i);else if(void 0===i)n=rt(e);else{n=rt(e);let t,r=i.length;for(let e=0;e<r;++e)t=i[e],void 0!==t&&(n[e]=t);const s=Object.keys(i);let o;r=s.length;for(let t=0;t<r;++t)o=s[t],A(o)||(n[o]=i[o])}}else n=rt(i);k.define(e,n,t),Z.annotation.appendTo(t,e)}return n},createInterface(t){const e=function(t,n,i){if(null==t||void 0!==new.target)throw new Error(`No registration for interface: '${e.friendlyName}'`);return ot.getOrCreateAnnotationParamTypes(t)[i]=e,t};return e.$isInterface=!0,e.friendlyName=null==t?"(anonymous)":t,e.noDefault=function(){return e},e.withDefault=function(t){return e.withDefault=function(){throw Q.error(17,e)},e.register=function(n,i){return t(new it(n,null!=i?i:e))},e},e.toString=function(){return`InterfaceSymbol<${e.friendlyName}>`},e},inject:(...t)=>function(e,n,i){if("number"==typeof i){const n=ot.getOrCreateAnnotationParamTypes(e),r=t[0];void 0!==r&&(n[i]=r)}else if(n){const i=ot.getOrCreateAnnotationParamTypes(e.constructor),r=t[0];void 0!==r&&(i[n]=r)}else if(i){const e=i.value,n=ot.getOrCreateAnnotationParamTypes(e);let r;for(let e=0;e<t.length;++e)r=t[e],void 0!==r&&(n[e]=r)}else{const n=ot.getOrCreateAnnotationParamTypes(e);let i;for(let e=0;e<t.length;++e)i=t[e],void 0!==i&&(n[e]=i)}},transient:t=>(t.register=function(e){return At.transient(t,t).register(e,t)},t.registerInRequester=!1,t),singleton:(t,e=ht)=>(t.register=function(e){return At.singleton(t,t).register(e,t)},t.registerInRequester=e.scoped,t)},at=ot.createInterface("IContainer").noDefault(),ct=at;function lt(t){return function(e){const n=function(t,e,i){ot.inject(n)(t,e,i)};return n.$isResolver=!0,n.resolve=function(n,i){return t(e,n,i)},n}}ot.inject;const ht={scoped:!1};const ut=lt((t,e,n)=>n.getAll(t)),dt=(lt((t,e,n)=>()=>n.get(t)),lt((t,e,n)=>n.has(t,!0)?n.get(t):void 0));function pt(t,e,n){ot.inject(pt)(t,e,n)}pt.$isResolver=!0,pt.resolve=()=>{};lt((t,e,n)=>{const i=ft(t,e),r=new Rt;return r.prepare(i),n.registerResolver(t,r,!0),i}),lt((t,e,n)=>ft(t,e));function ft(t,e){const n=e.getFactory(t);if(null===n)throw new Error("No factory registered for "+t);return n.construct(e)}var gt;!function(t){t[t.instance=0]="instance",t[t.singleton=1]="singleton",t[t.transient=2]="transient",t[t.callback=3]="callback",t[t.array=4]="array",t[t.alias=5]="alias"}(gt||(gt={}));class vt{constructor(t,e,n){this.key=t,this.strategy=e,this.state=n,this.resolving=!1}get $isResolver(){return!0}register(t,e){return t.registerResolver(e||this.key,this)}resolve(t,e){switch(this.strategy){case 0:return this.state;case 1:{if(this.resolving)throw new Error("Cyclic dependency found: "+this.state.name);this.resolving=!0;const n=t.getFactory(this.state);if(null===n)throw new Error(`Resolver for ${String(this.key)} returned a null factory`);return this.state=n.construct(e),this.strategy=0,this.resolving=!1,this.state}case 2:{const n=t.getFactory(this.state);if(null===n)throw new Error(`Resolver for ${String(this.key)} returned a null factory`);return n.construct(e)}case 3:return this.state(t,e,this);case 4:return this.state[0].resolve(t,e);case 5:return t.get(this.state);default:throw Q.error(6,this.strategy)}}getFactory(t){let e;switch(this.strategy){case 1:case 2:return t.getFactory(this.state);case 5:return e=t.getResolver(this.state),null==e||void 0===e.getFactory?null:e.getFactory(t);default:return null}}dispose(){this.key=this.state=null}}class bt{constructor(t,e,n){this.Type=t,this.invoker=e,this.dependencies=n,this.transformers=null}construct(t,e){const n=this.transformers;let i=void 0!==e?this.invoker.invokeWithDynamicDependencies(t,this.Type,this.dependencies,e):this.invoker.invoke(t,this.Type,this.dependencies);if(null==n)return i;for(let t=0,e=n.length;t<e;++t)i=n[t](i);return i}registerTransformer(t){return null==this.transformers&&(this.transformers=[]),this.transformers.push(t),!0}}const mt=function(){function t(t,e,n,i){let r,s=n.length,o=new Array(s);for(;s-- >0;){if(r=n[s],null==r)throw Q.error(7,`Index ${s}.`);o[s]=t.get(r)}return void 0!==i&&(o=o.concat(i)),Reflect.construct(e,o)}const e=[{invoke:(t,e)=>new e,invokeWithDynamicDependencies:t},{invoke:(t,e,n)=>new e(t.get(n[0])),invokeWithDynamicDependencies:t},{invoke:(t,e,n)=>new e(t.get(n[0]),t.get(n[1])),invokeWithDynamicDependencies:t},{invoke:(t,e,n)=>new e(t.get(n[0]),t.get(n[1]),t.get(n[2])),invokeWithDynamicDependencies:t},{invoke:(t,e,n)=>new e(t.get(n[0]),t.get(n[1]),t.get(n[2]),t.get(n[3])),invokeWithDynamicDependencies:t},{invoke:(t,e,n)=>new e(t.get(n[0]),t.get(n[1]),t.get(n[2]),t.get(n[3]),t.get(n[4])),invokeWithDynamicDependencies:t}],n={invoke:t,invokeWithDynamicDependencies:t};return function(t){H(t)&&Q.write(5,t.name);const i=ot.getDependencies(t),r=e.length>i.length?e[i.length]:n;return new bt(t,r,i)}}(),yt={$isResolver:!0,resolve:(t,e)=>e};function wt(t){return"function"==typeof t.register}function Ct(t){return function(t){return wt(t)&&"boolean"==typeof t.registerInRequester}(t)&&t.registerInRequester}const St=new Set(["Array","ArrayBuffer","Boolean","DataView","Date","Error","EvalError","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Number","Object","Promise","RangeError","ReferenceError","RegExp","Set","SharedArrayBuffer","String","SyntaxError","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","URIError","WeakMap","WeakSet"]),kt=Z.annotation.keyFor("di:factory");class Ot{constructor(t,e=st){this.parent=t,this.config=e,this.registerDepth=0,this.disposableResolvers=new Set,null===t?(this.root=this,this.resolvers=new Map,this.resourceResolvers=Object.create(null)):(this.root=t.root,this.resolvers=new Map,this.resourceResolvers=Object.assign(Object.create(null),this.root.resourceResolvers)),this.resolvers.set(at,yt)}register(...t){if(100==++this.registerDepth)throw new Error("Unable to autoregister dependency");let e,n,r,s,o;for(let a=0,c=t.length;a<c;++a)if(e=t[a],i(e))if(wt(e))e.register(this);else if(Z.resource.has(e)){const t=Z.resource.getAll(e);if(1===t.length)t[0].register(this);else{const e=t.length;for(let n=0;n<e;++n)t[n].register(this)}}else if(void 0!==e.prototype)At.singleton(e,e).register(this);else for(n=Object.keys(e),s=0,o=n.length;s<o;++s)r=e[n[s]],i(r)&&(wt(r)?r.register(this):this.register(r));return--this.registerDepth,this}registerResolver(t,e,n=!1){Pt(t);const i=this.resolvers,r=i.get(t);return null==r?(i.set(t,e),function(t){return"string"==typeof t&&t.indexOf(":")>0}(t)&&(this.resourceResolvers[t]=e)):r instanceof vt&&4===r.strategy?r.state.push(e):i.set(t,new vt(t,4,[r,e])),n&&this.disposableResolvers.add(e),e}registerTransformer(t,e){const n=this.getResolver(t);if(null==n)return!1;if(n.getFactory){const t=n.getFactory(this);return null!=t&&t.registerTransformer(e)}return!1}getResolver(t,e=!0){if(Pt(t),void 0!==t.resolve)return t;let n,i=this;for(;null!=i;){if(n=i.resolvers.get(t),null!=n)return n;if(null==i.parent){const n=Ct(t)?this:i;return e?this.jitRegister(t,n):null}i=i.parent}return null}has(t,e=!1){return!!this.resolvers.has(t)||!(!e||null==this.parent)&&this.parent.has(t,!0)}get(t){if(Pt(t),t.$isResolver)return t.resolve(this,this);let e,n=this;for(;null!=n;){if(e=n.resolvers.get(t),null!=e)return e.resolve(n,this);if(null==n.parent){const i=Ct(t)?this:n;return e=this.jitRegister(t,i),e.resolve(n,this)}n=n.parent}throw new Error("Unable to resolve key: "+t)}getAll(t){Pt(t);let e,n=this;for(;null!=n;){if(e=n.resolvers.get(t),null!=e)return It(e,n,this);if(null==this.parent)return T.a.emptyArray;n=n.parent}return T.a.emptyArray}getFactory(t){let e=k.getOwn(kt,t);return void 0===e&&(k.define(kt,e=mt(t),t),Z.annotation.appendTo(t,kt)),e}registerFactory(t,e){Z.annotation.set(t,"di:factory",e),Z.annotation.appendTo(t,kt)}createChild(t){return new Ot(this,null!=t?t:this.config)}disposeResolvers(){var t;const e=Array.from(this.disposableResolvers);for(;e.length>0;)null===(t=e.pop())||void 0===t||t.dispose()}dispose(){var t,e,n,i;this.disposeResolvers();for(const n in this.resourceResolvers)null===(e=(t=this.resourceResolvers[n]).dispose)||void 0===e||e.call(t);for(const t of this.resolvers.keys())null===(i=(n=this.resolvers.get(t)).dispose)||void 0===i||i.call(n);this.resolvers.clear(),this.root=this.parent=this.config=this.resolvers=this.resourceResolvers=this.disposableResolvers=null}jitRegister(t,e){if("function"!=typeof t)throw new Error(`Attempted to jitRegister something that is not a constructor: '${t}'. Did you forget to register this resource?`);if(St.has(t.name))throw new Error(`Attempted to jitRegister an intrinsic type: ${t.name}. Did you forget to add @inject(Key)`);if(wt(t)){const n=t.register(e,t);if(!(n instanceof Object)||null==n.resolve){const n=e.resolvers.get(t);if(null!=n)return n;throw Q.error(40)}return n}if(Z.resource.has(t)){const n=Z.resource.getAll(t);if(1===n.length)n[0].register(e);else{const t=n.length;for(let i=0;i<t;++i)n[i].register(e)}const i=e.resolvers.get(t);if(null!=i)return i;throw Q.error(40)}if(t.$isInterface)throw new Error("Attempted to jitRegister an interface: "+t.friendlyName);{const n=this.config.defaultResolver(t,e);return e.resolvers.set(t,n),n}}}class jt{constructor(t,e){this.key=t,this.params=e}register(t){if(t.has(this.key,!0)){t.get(this.key).register(t,...this.params)}else t.register(...this.params.filter(t=>"object"==typeof t))}}const Tt=new WeakMap;function xt(t){return function(e,n,i){if(Tt.has(i))return Tt.get(i);const r=t(e,n,i);return Tt.set(i,r),r}}const At={instance:(t,e)=>new vt(t,0,e),singleton:(t,e)=>new vt(t,1,e),transient:(t,e)=>new vt(t,2,e),callback:(t,e)=>new vt(t,3,e),cachedCallback:(t,e)=>new vt(t,3,xt(e)),aliasTo:(t,e)=>new vt(e,5,t),defer:(t,...e)=>new jt(t,e)};class Rt{constructor(){this.instance=null}prepare(t){this.instance=t}get $isResolver(){return!0}resolve(){if(void 0===this.instance)throw Q.error(50);return this.instance}dispose(){this.instance=null}}function Pt(t){if(null==t)throw Q.error(5)}function It(t,e,n){if(t instanceof vt&&4===t.strategy){const i=t.state;let r=i.length;const s=new Array(r);for(;r--;)s[r]=i[r].resolve(e,n);return s}return[t.resolve(e,n)]}var Et,Vt=function(t,e,n,i){var r,s=arguments.length,o=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(o=(s<3?r(o):s>3?r(e,n,o):r(e,n))||o);return s>3&&o&&Object.defineProperty(e,n,o),o},$t=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},Nt=function(t,e){return function(n,i){e(n,i,t)}};!function(t){t[t.noColors=0]="noColors",t[t.colors=1]="colors"}(Et||(Et={}));const Ft=ot.createInterface("ILogConfig").withDefault(t=>t.instance(new _t(0,3))),Bt=ot.createInterface("ISink").noDefault(),Lt=ot.createInterface("ILogEventFactory").withDefault(t=>t.singleton(Wt)),Mt=ot.createInterface("ILogger").withDefault(t=>t.singleton(Jt)),Dt=ot.createInterface("ILogScope").noDefault(),Ut=Object.freeze({key:Z.annotation.keyFor("logger-sink-handles"),define(t,e){return k.define(this.key,e.handles,t.prototype),t},getHandles(t){return k.get(this.key,t)}});const qt=_({red:t=>`[31m${t}[39m`,green:t=>`[32m${t}[39m`,yellow:t=>`[33m${t}[39m`,blue:t=>`[34m${t}[39m`,magenta:t=>`[35m${t}[39m`,cyan:t=>`[36m${t}[39m`,white:t=>`[37m${t}[39m`,grey:t=>`[90m${t}[39m`});class _t{constructor(t,e){this.colorOptions=t,this.level=e}}const Ht=function(){const t=[_({TRC:"TRC",DBG:"DBG",INF:"INF",WRN:"WRN",ERR:"ERR",FTL:"FTL",QQQ:"???"}),_({TRC:qt.grey("TRC"),DBG:qt.grey("DBG"),INF:qt.white("INF"),WRN:qt.yellow("WRN"),ERR:qt.red("ERR"),FTL:qt.red("FTL"),QQQ:qt.grey("???")})];return function(e,n){return e<=0?t[n].TRC:e<=1?t[n].DBG:e<=2?t[n].INF:e<=3?t[n].WRN:e<=4?t[n].ERR:e<=5?t[n].FTL:t[n].QQQ}}();function zt(t,e){return 0===e?new Date(t).toISOString():qt.grey(new Date(t).toISOString())}class Kt{constructor(t,e,n,i,r,s){this.severity=t,this.message=e,this.optionalParams=n,this.scope=i,this.colorOptions=r,this.timestamp=s}toString(){const{severity:t,message:e,scope:n,colorOptions:i,timestamp:r}=this;return 0===n.length?`${zt(r,i)} [${Ht(t,i)}] ${e}`:`${zt(r,i)} [${Ht(t,i)} ${function(t,e){return 0===e?t.join("."):t.map(qt.cyan).join(".")}(n,i)}] ${e}`}}let Wt=(()=>{let t=class{constructor(t){this.config=t}createLogEvent(t,e,n,i){return new Kt(e,n,i,t.scope,this.config.colorOptions,Date.now())}};return t=Vt([Nt(0,Ft),$t("design:paramtypes",[Object])],t),t})();class Qt{constructor(t){this.handleEvent=function(e){const n=e.optionalParams;if(void 0===n||0===n.length)switch(e.severity){case 0:case 1:return t.debug(e.toString());case 2:return t.info(e.toString());case 3:return t.warn(e.toString());case 4:case 5:return t.error(e.toString())}else switch(e.severity){case 0:case 1:return t.debug(e.toString(),...n);case 2:return t.info(e.toString(),...n);case 3:return t.warn(e.toString(),...n);case 4:case 5:return t.error(e.toString(),...n)}}}}let Jt=(()=>{let t=class t{constructor(t,e,n,i=[],r=null){var s,o,a,c,l,h;let u,d,p,f,g,v;if(this.config=t,this.factory=e,this.scope=i,this.scopedLoggers=Object.create(null),null===r){this.root=this,this.parent=this,u=this.traceSinks=[],d=this.debugSinks=[],p=this.infoSinks=[],f=this.warnSinks=[],g=this.errorSinks=[],v=this.fatalSinks=[];for(const t of n){const e=Ut.getHandles(t);(null===(s=null==e?void 0:e.includes(0))||void 0===s||s)&&u.push(t),(null===(o=null==e?void 0:e.includes(1))||void 0===o||o)&&d.push(t),(null===(a=null==e?void 0:e.includes(2))||void 0===a||a)&&p.push(t),(null===(c=null==e?void 0:e.includes(3))||void 0===c||c)&&f.push(t),(null===(l=null==e?void 0:e.includes(4))||void 0===l||l)&&g.push(t),(null===(h=null==e?void 0:e.includes(5))||void 0===h||h)&&v.push(t)}}else this.root=r.root,this.parent=r,u=this.traceSinks=r.traceSinks,d=this.debugSinks=r.debugSinks,p=this.infoSinks=r.infoSinks,f=this.warnSinks=r.warnSinks,g=this.errorSinks=r.errorSinks,v=this.fatalSinks=r.fatalSinks;const b=(t,n,i,r)=>{const s="function"==typeof i?i():i,o=e.createLogEvent(this,n,s,r);for(let e=0,n=t.length;e<n;++e)t[e].handleEvent(o)};this.trace=function(e,...n){t.level<=0&&b(u,0,e,n)},this.debug=function(e,...n){t.level<=1&&b(d,1,e,n)},this.info=function(e,...n){t.level<=2&&b(p,2,e,n)},this.warn=function(e,...n){t.level<=3&&b(f,3,e,n)},this.error=function(e,...n){t.level<=4&&b(g,4,e,n)},this.fatal=function(e,...n){t.level<=5&&b(v,5,e,n)}}scopeTo(e){const n=this.scopedLoggers;let i=n[e];return void 0===i&&(i=n[e]=new t(this.config,this.factory,void 0,this.scope.concat(e),this)),i}};return t=Vt([Nt(0,Ft),Nt(1,Lt),Nt(2,ut(Bt)),Nt(3,dt(Dt)),Nt(4,pt),$t("design:paramtypes",[Object,Object,Array,Array,Object])],t),t})();_({create:({$console:t,level:e=3,colorOptions:n=0,sinks:i=[]}={})=>_({register(r){r.register(At.instance(Ft,new _t(n,e))),null!=t&&r.register(At.instance(Bt,new Qt(t)));for(const t of i)r.register(At.singleton(Bt,t));return r}})});!function(){const t=T.a.now,e=[];let n;const i={createTimer:function(i){e.push(i);let r=0,s=0;return{enter:function(){1==++r&&(s=t(),++n[i].topLevelCount);++n[i].totalCount},leave:function(){0==--r&&(n[i].duration+=t()-s)}}},enable:function(){n={};for(const t of e)n[t]={name:t,duration:0,topLevelCount:0,totalCount:0};i.enabled=!0},disable:function(){i.enabled=!1},report:function(t){Object.keys(n).map(t=>n[t]).sort((t,e)=>e.duration-t.duration).forEach(e=>{t(e.name,e.duration,e.topLevelCount,e.totalCount)})},enabled:!1}}();class Gt{constructor(t,e){this.messageType=t,this.callback=e}handle(t){t instanceof this.messageType&&this.callback.call(null,t)}}function Yt(t,e,n){try{t(e,n)}catch(t){Q.error(0,t)}}function Zt(t,e){try{t.handle(e)}catch(t){Q.error(0,t)}}ot.createInterface("IEventAggregator").withDefault(t=>t.singleton(Xt));class Xt{constructor(){this.eventLookup={},this.messageHandlers=[]}publish(t,e){if(!t)throw Q.error(0);if("string"==typeof t){let n=this.eventLookup[t];if(void 0!==n){n=n.slice();let i=n.length;for(;i-- >0;)Yt(n[i],e,t)}}else{const e=this.messageHandlers.slice();let n=e.length;for(;n-- >0;)Zt(e[n],t)}}subscribe(t,e){if(!t)throw Q.error(0);let n,i;return"string"==typeof t?(void 0===this.eventLookup[t]&&(this.eventLookup[t]=[]),n=e,i=this.eventLookup[t]):(n=new Gt(t,e),i=this.messageHandlers),i.push(n),{dispose(){const t=i.indexOf(n);-1!==t&&i.splice(t,1)}}}subscribeOnce(t,e){const n=this.subscribe(t,(function(t,i){n.dispose(),e(t,i)}));return n}}},function(t,e,n){"use strict";n.d(e,"H",(function(){return C})),n.d(e,"Cb",(function(){return P})),n.d(e,"Jb",(function(){return V})),n.d(e,"q",(function(){return He})),n.d(e,"m",(function(){return $e})),n.d(e,"yb",(function(){return Ne})),n.d(e,"g",(function(){return Fe})),n.d(e,"t",(function(){return Be})),n.d(e,"d",(function(){return Le})),n.d(e,"c",(function(){return Me})),n.d(e,"b",(function(){return De})),n.d(e,"a",(function(){return Ue})),n.d(e,"s",(function(){return qe})),n.d(e,"r",(function(){return _e})),n.d(e,"j",(function(){return ze})),n.d(e,"xb",(function(){return Ke})),n.d(e,"ib",(function(){return We})),n.d(e,"D",(function(){return Qe})),n.d(e,"f",(function(){return Je})),n.d(e,"fb",(function(){return Ge})),n.d(e,"vb",(function(){return Ye})),n.d(e,"tb",(function(){return Ze})),n.d(e,"e",(function(){return Xe})),n.d(e,"eb",(function(){return tn})),n.d(e,"n",(function(){return en})),n.d(e,"C",(function(){return rn})),n.d(e,"X",(function(){return sn})),n.d(e,"lb",(function(){return Zi})),n.d(e,"Db",(function(){return me})),n.d(e,"L",(function(){return tr})),n.d(e,"db",(function(){return _r})),n.d(e,"Y",(function(){return Hr})),n.d(e,"O",(function(){return Di})),n.d(e,"T",(function(){return Ui})),n.d(e,"S",(function(){return qi})),n.d(e,"Hb",(function(){return Hi})),n.d(e,"qb",(function(){return te})),n.d(e,"Ob",(function(){return bt})),n.d(e,"Bb",(function(){return ke})),n.d(e,"Eb",(function(){return ys})),n.d(e,"v",(function(){return Ss})),n.d(e,"Pb",(function(){return ws})),n.d(e,"rb",(function(){return So})),n.d(e,"h",(function(){return Co})),n.d(e,"jb",(function(){return ko})),n.d(e,"Fb",(function(){return uo})),n.d(e,"x",(function(){return vo})),n.d(e,"y",(function(){return fo})),n.d(e,"P",(function(){return bo})),n.d(e,"R",(function(){return pn.a})),n.d(e,"Ab",(function(){return gs})),n.d(e,"k",(function(){return bs})),n.d(e,"u",(function(){return Aa})),n.d(e,"Lb",(function(){return Va})),n.d(e,"Mb",(function(){return $a})),n.d(e,"i",(function(){return Qa})),n.d(e,"K",(function(){return Ja})),n.d(e,"ob",(function(){return ec})),n.d(e,"U",(function(){return x})),n.d(e,"A",(function(){return As})),n.d(e,"N",(function(){return ks})),n.d(e,"Q",(function(){return Os})),n.d(e,"J",(function(){return js})),n.d(e,"o",(function(){return $})),n.d(e,"E",(function(){return J})),n.d(e,"F",(function(){return Q})),n.d(e,"G",(function(){return G})),n.d(e,"Z",(function(){return M})),n.d(e,"ab",(function(){return Z})),n.d(e,"bb",(function(){return Y})),n.d(e,"mb",(function(){return K})),n.d(e,"pb",(function(){return W})),n.d(e,"M",(function(){return Jt})),n.d(e,"I",(function(){return Kt})),n.d(e,"W",(function(){return Qt})),n.d(e,"Ib",(function(){return ca})),n.d(e,"Nb",(function(){return aa})),n.d(e,"sb",(function(){return ma})),n.d(e,"B",(function(){return hn})),n.d(e,"zb",(function(){return ia})),n.d(e,"V",(function(){return Lo})),n.d(e,"Kb",(function(){return Uo})),n.d(e,"Gb",(function(){return _o})),n.d(e,"nb",(function(){return oc})),n.d(e,"l",(function(){return nc})),n.d(e,"p",(function(){return rt})),n.d(e,"w",(function(){return nt})),n.d(e,"z",(function(){return st})),n.d(e,"cb",(function(){return ot})),n.d(e,"gb",(function(){return it})),n.d(e,"hb",(function(){return at})),n.d(e,"ub",(function(){return tt})),n.d(e,"wb",(function(){return ct})),n.d(e,"kb",(function(){return et}));var i=n(0);class r{constructor(t,e,n,i){if(this.chars=t,this.repeat=e,this.isSymbol=n,this.isInverted=i,i)switch(t.length){case 0:this.has=this.hasOfNoneInverse;break;case 1:this.has=this.hasOfSingleInverse;break;default:this.has=this.hasOfMultipleInverse}else switch(t.length){case 0:this.has=this.hasOfNone;break;case 1:this.has=this.hasOfSingle;break;default:this.has=this.hasOfMultiple}}equals(t){return this.chars===t.chars&&this.repeat===t.repeat&&this.isSymbol===t.isSymbol&&this.isInverted===t.isInverted}hasOfMultiple(t){return this.chars.includes(t)}hasOfSingle(t){return this.chars===t}hasOfNone(t){return!1}hasOfMultipleInverse(t){return!this.chars.includes(t)}hasOfSingleInverse(t){return this.chars!==t}hasOfNoneInverse(t){return!0}}class s{constructor(){this.parts=i.g.emptyArray,this._pattern="",this.currentRecord={},this.partsRecord={}}get pattern(){const t=this._pattern;return""===t?null:t}set pattern(t){null==t?(this._pattern="",this.parts=i.g.emptyArray):(this._pattern=t,this.parts=this.partsRecord[t])}append(t,e){const{currentRecord:n}=this;void 0===n[t]?n[t]=e:n[t]+=e}next(t){const{currentRecord:e}=this;if(void 0!==e[t]){const{partsRecord:n}=this;void 0===n[t]?n[t]=[e[t]]:n[t].push(e[t]),e[t]=void 0}}}class o{constructor(t,...e){this.charSpec=t,this.nextStates=[],this.types=null,this.isEndpoint=!1,this.patterns=e}get pattern(){return this.isEndpoint?this.patterns[0]:null}findChild(t){const e=this.nextStates,n=e.length;let i=null;for(let r=0;r<n;++r)if(i=e[r],t.equals(i.charSpec))return i;return null}append(t,e){const{patterns:n}=this;n.includes(e)||n.push(e);let i=this.findChild(t);return null==i&&(i=new o(t,e),this.nextStates.push(i),t.repeat&&i.nextStates.push(i)),i}findMatches(t,e){const n=[],i=this.nextStates,r=i.length;let s=0,o=null,a=0,c=0;for(;a<r;++a)if(o=i[a],o.charSpec.has(t))if(n.push(o),s=o.patterns.length,c=0,o.charSpec.isSymbol)for(;c<s;++c)e.next(o.patterns[c]);else for(;c<s;++c)e.append(o.patterns[c],t);return n}}class a{constructor(t){this.text=t,this.text=t;const e=this.len=t.length,n=this.specs=[];for(let i=0;i<e;++i)n.push(new r(t[i],!1,!1,!1))}eachChar(t){const{len:e,specs:n}=this;for(let i=0;i<e;++i)t(n[i])}}class c{constructor(t){this.text="PART",this.spec=new r(t,!0,!1,!0)}eachChar(t){t(this.spec)}}class l{constructor(t){this.text=t,this.spec=new r(t,!1,!0,!1)}eachChar(t){t(this.spec)}}class h{constructor(){this.statics=0,this.dynamics=0,this.symbols=0}}const u=i.a.createInterface("ISyntaxInterpreter").withDefault(t=>t.singleton(d));class d{constructor(){this.rootState=new o(null),this.initialStates=[this.rootState]}add(t){let e=0;if(Array.isArray(t)){const n=t.length;for(;e<n;++e)this.add(t[e]);return}let n=this.rootState;const i=t,r=i.pattern,s=new h,o=this.parse(i,s),a=o.length,c=t=>{n=n.append(t,r)};for(e=0;e<a;++e)o[e].eachChar(c);n.types=s,n.isEndpoint=!0}interpret(t){const e=new s;let n=this.initialStates;const i=t.length;for(let r=0;r<i&&(n=this.getNextStates(n,t.charAt(r),e),0!==n.length);++r);if(n.sort((t,e)=>{if(!t.isEndpoint)return e.isEndpoint?1:0;if(!e.isEndpoint)return-1;const n=t.types,i=e.types;return n.statics!==i.statics?i.statics-n.statics:n.dynamics!==i.dynamics?i.dynamics-n.dynamics:n.symbols!==i.symbols?i.symbols-n.symbols:0}),n.length>0){const t=n[0];t.charSpec.isSymbol||e.next(t.pattern),e.pattern=t.pattern}return e}getNextStates(t,e,n){const i=[];let r=null;const s=t.length;for(let o=0;o<s;++o)r=t[o],i.push(...r.findMatches(e,n));return i}parse(t,e){const n=[],i=t.pattern,r=i.length;let s=0,o=0,h="";for(;s<r;)h=i.charAt(s),t.symbols.includes(h)?s!==o?(n.push(new a(i.slice(o,s))),++e.statics,o=s):(n.push(new l(i.slice(o,s+1))),++e.symbols,o=++s):s===o&&"P"===h&&"PART"===i.slice(s,s+4)?(o=s+=4,n.push(new c(t.symbols)),++e.dynamics):++s;return o!==s&&(n.push(new a(i.slice(o,s))),++e.statics),n}}const p=i.a.createInterface("IAttributePattern").noDefault();function f(...t){return function(e){return v.define(t,e)}}class g{constructor(t){this.Type=t,this.name=void 0}register(t){i.i.singleton(p,this.Type).register(t)}}const v=Object.freeze({name:i.h.resource.keyFor("attribute-pattern"),definitionAnnotationKey:"attribute-pattern-definitions",define(t,e){!function(t,e){for(const n of e)n.pattern in t?"function"!=typeof t[n.pattern]&&i.j.write(402,n.pattern):i.j.write(401,n.pattern)}(e.prototype,t);const n=new g(e),{name:r,definitionAnnotationKey:s}=v;return i.f.define(r,n,e),i.h.resource.appendTo(e,r),i.h.annotation.set(e,s,t),i.h.annotation.appendTo(e,s),e},getPatternDefinitions:t=>i.h.annotation.get(t,v.definitionAnnotationKey)});var b=function(t,e,n,i){var r,s=arguments.length,o=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(o=(s<3?r(o):s>3?r(e,n,o):r(e,n))||o);return s>3&&o&&Object.defineProperty(e,n,o),o},m=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},y=function(t,e){return function(n,i){e(n,i,t)}};class w{constructor(t,e,n,i){this.rawName=t,this.rawValue=e,this.target=n,this.command=i}}const C=i.a.createInterface("IAttributeParser").withDefault(t=>t.singleton(S));let S=(()=>{let t=class{constructor(t,e){this.interpreter=t,this.cache={},this.interpreter=t;const n=this.patterns={};e.forEach(e=>{const i=v.getPatternDefinitions(e.constructor);t.add(i),i.forEach(t=>{n[t.pattern]=e})})}parse(t,e){let n=this.cache[t];null==n&&(n=this.cache[t]=this.interpreter.interpret(t));const i=n.pattern;return null==i?new w(t,e,t,null):this.patterns[i][i](t,e,n.parts)}};return t=b([y(0,u),y(1,Object(i.l)(p)),m("design:paramtypes",[Object,Array])],t),t})();var k=function(t,e,n,i){var r,s=arguments.length,o=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(o=(s<3?r(o):s>3?r(e,n,o):r(e,n))||o);return s>3&&o&&Object.defineProperty(e,n,o),o};let O=(()=>{let t=class{"PART.PART"(t,e,n){return new w(t,e,n[0],n[1])}"PART.PART.PART"(t,e,n){return new w(t,e,n[0],n[2])}};return t=k([f({pattern:"PART.PART",symbols:"."},{pattern:"PART.PART.PART",symbols:"."})],t),t})(),j=(()=>{let t=class{ref(t,e,n){return new w(t,e,"element","ref")}"PART.ref"(t,e,n){return new w(t,e,n[0],"ref")}};return t=k([f({pattern:"ref",symbols:""},{pattern:"PART.ref",symbols:"."})],t),t})();(()=>{let t=class{":PART"(t,e,n){return new w(t,e,n[0],"bind")}};t=k([f({pattern:":PART",symbols:":"})],t)})(),(()=>{let t=class{"@PART"(t,e,n){return new w(t,e,n[0],"trigger")}};t=k([f({pattern:"@PART",symbols:"@"})],t)})();var T;!function(t){t.hydrateElement="ra",t.hydrateAttribute="rb",t.hydrateTemplateController="rc",t.hydrateLetElement="rd",t.setProperty="re",t.interpolation="rf",t.propertyBinding="rg",t.callBinding="rh",t.letBinding="ri",t.refBinding="rj",t.iteratorBinding="rk"}(T||(T={}));const x=i.a.createInterface("ITargetedInstruction").noDefault();let A=(()=>{class t{constructor(t){this.hasCreate="create"in t,this.hasBeforeCompile="beforeCompile"in t,this.hasAfterCompile="afterCompile"in t,this.hasAfterCompileChildren="afterCompileChildren"in t,this.hasBeforeBind="beforeBind"in t,this.hasAfterBind="afterBind"in t,this.hasAfterAttach="afterAttach"in t,this.hasAfterAttachChildren="afterAttachChildren"in t,this.hasBeforeDetach="beforeDetach"in t,this.hasBeforeUnbind="beforeUnbind"in t,this.hasAfterUnbind="afterUnbind"in t,this.hasAfterUnbindChildren="afterUnbindChildren"in t,this.hasDispose="dispose"in t,this.hasAccept="accept"in t}}return t.none=new t({}),t})();function R(t,e,n,r){for(let s=0,o=t.length;s<o;++s)i.i.aliasTo(n,e.keyFrom(t[s])).register(r)}function P(t){return function(e){return E.define(t,e)}}class I{constructor(t,e,n,i,r){this.Type=t,this.name=e,this.aliases=n,this.key=i,this.type=r}static create(t,e){let n,r;return"string"==typeof t?(n=t,r={name:n}):(n=t.name,r=t),new I(e,Object(i.p)(E.getAnnotation(e,"name"),n),Object(i.A)(E.getAnnotation(e,"aliases"),r.aliases,e.aliases),E.keyFrom(n),Object(i.p)(E.getAnnotation(e,"type"),r.type,e.type,null))}register(t){const{Type:e,key:n,aliases:r}=this;i.i.singleton(n,e).register(t),i.i.aliasTo(n,e).register(t),R(r,E,n,t)}}const E={name:i.h.resource.keyFor("binding-command"),keyFrom:t=>`${E.name}:${t}`,isType:t=>"function"==typeof t&&i.f.hasOwn(E.name,t),define(t,e){const n=I.create(t,e);return i.f.define(E.name,n,n.Type),i.f.define(E.name,n,n),i.h.resource.appendTo(e,E.name),n.Type},getDefinition(t){const e=i.f.getOwn(E.name,t);if(void 0===e)throw new Error("No definition found for type "+t.name);return e},annotate(t,e,n){i.f.define(i.h.annotation.keyFor(e),n,t)},getAnnotation:(t,e)=>i.f.getOwn(i.h.annotation.keyFor(e),t)};function V(t,e){return 256&t.flags?t.bindable.propName:e?Object(i.n)(t.syntax.target):t.syntax.target}var $,N;!function(t){t[t.oneTime=1]="oneTime",t[t.toView=2]="toView",t[t.fromView=4]="fromView",t[t.twoWay=6]="twoWay",t[t.default=8]="default"}($||($={})),function(t){t[t.getterSetter=1]="getterSetter",t[t.proxies=2]="proxies"}(N||(N={}));var F,B,L;!function(t){t[t.none=0]="none",t[t.persistentBindingFlags=31751]="persistentBindingFlags",t[t.allowParentScopeTraversal=1024]="allowParentScopeTraversal",t[t.observeLeafPropertiesOnly=2048]="observeLeafPropertiesOnly",t[t.targetObserverFlags=12295]="targetObserverFlags",t[t.noTargetObserverQueue=4096]="noTargetObserverQueue",t[t.persistentTargetObserverQueue=8192]="persistentTargetObserverQueue",t[t.secondaryExpression=16384]="secondaryExpression",t[t.bindingStrategy=7]="bindingStrategy",t[t.getterSetterStrategy=1]="getterSetterStrategy",t[t.proxyStrategy=2]="proxyStrategy",t[t.isStrictBindingStrategy=4]="isStrictBindingStrategy",t[t.update=24]="update",t[t.updateTargetInstance=8]="updateTargetInstance",t[t.updateSourceExpression=16]="updateSourceExpression",t[t.from=96]="from",t[t.fromBind=32]="fromBind",t[t.fromUnbind=64]="fromUnbind",t[t.mustEvaluate=128]="mustEvaluate",t[t.isTraversingParentScope=256]="isTraversingParentScope",t[t.dispose=512]="dispose"}(F||(F={})),function(t){t[t.Connects=32]="Connects",t[t.Observes=64]="Observes",t[t.CallsFunction=128]="CallsFunction",t[t.HasAncestor=256]="HasAncestor",t[t.IsPrimary=512]="IsPrimary",t[t.IsLeftHandSide=1024]="IsLeftHandSide",t[t.HasBind=2048]="HasBind",t[t.HasUnbind=4096]="HasUnbind",t[t.IsAssignable=8192]="IsAssignable",t[t.IsLiteral=16384]="IsLiteral",t[t.IsResource=32768]="IsResource",t[t.IsForDeclaration=65536]="IsForDeclaration",t[t.Type=31]="Type",t[t.AccessThis=1793]="AccessThis",t[t.AccessScope=10082]="AccessScope",t[t.ArrayLiteral=17955]="ArrayLiteral",t[t.ObjectLiteral=17956]="ObjectLiteral",t[t.PrimitiveLiteral=17925]="PrimitiveLiteral",t[t.Template=17958]="Template",t[t.Unary=39]="Unary",t[t.CallScope=1448]="CallScope",t[t.CallMember=1161]="CallMember",t[t.CallFunction=1162]="CallFunction",t[t.AccessMember=9323]="AccessMember",t[t.AccessKeyed=9324]="AccessKeyed",t[t.TaggedTemplate=1197]="TaggedTemplate",t[t.Binary=46]="Binary",t[t.Conditional=63]="Conditional",t[t.Assign=8208]="Assign",t[t.ValueConverter=36913]="ValueConverter",t[t.BindingBehavior=38962]="BindingBehavior",t[t.HtmlLiteral=51]="HtmlLiteral",t[t.ArrayBindingPattern=65556]="ArrayBindingPattern",t[t.ObjectBindingPattern=65557]="ObjectBindingPattern",t[t.BindingIdentifier=65558]="BindingIdentifier",t[t.ForOfStatement=6199]="ForOfStatement",t[t.Interpolation=24]="Interpolation"}(B||(B={}));class M{constructor(t,e){this.from=t,this.to=e,this.type="rf"}}class D{constructor(t,e){this.from=t,this.to=e,this.type="rg",this.mode=$.oneTime,this.oneTime=!0}}class U{constructor(t,e){this.from=t,this.to=e,this.type="rg",this.mode=$.toView,this.oneTime=!1}}class q{constructor(t,e){this.from=t,this.to=e,this.type="rg",this.mode=$.fromView,this.oneTime=!1}}class _{constructor(t,e){this.from=t,this.to=e,this.type="rg",this.mode=$.twoWay,this.oneTime=!1}}class H{constructor(t,e){this.from=t,this.to=e,this.type="rk"}}class z{constructor(t,e){this.from=t,this.to=e,this.type="rh"}}class K{constructor(t,e){this.from=t,this.to=e,this.type="rj",this.type="rj"}}class W{constructor(t,e){this.value=t,this.to=e,this.type="re"}}class Q{constructor(t,e,n){this.res=t,this.instructions=e,this.slotInfo=n,this.type="ra"}}class J{constructor(t,e){this.res=t,this.instructions=e,this.type="rb"}}class G{constructor(t,e,n,i){this.def=t,this.res=e,this.instructions=n,this.link=i,this.type="rc"}}class Y{constructor(t,e){this.instructions=t,this.toBindingContext=e,this.type="rd"}}class Z{constructor(t,e){this.from=t,this.to=e,this.type="ri"}}function X(t){const e=t.createElement("au-m");return t.makeTarget(e),e}!function(t){t[t.type=1023]="type",t[t.isTemplateController=1]="isTemplateController",t[t.isProjection=2]="isProjection",t[t.isCustomAttribute=4]="isCustomAttribute",t[t.isPlainAttribute=8]="isPlainAttribute",t[t.isCustomElement=16]="isCustomElement",t[t.isLetElement=32]="isLetElement",t[t.isPlainElement=64]="isPlainElement",t[t.isText=128]="isText",t[t.isBinding=256]="isBinding",t[t.isAuSlot=512]="isAuSlot",t[t.hasMarker=1024]="hasMarker",t[t.hasTemplate=2048]="hasTemplate",t[t.hasAttributes=4096]="hasAttributes",t[t.hasBindings=8192]="hasBindings",t[t.hasChildNodes=16384]="hasChildNodes",t[t.hasProjections=32768]="hasProjections"}(L||(L={}));class tt{constructor(t,e,n,i=n.name){this.syntax=e,this.info=n,this.res=i,this.flags=1025,this.physicalNode=null,this.template=null,this.templateController=null,this._bindings=null,this.marker=X(t)}get bindings(){return null===this._bindings&&(this._bindings=[],this.flags|=8192),this._bindings}}class et{constructor(t,e){this.name=t,this.template=e,this.flags=2}}class nt{constructor(t,e,n=e.name){this.syntax=t,this.info=e,this.res=n,this.flags=4,this._bindings=null}get bindings(){return null===this._bindings&&(this._bindings=[],this.flags|=8192),this._bindings}}class it{constructor(t,e,n){this.syntax=t,this.command=e,this.expression=n,this.flags=8}}class rt{constructor(t,e,n,i,r){this.command=t,this.bindable=e,this.expression=n,this.rawValue=i,this.target=r,this.flags=256}}class st{constructor(t,e,n,i=n.name,r=n.bindables){this.physicalNode=e,this.info=n,this.res=i,this.bindables=r,this.flags=16,this.isTarget=!0,this.templateController=null,this._customAttributes=null,this._plainAttributes=null,this._bindings=null,this._childNodes=null,this._projections=null,n.containerless?(this.isContainerless=!0,this.marker=X(t),this.flags|=1024):(this.isContainerless=!1,this.marker=null)}get customAttributes(){return null===this._customAttributes&&(this._customAttributes=[],this.flags|=4096),this._customAttributes}get plainAttributes(){return null===this._plainAttributes&&(this._plainAttributes=[],this.flags|=4096),this._plainAttributes}get bindings(){return null===this._bindings&&(this._bindings=[],this.flags|=8192),this._bindings}get childNodes(){return null===this._childNodes&&(this._childNodes=[],this.flags|=16384),this._childNodes}get projections(){return null===this._projections&&(this._projections=[],this.flags|=32768),this._projections}}class ot{constructor(t,e,n=X(t)){this.physicalNode=e,this.marker=n,this.flags=1056,this.toBindingContext=!1,this._bindings=null}get bindings(){return null===this._bindings&&(this._bindings=[],this.flags|=8192),this._bindings}}class at{constructor(t,e){this.physicalNode=e,this.flags=64,this.isTarget=!1,this.templateController=null,this.hasSlots=!1,this._customAttributes=null,this._plainAttributes=null,this._childNodes=null}get customAttributes(){return null===this._customAttributes&&(this._customAttributes=[],this.flags|=4096),this._customAttributes}get plainAttributes(){return null===this._plainAttributes&&(this._plainAttributes=[],this.flags|=4096),this._plainAttributes}get childNodes(){return null===this._childNodes&&(this._childNodes=[],this.flags|=16384),this._childNodes}}class ct{constructor(t,e,n,i=X(t)){this.physicalNode=e,this.interpolation=n,this.marker=i,this.flags=1152}}var lt=function(t,e,n,i){var r,s=arguments.length,o=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(o=(s<3?r(o):s>3?r(e,n,o):r(e,n))||o);return s>3&&o&&Object.defineProperty(e,n,o),o};let ht=(()=>{let t=class{constructor(){this.bindingType=49}compile(t){return new D(t.expression,V(t,!1))}};return t=lt([P("one-time")],t),t})(),ut=(()=>{let t=class{constructor(){this.bindingType=50}compile(t){return new U(t.expression,V(t,!1))}};return t=lt([P("to-view")],t),t})(),dt=(()=>{let t=class{constructor(){this.bindingType=51}compile(t){return new q(t.expression,V(t,!1))}};return t=lt([P("from-view")],t),t})(),pt=(()=>{let t=class{constructor(){this.bindingType=52}compile(t){return new _(t.expression,V(t,!1))}};return t=lt([P("two-way")],t),t})(),ft=(()=>{let t=class{constructor(){this.bindingType=53}compile(t){let e=$.default;if(t instanceof rt)e=t.bindable.mode;else{switch(t.syntax.command){case"bind":case"to-view":e=$.toView;break;case"one-time":e=$.oneTime;break;case"from-view":e=$.fromView;break;case"two-way":e=$.twoWay}}switch(e){case $.default:case $.toView:return ut.prototype.compile(t);case $.oneTime:return ht.prototype.compile(t);case $.fromView:return dt.prototype.compile(t);case $.twoWay:return pt.prototype.compile(t)}}};return t=lt([P("bind")],t),t})(),gt=(()=>{let t=class{constructor(){this.bindingType=153}compile(t){return new z(t.expression,V(t,!0))}};return t=lt([P("call")],t),t})(),vt=(()=>{let t=class{constructor(){this.bindingType=539}compile(t){return new H(t.expression,V(t,!1))}};return t=lt([P("for")],t),t})();function bt(){return function(t){const e=t.prototype;e._subscriberFlags=0,e.addSubscriber=yt,e.removeSubscriber=St,e.hasSubscriber=At,e.hasSubscribers=jt,e.callSubscribers=It,void 0===e.subscribe&&(e.subscribe=yt),void 0===e.unsubscribe&&(e.unsubscribe=St)}}function mt(){return function(t){const e=t.prototype;e._collectionSubscriberFlags=0,e.addCollectionSubscriber=Ct,e.removeCollectionSubscriber=Ot,e.hasCollectionSubscriber=Pt,e.hasCollectionSubscribers=xt,e.callCollectionSubscribers=$t,void 0===e.subscribeToCollection&&(e.subscribeToCollection=Ct),void 0===e.unsubscribeFromCollection&&(e.unsubscribeFromCollection=Ot)}}function yt(t){if(this.hasSubscriber(t))return!1;const e=this._subscriberFlags;return 0==(1&e)?(this._subscriber0=t,this._subscriberFlags|=1):0==(2&e)?(this._subscriber1=t,this._subscriberFlags|=2):0==(4&e)?(this._subscriber2=t,this._subscriberFlags|=4):0==(8&e)?(this._subscribersRest=[t],this._subscriberFlags|=8):this._subscribersRest.push(t),!0}function wt(t){if(this.hasProxySubscriber(t))return!1;const e=this._proxySubscriberFlags;return 0==(1&e)?(this._proxySubscriber0=t,this._proxySubscriberFlags|=1):0==(2&e)?(this._proxySubscriber1=t,this._proxySubscriberFlags|=2):0==(4&e)?(this._proxySubscriber2=t,this._proxySubscriberFlags|=4):0==(8&e)?(this._proxySubscribersRest=[t],this._proxySubscriberFlags|=8):this._proxySubscribersRest.push(t),!0}function Ct(t){if(this.hasCollectionSubscriber(t))return!1;const e=this._collectionSubscriberFlags;return 0==(1&e)?(this._collectionSubscriber0=t,this._collectionSubscriberFlags|=1):0==(2&e)?(this._collectionSubscriber1=t,this._collectionSubscriberFlags|=2):0==(4&e)?(this._collectionSubscriber2=t,this._collectionSubscriberFlags|=4):0==(8&e)?(this._collectionSubscribersRest=[t],this._collectionSubscriberFlags|=8):this._collectionSubscribersRest.push(t),!0}function St(t){const e=this._subscriberFlags;if((1&e)>0&&this._subscriber0===t)return this._subscriber0=void 0,this._subscriberFlags=1^(1|this._subscriberFlags),!0;if((2&e)>0&&this._subscriber1===t)return this._subscriber1=void 0,this._subscriberFlags=2^(2|this._subscriberFlags),!0;if((4&e)>0&&this._subscriber2===t)return this._subscriber2=void 0,this._subscriberFlags=4^(4|this._subscriberFlags),!0;if((8&e)>0){const e=this._subscribersRest;for(let n=0,i=e.length;n<i;++n)if(e[n]===t)return e.splice(n,1),1===i&&(this._subscriberFlags=8^(8|this._subscriberFlags)),!0}return!1}function kt(t){const e=this._proxySubscriberFlags;if((1&e)>0&&this._proxySubscriber0===t)return this._proxySubscriber0=void 0,this._proxySubscriberFlags=1^(1|this._proxySubscriberFlags),!0;if((2&e)>0&&this._proxySubscriber1===t)return this._proxySubscriber1=void 0,this._proxySubscriberFlags=2^(2|this._proxySubscriberFlags),!0;if((4&e)>0&&this._proxySubscriber2===t)return this._proxySubscriber2=void 0,this._proxySubscriberFlags=4^(4|this._proxySubscriberFlags),!0;if((8&e)>0){const e=this._proxySubscribersRest;for(let n=0,i=e.length;n<i;++n)if(e[n]===t)return e.splice(n,1),1===i&&(this._proxySubscriberFlags=8^(8|this._proxySubscriberFlags)),!0}return!1}function Ot(t){const e=this._collectionSubscriberFlags;if((1&e)>0&&this._collectionSubscriber0===t)return this._collectionSubscriber0=void 0,this._collectionSubscriberFlags=1^(1|this._collectionSubscriberFlags),!0;if((2&e)>0&&this._collectionSubscriber1===t)return this._collectionSubscriber1=void 0,this._collectionSubscriberFlags=2^(2|this._collectionSubscriberFlags),!0;if((4&e)>0&&this._collectionSubscriber2===t)return this._collectionSubscriber2=void 0,this._collectionSubscriberFlags=4^(4|this._collectionSubscriberFlags),!0;if((8&e)>0){const e=this._collectionSubscribersRest;for(let n=0,i=e.length;n<i;++n)if(e[n]===t)return e.splice(n,1),1===i&&(this._collectionSubscriberFlags=8^(8|this._collectionSubscriberFlags)),!0}return!1}function jt(){return 0!==this._subscriberFlags}function Tt(){return 0!==this._proxySubscriberFlags}function xt(){return 0!==this._collectionSubscriberFlags}function At(t){const e=this._subscriberFlags;if((1&e)>0&&this._subscriber0===t)return!0;if((2&e)>0&&this._subscriber1===t)return!0;if((4&e)>0&&this._subscriber2===t)return!0;if((8&e)>0){const e=this._subscribersRest;for(let n=0,i=e.length;n<i;++n)if(e[n]===t)return!0}return!1}function Rt(t){const e=this._proxySubscriberFlags;if((1&e)>0&&this._proxySubscriber0===t)return!0;if((2&e)>0&&this._proxySubscriber1===t)return!0;if((4&e)>0&&this._proxySubscriber2===t)return!0;if((8&e)>0){const e=this._proxySubscribersRest;for(let n=0,i=e.length;n<i;++n)if(e[n]===t)return!0}return!1}function Pt(t){const e=this._collectionSubscriberFlags;if((1&e)>0&&this._collectionSubscriber0===t)return!0;if((2&e)>0&&this._collectionSubscriber1===t)return!0;if((4&e)>0&&this._collectionSubscriber2===t)return!0;if((8&e)>0){const e=this._collectionSubscribersRest;for(let n=0,i=e.length;n<i;++n)if(e[n]===t)return!0}return!1}function It(t,e,n){const i=this._subscriber0,r=this._subscriber1,s=this._subscriber2;let o=this._subscribersRest;if(void 0!==o&&(o=o.slice()),void 0!==i&&Et(i,t,e,n,void 0===i.id?0:this[i.id]),void 0!==r&&Et(r,t,e,n,void 0===r.id?0:this[r.id]),void 0!==s&&Et(s,t,e,n,void 0===s.id?0:this[s.id]),void 0!==o){const{length:i}=o;let r;for(let s=0;s<i;++s)r=o[s],void 0!==r&&Et(r,t,e,n,void 0===r.id?0:this[r.id])}}function Et(t,e,n,i,r){t.handleChange(e,n,24^(24|i)|r)}function Vt(t,e,n,i){const r=this._proxySubscriber0,s=this._proxySubscriber1,o=this._proxySubscriber2;let a=this._proxySubscribersRest;if(void 0!==a&&(a=a.slice()),void 0!==r&&r.handleProxyChange(t,e,n,i),void 0!==s&&s.handleProxyChange(t,e,n,i),void 0!==o&&o.handleProxyChange(t,e,n,i),void 0!==a){const{length:r}=a;let s;for(let o=0;o<r;++o)s=a[o],void 0!==s&&s.handleProxyChange(t,e,n,i)}}function $t(t,e){const n=this._collectionSubscriber0,i=this._collectionSubscriber1,r=this._collectionSubscriber2;let s=this._collectionSubscribersRest;if(void 0!==s&&(s=s.slice()),void 0!==n&&n.handleCollectionChange(t,e),void 0!==i&&i.handleCollectionChange(t,e),void 0!==r&&r.handleCollectionChange(t,e),void 0!==s){const{length:n}=s;let i;for(let r=0;r<n;++r)i=s[r],void 0!==i&&i.handleCollectionChange(t,e)}}var Nt=function(t,e,n,i){var r,s=arguments.length,o=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(o=(s<3?r(o):s>3?r(e,n,o):r(e,n))||o);return s>3&&o&&Object.defineProperty(e,n,o),o},Ft=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};const Bt=new WeakMap;let Lt=(()=>{let t=class{constructor(t,e,n){this.proxy=t,this.raw=e,this.key=n,this.inBatch=!1,this.subscribe=this.addSubscriber,this.unsubscribe=this.removeSubscriber,e[n]instanceof Object&&(e[n]=Mt.getOrCreate(e[n]).proxy)}setValue(t,e){const n=this.raw[this.key];n!==t&&(this.raw[this.key]=t,this.callSubscribers(t,n,10|e))}getValue(){return this.raw[this.key]}flushBatch(t){}};return t=Nt([bt(),Ft("design:paramtypes",[Object,Object,Object])],t),t})(),Mt=(()=>{var t;let e=t=class{constructor(t){this.raw=t,this.proxy=new Proxy(t,this),Bt.set(t,this.proxy),this.subscribers={}}static getProxyOrSelf(t){if(void 0===t.$raw){const e=Bt.get(t);return void 0===e?t:e}return t}static getRawIfProxy(t){const e=t.$raw;return void 0===e?t:e}static getOrCreate(e,n){let i;if(void 0===e.$raw){const n=Bt.get(e);i=void 0===n?new t(e):n.$observer}else i=e.$observer;if(void 0===n)return i;let r=i.subscribers[n];if(void 0===r){const t=this.getRawIfProxy(e),s=i.proxy;r=i.subscribers[n]=new Lt(s,t,n)}return r}static isProxy(t){return void 0!==t.$raw}get(t,e,n){return"$observer"===e?this:"$raw"===e?t:t[e]}set(t,e,n,i){const r=t[e];return r!==n&&(t[e]=n,this.callPropertySubscribers(n,r,e),this.callProxySubscribers(e,n,r,10)),!0}deleteProperty(t,e){const n=t[e];return!!Reflect.deleteProperty(t,e)&&(void 0!==n&&(this.callPropertySubscribers(void 0,n,e),this.callProxySubscribers(e,void 0,n,10)),!0)}defineProperty(t,e,n){const i=t[e];return!!Reflect.defineProperty(t,e,n)&&(n.value!==i&&(this.callPropertySubscribers(n.value,i,e),this.callProxySubscribers(e,n.value,i,10)),!0)}apply(t,e,n=i.g.emptyArray){return Reflect.apply(t,t,n)}subscribe(t,e){if(void 0===e)this.addProxySubscriber(t);else{let n=this.subscribers[e];void 0===n&&(n=this.subscribers[e]=new Lt(this.proxy,this.raw,e)),n.addSubscriber(t)}}unsubscribe(t,e){if(void 0===e)this.removeProxySubscriber(t);else{const n=this.subscribers[e];void 0!==n&&n.removeSubscriber(t)}}callPropertySubscribers(t,e,n){const i=this.subscribers[n];void 0!==i&&i.callSubscribers(t,e,10)}};return e=t=Nt([function(t){const e=t.prototype;e._proxySubscriberFlags=0,e.addProxySubscriber=wt,e.removeProxySubscriber=kt,e.hasProxySubscriber=Rt,e.hasProxySubscribers=Tt,e.callProxySubscribers=Vt,void 0===e.subscribeToProxy&&(e.subscribeToProxy=wt),void 0===e.unsubscribeFromProxy&&(e.unsubscribeFromProxy=kt)},Ft("design:paramtypes",[Object])],e),e})();var Dt,Ut,qt=function(t,e,n,i){var r,s=arguments.length,o=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(o=(s<3?r(o):s>3?r(e,n,o):r(e,n))||o);return s>3&&o&&Object.defineProperty(e,n,o),o},_t=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},Ht=function(t,e){return function(n,i){e(n,i,t)}};function zt(t){const e=[];return 1==(1&t)&&e.push("activating"),14==(14&t)?e.push("activated"):(2==(2&t)&&e.push("beforeBindCalled"),4==(4&t)&&e.push("activateChildrenCalled")),16==(16&t)&&e.push("deactivating"),224==(224&t)?e.push("deactivated"):(32==(32&t)&&e.push("beforeDetachCalled"),64==(64&t)&&e.push("deactivateChildrenCalled")),256==(256&t)&&e.push("released"),512==(512&t)&&e.push("disposed"),0===e.length?"none":e.join("|")}!function(t){t[t.customElement=0]="customElement",t[t.customAttribute=1]="customAttribute",t[t.synthetic=2]="synthetic"}(Dt||(Dt={})),function(t){t[t.none=0]="none",t[t.activating=1]="activating",t[t.beforeBindCalled=2]="beforeBindCalled",t[t.activateChildrenCalled=4]="activateChildrenCalled",t[t.activated=14]="activated",t[t.deactivating=16]="deactivating",t[t.beforeDetachCalled=32]="beforeDetachCalled",t[t.deactivateChildrenCalled=64]="deactivateChildrenCalled",t[t.deactivated=224]="deactivated",t[t.released=256]="released",t[t.disposed=512]="disposed"}(Ut||(Ut={}));const Kt=i.a.createInterface("IController").noDefault();var Wt;!function(t){t[t.insertBefore=1]="insertBefore",t[t.append=2]="append"}(Wt||(Wt={}));const Qt=i.a.createInterface("IViewFactory").noDefault(),Jt=i.a.createInterface("ILifecycle").withDefault(t=>t.singleton(Yt));let Gt=(()=>{let t=class{constructor(t){this.lifecycle=t,this.queue=[],this.depth=0}begin(){++this.depth}end(t){void 0===t&&(t=0),0==--this.depth&&this.process(t)}inline(t,e){this.begin(),t(),this.end(e)}add(t){this.queue.push(t)}remove(t){const e=this.queue.indexOf(t);e>-1&&this.queue.splice(e,1)}process(t){for(;this.queue.length>0;){const e=this.queue.slice();this.queue=[];const{length:n}=e;for(let i=0;i<n;++i)e[i].flushBatch(t)}}};return t=qt([Ht(0,Jt),_t("design:paramtypes",[Object])],t),t})();class Yt{constructor(){this.batch=new Gt(this)}static register(t){return i.i.singleton(Jt,this).register(t)}}var Zt=function(t,e,n,i){var r,s=arguments.length,o=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(o=(s<3?r(o):s>3?r(e,n,o):r(e,n))||o);return s>3&&o&&Object.defineProperty(e,n,o),o},Xt=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};let te=(()=>{let t=class{constructor(t,e,n,i){this.lifecycle=t,this.obj=n,this.propertyKey=i,this.currentValue=void 0,this.oldValue=void 0,this.inBatch=!1,this.observing=!1,this.type=4,this.persistentFlags=31751&e}getValue(){return this.currentValue}setValue(t,e){if(this.observing){const n=this.currentValue;this.currentValue=t,this.callSubscribers(t,n,this.persistentFlags|e)}else this.obj[this.propertyKey]=t}flushBatch(t){this.inBatch=!1;const e=this.currentValue,n=this.oldValue;this.oldValue=e,this.callSubscribers(e,n,this.persistentFlags|t)}subscribe(t){!1===this.observing&&(this.observing=!0,this.currentValue=this.obj[this.propertyKey],Reflect.defineProperty(this.obj,this.propertyKey,{enumerable:!0,configurable:!0,get:()=>this.getValue(),set:t=>{this.setValue(t,0)}})||i.j.write(1,this.propertyKey,this.obj)),this.addSubscriber(t)}};return t=Zt([bt(),Xt("design:paramtypes",[Object,Number,Object,String])],t),t})();var ee;!function(t){t[t.NilScope=250]="NilScope",t[t.NilOverrideContext=252]="NilOverrideContext",t[t.NilParentScope=253]="NilParentScope"}(ee||(ee={}));const ne=Object.freeze({});class ie{getOrCreate(t,e,n,i){return void 0===this[i]&&(this[i]=new te(t,e,n,i)),this[i]}}class re{constructor(t,e){if(this.$synthetic=!0,void 0!==t)if(void 0!==e)this[t]=e;else for(const e in t)Object.prototype.hasOwnProperty.call(t,e)&&(this[e]=t[e])}static create(t,e,n){const i=new re(e,n);return 2&t?Mt.getOrCreate(i).proxy:i}static get(t,e,n,r,s){if(null==t&&null==s)throw i.j.error(250);let o=se(t,e,n);return null!==o||s!==t&&null!=s&&(o=se(s,e,n),null!==o)?o:256&r?ne:t.bindingContext||t.overrideContext}getObservers(t){return null==this.$observers&&(this.$observers=new ie),this.$observers}}function se(t,e,n){var i,r;let s=t.overrideContext,o=t;if(n>0){for(;n>0;)if(n--,o=o.parentScope,null==(null==o?void 0:o.overrideContext))return;return s=o.overrideContext,e in s?s:s.bindingContext}for(;s&&!(e in s)&&(!s.bindingContext||!(e in s.bindingContext));)o=null!==(i=o.parentScope)&&void 0!==i?i:null,s=null!==(r=null==o?void 0:o.overrideContext)&&void 0!==r?r:null;return s?e in s?s:s.bindingContext:null}class oe{constructor(t,e,n){this.parentScope=t,this.bindingContext=e,this.overrideContext=n}static create(t,e,n){return new oe(null,e,null==n?ae.create(t,e):n)}static fromOverride(t,e){if(null==e)throw i.j.error(252);return new oe(null,e.bindingContext,e)}static fromParent(t,e,n){if(null==e)throw i.j.error(253);return new oe(e,n,ae.create(t,n))}}class ae{constructor(t){this.$synthetic=!0,this.bindingContext=t}static create(t,e){return new ae(e)}getObservers(){return void 0===this.$observers&&(this.$observers=new ie),this.$observers}}const ce=i.a.createInterface("ISignaler").withDefault(t=>t.singleton(le));class le{constructor(){this.signals=Object.create(null)}dispatchSignal(t,e){const n=this.signals[t];if(void 0!==n)for(const t of n.keys())t.handleChange(void 0,void 0,8|e)}addSignalListener(t,e){const n=this.signals,i=n[t];void 0===i?n[t]=new Set([e]):i.add(e)}removeSignalListener(t,e){const n=this.signals[t];n&&n.delete(e)}}Array.prototype.slice;const he=[],ue=[];let de=-1;function pe(t){if(t===de){de+=5;const e=he.length=ue.length=de+1;for(let n=t+1;n<e;++n)he[n]="_observer"+n,ue[n]="_observerVersion"+n}}function fe(t){const e=null==this.observerSlots?0:this.observerSlots;let n=e;for(;n--&&this[he[n]]!==t;);if(-1===n){for(n=0;this[he[n]];)n++;this[he[n]]=t,t.subscribe(this),t[this.id]|=8,n===e&&(this.observerSlots=n+1)}null==this.version&&(this.version=0),this[ue[n]]=this.version,pe(n)}function ge(t,e,n){const i=this.observerLocator.getObserver(t,e,n);this.addObserver(i)}function ve(t){const e=this.observerSlots;let n,i;if(!0===t)for(let t=0;t<e;++t)n=he[t],i=this[n],null!=i&&(this[n]=void 0,i.unsubscribe(this),i[this.id]&=-9);else{const t=this.version;for(let r=0;r<e;++r)this[ue[r]]!==t&&(n=he[r],i=this[n],null!=i&&(this[n]=void 0,i.unsubscribe(this),i[this.id]&=-9))}}function be(t){const e=t.prototype;return Object.prototype.hasOwnProperty.call(e,"observeProperty")||(e.observeProperty=ge),Object.prototype.hasOwnProperty.call(e,"unobserve")||(e.unobserve=ve),Object.prototype.hasOwnProperty.call(e,"addObserver")||(e.addObserver=fe),t}function me(t){return null==t?be:be(t)}pe(-1);let ye=0;me.assignIdTo=t=>{t.id=++ye};var we,Ce=function(t,e,n,i){var r,s=arguments.length,o=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(o=(s<3?r(o):s>3?r(e,n,o):r(e,n))||o);return s>3&&o&&Object.defineProperty(e,n,o),o},Se=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};function ke(t){return function(e){return xe.define(t,e)}}!function(t){t[t.singleton=1]="singleton",t[t.interceptor=2]="interceptor"}(we||(we={}));class Oe{constructor(t,e,n,i,r){this.Type=t,this.name=e,this.aliases=n,this.key=i,this.strategy=r}static create(t,e){let n,r;"string"==typeof t?(n=t,r={name:n}):(n=t.name,r=t);const s=Object.getPrototypeOf(e)===Te;return new Oe(e,Object(i.p)(xe.getAnnotation(e,"name"),n),Object(i.A)(xe.getAnnotation(e,"aliases"),r.aliases,e.aliases),xe.keyFrom(n),Object(i.q)("strategy",r,e,()=>s?2:1))}register(t){const{Type:e,key:n,aliases:r,strategy:s}=this;switch(s){case 1:i.i.singleton(n,e).register(t);break;case 2:i.i.instance(n,new je(t,e)).register(t)}i.i.aliasTo(n,e).register(t),R(r,xe,n,t)}}class je{constructor(t,e){this.container=t,this.Type=e,this.deps=i.a.getDependencies(e)}construct(t,e){const n=this.container,i=this.deps;switch(i.length){case 0:case 1:case 2:return new this.Type(t,e);case 3:return new this.Type(n.get(i[0]),t,e);case 4:return new this.Type(n.get(i[0]),n.get(i[1]),t,e);default:return new this.Type(...i.map(t=>n.get(t)),t,e)}}}let Te=(()=>{let t=class{constructor(t,e){let n;for(this.binding=t,this.expr=e,this.interceptor=this;t.interceptor!==this;)n=t.interceptor,t.interceptor=this,t=n}get id(){return this.binding.id}get observerLocator(){return this.binding.observerLocator}get locator(){return this.binding.locator}get $scope(){return this.binding.$scope}get isBound(){return this.binding.isBound}updateTarget(t,e){this.binding.updateTarget(t,e)}updateSource(t,e){this.binding.updateSource(t,e)}callSource(t){return this.binding.callSource(t)}handleChange(t,e,n){this.binding.handleChange(t,e,n)}$bind(t,e,n){this.binding.$bind(t,e,n)}$unbind(t){this.binding.$unbind(t)}};return t=Ce([me,Se("design:paramtypes",[Object,Object])],t),t})();const xe={name:i.h.resource.keyFor("binding-behavior"),keyFrom:t=>`${xe.name}:${t}`,isType:t=>"function"==typeof t&&i.f.hasOwn(xe.name,t),define(t,e){const n=Oe.create(t,e);return i.f.define(xe.name,n,n.Type),i.f.define(xe.name,n,n),i.h.resource.appendTo(e,xe.name),n.Type},getDefinition(t){const e=i.f.getOwn(xe.name,t);if(void 0===e)throw new Error("No definition found for type "+t.name);return e},annotate(t,e,n){i.f.define(i.h.annotation.keyFor(e),n,t)},getAnnotation:(t,e)=>i.f.getOwn(i.h.annotation.keyFor(e),t)};function Ae(t){return function(e){return Pe.define(t,e)}}class Re{constructor(t,e,n,i){this.Type=t,this.name=e,this.aliases=n,this.key=i}static create(t,e){let n,r;return"string"==typeof t?(n=t,r={name:n}):(n=t.name,r=t),new Re(e,Object(i.p)(Pe.getAnnotation(e,"name"),n),Object(i.A)(Pe.getAnnotation(e,"aliases"),r.aliases,e.aliases),Pe.keyFrom(n))}register(t){const{Type:e,key:n,aliases:r}=this;i.i.singleton(n,e).register(t),i.i.aliasTo(n,e).register(t),R(r,Pe,n,t)}}const Pe={name:i.h.resource.keyFor("value-converter"),keyFrom:t=>`${Pe.name}:${t}`,isType:t=>"function"==typeof t&&i.f.hasOwn(Pe.name,t),define(t,e){const n=Re.create(t,e);return i.f.define(Pe.name,n,n.Type),i.f.define(Pe.name,n,n),i.h.resource.appendTo(e,Pe.name),n.Type},getDefinition(t){const e=i.f.getOwn(Pe.name,t);if(void 0===e)throw new Error("No definition found for type "+t.name);return e},annotate(t,e,n){i.f.define(i.h.annotation.keyFor(e),n,t)},getAnnotation:(t,e)=>i.f.getOwn(i.h.annotation.keyFor(e),t)};function Ie(t,e,n){if(t){if(null==n)throw new Error("Host scope is missing. Are you using `$host` outside the `au-slot`? Or missing the `au-slot` attribute?");return n}return e}var Ee;!function(t){t[t.NoLocator=202]="NoLocator",t[t.NoBehaviorFound=203]="NoBehaviorFound",t[t.BehaviorAlreadyApplied=204]="BehaviorAlreadyApplied",t[t.NoConverterFound=205]="NoConverterFound",t[t.NoBinding=206]="NoBinding",t[t.NotAFunction=207]="NotAFunction",t[t.UnknownOperator=208]="UnknownOperator",t[t.NilScope=250]="NilScope"}(Ee||(Ee={}));class Ve{constructor(t){this.value=t}evaluate(t,e,n,i){return this.value}}class $e{constructor(t,e,n){this.expression=t,this.name=e,this.args=n,this.behaviorKey=xe.keyFrom(e)}get $kind(){return 38962}get hasBind(){return!0}get hasUnbind(){return!0}evaluate(t,e,n,i){return this.expression.evaluate(t,e,n,i)}assign(t,e,n,i,r){return this.expression.assign(t,e,n,i,r)}connect(t,e,n,i){this.expression.connect(t,e,n,i)}bind(t,e,n,r){if(null==e)throw i.j.error(250,this);if(!r)throw i.j.error(206,this);const s=r.locator;if(!s)throw i.j.error(202,this);this.expression.hasBind&&this.expression.bind(t,e,n,r);const o=this.behaviorKey,a=s.get(o);if(!a)throw i.j.error(203,this);a instanceof je||(void 0===r[o]?(r[o]=a,a.bind.call(a,t,e,n,r,...on(t,e,s,this.args,n))):i.j.write(204,this))}unbind(t,e,n,i){const r=this.behaviorKey;void 0!==i[r]&&("function"==typeof i[r].unbind&&i[r].unbind(t,e,n,i),i[r]=void 0),this.expression.hasUnbind&&this.expression.unbind(t,e,n,i)}accept(t){return t.visitBindingBehavior(this)}}class Ne{constructor(t,e,n){this.expression=t,this.name=e,this.args=n,this.converterKey=Pe.keyFrom(e)}get $kind(){return 36913}get hasBind(){return!1}get hasUnbind(){return!0}evaluate(t,e,n,r){if(!r)throw i.j.error(202,this);const s=r.get(this.converterKey);if(!s)throw i.j.error(205,this);if("toView"in s){const i=this.args,o=i.length,a=Array(o+1);a[0]=this.expression.evaluate(t,e,n,r);for(let s=0;s<o;++s)a[s+1]=i[s].evaluate(t,e,n,r);return s.toView.call(s,...a)}return this.expression.evaluate(t,e,n,r)}assign(t,e,n,r,s){if(!r)throw i.j.error(202,this);const o=r.get(this.converterKey);if(!o)throw i.j.error(205,this);return"fromView"in o&&(s=o.fromView.call(o,s,...on(t,e,r,this.args,n))),this.expression.assign(t,e,n,r,s)}connect(t,e,n,r){if(null==e)throw i.j.error(250,this);if(!r)throw i.j.error(206,this);const s=r.locator;if(!s)throw i.j.error(202,this);this.expression.connect(t,e,n,r);const o=this.args;for(let i=0,s=o.length;i<s;++i)o[i].connect(t,e,n,r);const a=s.get(this.converterKey);if(!a)throw i.j.error(205,this);const c=a.signals;if(void 0===c)return;const l=s.get(ce);for(let t=0,e=c.length;t<e;++t)l.addSignalListener(c[t],r)}unbind(t,e,n,i){const r=i.locator,s=r.get(this.converterKey).signals;if(void 0===s)return;const o=r.get(ce);for(let t=0,e=s.length;t<e;++t)o.removeSignalListener(s[t],i)}accept(t){return t.visitValueConverter(this)}}class Fe{constructor(t,e){this.target=t,this.value=e}get $kind(){return 8208}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){return this.target.assign(t,e,n,i,this.value.evaluate(t,e,n,i))}connect(t,e,n,i){}assign(t,e,n,i,r){return this.value.assign(t,e,n,i,r),this.target.assign(t,e,n,i,r)}accept(t){return t.visitAssign(this)}}class Be{constructor(t,e,n){this.condition=t,this.yes=e,this.no=n}get $kind(){return 63}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){return this.condition.evaluate(t,e,n,i)?this.yes.evaluate(t,e,n,i):this.no.evaluate(t,e,n,i)}assign(t,e,n,i,r){}connect(t,e,n,i){this.condition.evaluate(t,e,n,i.locator)?(this.condition.connect(t,e,n,i),this.yes.connect(t,e,n,i)):(this.condition.connect(t,e,n,i),this.no.connect(t,e,n,i))}accept(t){return t.visitConditional(this)}}let Le=(()=>{class t{constructor(t=0){this.ancestor=t}get $kind(){return 1793}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(e,n,r,s){var o;if(null==n)throw i.j.error(250,this);this===t.$host&&(n=Ie(!0,n,r));let a=n.overrideContext,c=n,l=this.ancestor;for(;l--&&a;)c=c.parentScope,a=null!==(o=null==c?void 0:c.overrideContext)&&void 0!==o?o:null;return l<1&&a?a.bindingContext:void 0}assign(t,e,n,i,r){}connect(t,e,n,i){}accept(t){return t.visitAccessThis(this)}}return t.$this=new t(0),t.$host=new t(0),t.$parent=new t(1),t})();class Me{constructor(t,e=0,n=!1){this.name=t,this.ancestor=e,this.accessHostScope=n}get $kind(){return 10082}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){const r=re.get(Ie(this.accessHostScope,e,n),this.name,this.ancestor,t,n)[this.name];return 4&t?r:null==r?"":r}assign(t,e,n,i,r){const s=re.get(Ie(this.accessHostScope,e,n),this.name,this.ancestor,t,n);if(s instanceof Object)return void 0!==s.$observers&&void 0!==s.$observers[this.name]?(s.$observers[this.name].setValue(r,t),r):s[this.name]=r}connect(t,e,n,i){const r=re.get(Ie(this.accessHostScope,e,n),this.name,this.ancestor,t,n);i.observeProperty(t,r,this.name)}accept(t){return t.visitAccessScope(this)}}class De{constructor(t,e){this.object=t,this.name=e}get $kind(){return 9323}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){const r=this.object.evaluate(t,e,n,i);return 4&t?null==r?r:r[this.name]:r?r[this.name]:""}assign(t,e,n,i,r){const s=this.object.evaluate(t,e,n,i);return s instanceof Object?void 0!==s.$observers&&void 0!==s.$observers[this.name]?s.$observers[this.name].setValue(r,t):s[this.name]=r:this.object.assign(t,e,n,i,{[this.name]:r}),r}connect(t,e,n,i){const r=this.object.evaluate(t,e,n,i.locator);0==(2048&t)&&this.object.connect(t,e,n,i),r instanceof Object&&i.observeProperty(t,r,this.name)}accept(t){return t.visitAccessMember(this)}}class Ue{constructor(t,e){this.object=t,this.key=e}get $kind(){return 9324}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){const r=this.object.evaluate(t,e,n,i);if(r instanceof Object){return r[this.key.evaluate(t,e,n,i)]}}assign(t,e,n,i,r){return this.object.evaluate(t,e,n,i)[this.key.evaluate(t,e,n,i)]=r}connect(t,e,n,i){const r=this.object.evaluate(t,e,n,i.locator);if(0==(2048&t)&&this.object.connect(t,e,n,i),r instanceof Object){this.key.connect(t,e,n,i);const s=this.key.evaluate(t,e,n,i.locator);i.observeProperty(t,r,s)}}accept(t){return t.visitAccessKeyed(this)}}class qe{constructor(t,e,n=0,i=!1){this.name=t,this.args=e,this.ancestor=n,this.accessHostScope=i}get $kind(){return 1448}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){const r=on(t,e=Ie(this.accessHostScope,e,n),i,this.args,n),s=re.get(e,this.name,this.ancestor,t,n),o=an(t,s,this.name);if(o)return o.apply(s,r)}assign(t,e,n,i,r){}connect(t,e,n,i){const r=this.args;for(let s=0,o=r.length;s<o;++s)r[s].connect(t,e,n,i)}accept(t){return t.visitCallScope(this)}}class _e{constructor(t,e,n){this.object=t,this.name=e,this.args=n}get $kind(){return 1161}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){const r=this.object.evaluate(t,e,n,i),s=on(t,e,i,this.args,n),o=an(t,r,this.name);if(o)return o.apply(r,s)}assign(t,e,n,i,r){}connect(t,e,n,i){const r=this.object.evaluate(t,e,n,i.locator);if(0==(2048&t)&&this.object.connect(t,e,n,i),an(-129&t,r,this.name)){const r=this.args;for(let s=0,o=r.length;s<o;++s)r[s].connect(t,e,n,i)}}accept(t){return t.visitCallMember(this)}}class He{constructor(t,e){this.func=t,this.args=e}get $kind(){return 1162}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,r){const s=this.func.evaluate(t,e,n,r);if("function"==typeof s)return s(...on(t,e,r,this.args,n));if(128&t||null!=s)throw i.j.error(207,this)}assign(t,e,n,i,r){}connect(t,e,n,i){const r=this.func.evaluate(t,e,n,i.locator);if(this.func.connect(t,e,n,i),"function"==typeof r){const r=this.args;for(let s=0,o=r.length;s<o;++s)r[s].connect(t,e,n,i)}}accept(t){return t.visitCallFunction(this)}}class ze{constructor(t,e,n){this.operation=t,this.left=e,this.right=n}get $kind(){return 46}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,r){switch(this.operation){case"&&":return this.left.evaluate(t,e,n,r)&&this.right.evaluate(t,e,n,r);case"||":return this.left.evaluate(t,e,n,r)||this.right.evaluate(t,e,n,r);case"==":return this.left.evaluate(t,e,n,r)==this.right.evaluate(t,e,n,r);case"===":return this.left.evaluate(t,e,n,r)===this.right.evaluate(t,e,n,r);case"!=":return this.left.evaluate(t,e,n,r)!=this.right.evaluate(t,e,n,r);case"!==":return this.left.evaluate(t,e,n,r)!==this.right.evaluate(t,e,n,r);case"instanceof":{const i=this.right.evaluate(t,e,n,r);return"function"==typeof i&&this.left.evaluate(t,e,n,r)instanceof i}case"in":{const i=this.right.evaluate(t,e,n,r);return i instanceof Object&&this.left.evaluate(t,e,n,r)in i}case"+":{const s=this.left.evaluate(t,e,n,r),o=this.right.evaluate(t,e,n,r);if((4&t)>0)return s+o;if(!s||!o){if(Object(i.w)(s)||Object(i.w)(o))return(s||0)+(o||0);if(Object(i.y)(s)||Object(i.y)(o))return(s||"")+(o||"")}return s+o}case"-":return this.left.evaluate(t,e,n,r)-this.right.evaluate(t,e,n,r);case"*":return this.left.evaluate(t,e,n,r)*this.right.evaluate(t,e,n,r);case"/":return this.left.evaluate(t,e,n,r)/this.right.evaluate(t,e,n,r);case"%":return this.left.evaluate(t,e,n,r)%this.right.evaluate(t,e,n,r);case"<":return this.left.evaluate(t,e,n,r)<this.right.evaluate(t,e,n,r);case">":return this.left.evaluate(t,e,n,r)>this.right.evaluate(t,e,n,r);case"<=":return this.left.evaluate(t,e,n,r)<=this.right.evaluate(t,e,n,r);case">=":return this.left.evaluate(t,e,n,r)>=this.right.evaluate(t,e,n,r);default:throw i.j.error(208,this)}}assign(t,e,n,i,r){}connect(t,e,n,i){this.left.connect(t,e,n,i),this.right.connect(t,e,n,i)}accept(t){return t.visitBinary(this)}}class Ke{constructor(t,e){this.operation=t,this.expression=e}get $kind(){return 39}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,r){switch(this.operation){case"void":return void this.expression.evaluate(t,e,n,r);case"typeof":return typeof this.expression.evaluate(4|t,e,n,r);case"!":return!this.expression.evaluate(t,e,n,r);case"-":return-this.expression.evaluate(t,e,n,r);case"+":return+this.expression.evaluate(t,e,n,r);default:throw i.j.error(208,this)}}assign(t,e,n,i,r){}connect(t,e,n,i){this.expression.connect(t,e,n,i)}accept(t){return t.visitUnary(this)}}let We=(()=>{class t{constructor(t){this.value=t}get $kind(){return 17925}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){return this.value}assign(t,e,n,i,r){}connect(t,e,n,i){}accept(t){return t.visitPrimitiveLiteral(this)}}return t.$undefined=new t(void 0),t.$null=new t(null),t.$true=new t(!0),t.$false=new t(!1),t.$empty=new t(""),t})();class Qe{constructor(t){this.parts=t}get $kind(){return 51}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){const r=this.parts;let s,o="";for(let a=0,c=r.length;a<c;++a)s=r[a].evaluate(t,e,n,i),null!=s&&(o+=s);return o}assign(t,e,n,i,r,s){}connect(t,e,n,i){for(let r=0,s=this.parts.length;r<s;++r)this.parts[r].connect(t,e,n,i)}accept(t){return t.visitHtmlLiteral(this)}}let Je=(()=>{class t{constructor(t){this.elements=t}get $kind(){return 17955}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){const r=this.elements,s=r.length,o=Array(s);for(let a=0;a<s;++a)o[a]=r[a].evaluate(t,e,n,i);return o}assign(t,e,n,i,r){}connect(t,e,n,i){const r=this.elements;for(let s=0,o=r.length;s<o;++s)r[s].connect(t,e,n,i)}accept(t){return t.visitArrayLiteral(this)}}return t.$empty=new t(i.g.emptyArray),t})(),Ge=(()=>{class t{constructor(t,e){this.keys=t,this.values=e}get $kind(){return 17956}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){const r={},s=this.keys,o=this.values;for(let a=0,c=s.length;a<c;++a)r[s[a]]=o[a].evaluate(t,e,n,i);return r}assign(t,e,n,i,r){}connect(t,e,n,i){const r=this.keys,s=this.values;for(let o=0,a=r.length;o<a;++o)s[o].connect(t,e,n,i)}accept(t){return t.visitObjectLiteral(this)}}return t.$empty=new t(i.g.emptyArray,i.g.emptyArray),t})(),Ye=(()=>{class t{constructor(t,e=i.g.emptyArray){this.cooked=t,this.expressions=e}get $kind(){return 17958}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){const r=this.expressions,s=this.cooked;let o=s[0];for(let a=0,c=r.length;a<c;++a)o+=r[a].evaluate(t,e,n,i),o+=s[a+1];return o}assign(t,e,n,i,r){}connect(t,e,n,i){const r=this.expressions;for(let s=0,o=r.length;s<o;++s)r[s].connect(t,e,n,i),s++}accept(t){return t.visitTemplate(this)}}return t.$empty=new t([""]),t})();class Ze{constructor(t,e,n,r=i.g.emptyArray){this.cooked=t,this.func=n,this.expressions=r,t.raw=e}get $kind(){return 1197}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,r){const s=this.expressions,o=s.length,a=Array(o);for(let i=0,c=o;i<c;++i)a[i]=s[i].evaluate(t,e,n,r);const c=this.func.evaluate(t,e,n,r);if("function"!=typeof c)throw i.j.error(207,this);return c(this.cooked,...a)}assign(t,e,n,i,r){}connect(t,e,n,i){const r=this.expressions;for(let s=0,o=r.length;s<o;++s)r[s].connect(t,e,n,i);this.func.connect(t,e,n,i)}accept(t){return t.visitTaggedTemplate(this)}}class Xe{constructor(t){this.elements=t}get $kind(){return 65556}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){}assign(t,e,n,i,r){}connect(t,e,n,i){}accept(t){return t.visitArrayBindingPattern(this)}}class tn{constructor(t,e){this.keys=t,this.values=e}get $kind(){return 65557}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){}assign(t,e,n,i,r){}connect(t,e,n,i){}accept(t){return t.visitObjectBindingPattern(this)}}class en{constructor(t){this.name=t}get $kind(){return 65558}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){return this.name}connect(t,e,n,i){}accept(t){return t.visitBindingIdentifier(this)}}const nn=Object.prototype.toString;class rn{constructor(t,e){this.declaration=t,this.iterable=e}get $kind(){return 6199}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){return this.iterable.evaluate(t,e,n,i)}assign(t,e,n,i,r){}count(t,e){switch(nn.call(e)){case"[object Array]":return e.length;case"[object Map]":case"[object Set]":return e.size;case"[object Number]":return e;case"[object Null]":case"[object Undefined]":return 0;default:throw i.j.error(0)}}iterate(t,e,n){switch(nn.call(e)){case"[object Array]":return cn(t,e,n);case"[object Map]":return function(t,e,n){const i=Array(e.size);let r=-1;for(const t of e.entries())i[++r]=t;cn(t,i,n)}(t,e,n);case"[object Set]":return function(t,e,n){const i=Array(e.size);let r=-1;for(const t of e.keys())i[++r]=t;cn(t,i,n)}(t,e,n);case"[object Number]":return function(t,e,n){const i=Array(e);for(let t=0;t<e;++t)i[t]=t;cn(t,i,n)}(t,e,n);case"[object Null]":case"[object Undefined]":return;default:throw i.j.error(0)}}connect(t,e,n,i){this.declaration.connect(t,e,n,i),this.iterable.connect(t,e,n,i)}bind(t,e,n,i){this.iterable.hasBind&&this.iterable.bind(t,e,n,i)}unbind(t,e,n,i){this.iterable.hasUnbind&&this.iterable.unbind(t,e,n,i)}accept(t){return t.visitForOfStatement(this)}}class sn{constructor(t,e=i.g.emptyArray){this.parts=t,this.expressions=e,this.isMulti=e.length>1,this.firstExpression=e[0]}get $kind(){return 24}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,n,i){if(this.isMulti){const r=this.expressions,s=this.parts;let o=s[0];for(let a=0,c=r.length;a<c;++a)o+=r[a].evaluate(t,e,n,i),o+=s[a+1];return o}{const r=this.parts;return`${r[0]}${this.firstExpression.evaluate(t,e,n,i)}${r[1]}`}}assign(t,e,n,i,r){}connect(t,e,n,i){}accept(t){return t.visitInterpolation(this)}}function on(t,e,n,i,r){const s=i.length,o=Array(s);for(let a=0;a<s;++a)o[a]=i[a].evaluate(t,e,r,n);return o}function an(t,e,n){const r=null==e?null:e[n];if("function"==typeof r)return r;if(!(128&t)&&null==r)return null;throw i.j.error(207,e,n,r)}function cn(t,e,n){if(2==(2&t)){const t=Mt.getRawIfProxy(e),i=t.length;let r,s=0;for(;s<i;++s)r=t[s],r instanceof Object&&(r=t[s]=Mt.getOrCreate(r).proxy),n(t,s,r)}else for(let t=0,i=e.length;t<i;++t)n(e,t,e[t])}var ln,hn,un,dn,pn=n(3);function fn(t=0){const e=Array(t);let n=0;for(;n<t;)e[n]=n++;return e.deletedItems=[],e.isIndexMap=!0,e}!function(t){t[t.None=0]="None",t[t.Subscriber0=1]="Subscriber0",t[t.Subscriber1=2]="Subscriber1",t[t.Subscriber2=4]="Subscriber2",t[t.SubscribersRest=8]="SubscribersRest",t[t.Any=15]="Any"}(ln||(ln={})),function(t){t[t.none=0]="none",t[t.capturing=1]="capturing",t[t.bubbling=2]="bubbling"}(hn||(hn={})),function(t){t[t.indexed=8]="indexed",t[t.keyed=4]="keyed",t[t.array=9]="array",t[t.map=6]="map",t[t.set=7]="set"}(un||(un={})),function(t){t[t.None=0]="None",t[t.Observer=1]="Observer",t[t.Node=2]="Node",t[t.Obj=4]="Obj",t[t.Array=10]="Array",t[t.Set=18]="Set",t[t.Map=34]="Map",t[t.Layout=64]="Layout"}(dn||(dn={}));var gn=function(t,e,n,i){var r,s=arguments.length,o=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(o=(s<3?r(o):s>3?r(e,n,o):r(e,n))||o);return s>3&&o&&Object.defineProperty(e,n,o),o},vn=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};let bn=(()=>{let t=class{constructor(t){this.obj=t,this.type=10,this.task=null,this.currentValue=t.length}getValue(){return this.obj.length}setValue(t,e){const n=this.currentValue;t!==n&&(this.currentValue=t,this.callSubscribers(t,n,8|e))}};return t=gn([bt(),vn("design:paramtypes",[Array])],t),t})();var mn=function(t,e,n,i){var r,s=arguments.length,o=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(o=(s<3?r(o):s>3?r(e,n,o):r(e,n))||o);return s>3&&o&&Object.defineProperty(e,n,o),o},yn=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};const wn=new WeakMap;function Cn(t,e){return t===e?0:(t=null===t?"null":t.toString())<(e=null===e?"null":e.toString())?-1:1}function Sn(t,e){return void 0===t?void 0===e?0:1:void 0===e?-1:0}function kn(t,e,n,i,r){let s,o,a,c,l,h,u;for(h=n+1;h<i;h++){for(s=t[h],o=e[h],u=h-1;u>=n&&(a=t[u],c=e[u],l=r(a,s),l>0);u--)t[u+1]=a,e[u+1]=c;t[u+1]=s,e[u+1]=o}}function On(t,e,n,i,r){let s,o,a,c,l,h,u,d,p,f,g,v,b,m,y,w,C,S,k,O=0,j=0;for(;;){if(i-n<=10)return void kn(t,e,n,i,r);O=n+(i-n>>1),s=t[n],c=e[n],o=t[i-1],l=e[i-1],a=t[O],h=e[O],u=r(s,o),u>0&&(f=s,g=c,s=o,c=l,o=f,l=g),d=r(s,a),d>=0?(f=s,g=c,s=a,c=h,a=o,h=l,o=f,l=g):(p=r(o,a),p>0&&(f=o,g=l,o=a,l=h,a=f,h=g)),t[n]=s,e[n]=c,t[i-1]=a,e[i-1]=h,v=o,b=l,m=n+1,y=i-1,t[O]=t[m],e[O]=e[m],t[m]=v,e[m]=b;t:for(j=m+1;j<y;j++)if(w=t[j],C=e[j],S=r(w,v),S<0)t[j]=t[m],e[j]=e[m],t[m]=w,e[m]=C,m++;else if(S>0){do{if(y--,y==j)break t;k=t[y],S=r(k,v)}while(S>0);t[j]=t[y],e[j]=e[y],t[y]=w,e[y]=C,S<0&&(w=t[j],C=e[j],t[j]=t[m],e[j]=e[m],t[m]=w,e[m]=C,m++)}i-y<m-n?(On(t,e,y,i,r),i=m):(On(t,e,n,m,r),n=y)}}const jn=Array.prototype,Tn=jn.push,xn=jn.unshift,An=jn.pop,Rn=jn.shift,Pn=jn.splice,In=jn.reverse,En=jn.sort,Vn=["push","unshift","pop","shift","splice","reverse","sort"],$n={push:function(...t){let e=this;void 0!==e.$raw&&(e=e.$raw);const n=wn.get(e);if(void 0===n)return Tn.apply(e,t);const i=e.length,r=t.length;if(0===r)return i;e.length=n.indexMap.length=i+r;let s=i;for(;s<e.length;)e[s]=t[s-i],n.indexMap[s]=-2,s++;return n.notify(),e.length},unshift:function(...t){let e=this;void 0!==e.$raw&&(e=e.$raw);const n=wn.get(e);if(void 0===n)return xn.apply(e,t);const i=t.length,r=new Array(i);let s=0;for(;s<i;)r[s++]=-2;xn.apply(n.indexMap,r);const o=xn.apply(e,t);return n.notify(),o},pop:function(){let t=this;void 0!==t.$raw&&(t=t.$raw);const e=wn.get(t);if(void 0===e)return An.call(t);const n=e.indexMap,i=An.call(t),r=n.length-1;return n[r]>-1&&n.deletedItems.push(n[r]),An.call(n),e.notify(),i},shift:function(){let t=this;void 0!==t.$raw&&(t=t.$raw);const e=wn.get(t);if(void 0===e)return Rn.call(t);const n=e.indexMap,i=Rn.call(t);return n[0]>-1&&n.deletedItems.push(n[0]),Rn.call(n),e.notify(),i},splice:function(...t){const e=t[0],n=t[1];let i=this;void 0!==i.$raw&&(i=i.$raw);const r=wn.get(i);if(void 0===r)return Pn.apply(i,t);const s=this.length,o=0|e,a=o<0?Math.max(s+o,0):Math.min(o,s),c=r.indexMap,l=t.length,h=0===l?0:1===l?s-a:n;if(h>0){let t=a;const e=t+h;for(;t<e;)c[t]>-1&&c.deletedItems.push(c[t]),t++}if(l>2){const t=l-2,i=new Array(t);let r=0;for(;r<t;)i[r++]=-2;Pn.call(c,e,n,...i)}else Pn.apply(c,t);const u=Pn.apply(i,t);return r.notify(),u},reverse:function(){let t=this;void 0!==t.$raw&&(t=t.$raw);const e=wn.get(t);if(void 0===e)return In.call(t),this;const n=t.length,i=n/2|0;let r=0;for(;r!==i;){const i=n-r-1,s=t[r],o=e.indexMap[r],a=t[i],c=e.indexMap[i];t[r]=a,e.indexMap[r]=c,t[i]=s,e.indexMap[i]=o,r++}return e.notify(),this},sort:function(t){let e=this;void 0!==e.$raw&&(e=e.$raw);const n=wn.get(e);if(void 0===n)return En.call(e,t),this;const i=e.length;if(i<2)return this;On(e,n.indexMap,0,i,Sn);let r=0;for(;r<i&&void 0!==e[r];)r++;return void 0!==t&&"function"==typeof t||(t=Cn),On(e,n.indexMap,0,r,t),n.notify(),this}},Nn={writable:!0,enumerable:!1,configurable:!0},Fn=Reflect.defineProperty;for(const t of Vn)Fn($n[t],"observing",{value:!0,writable:!1,configurable:!1,enumerable:!1});let Bn=!1;let Ln=(()=>{let t=class{constructor(t,e,n){this.type=10,this.task=null,Bn||(Bn=!0,function(){for(const t of Vn)!0!==jn[t].observing&&Fn(jn,t,{...Nn,value:$n[t]})}()),this.inBatch=!1,this.indexObservers={},this.collection=n,this.persistentFlags=31751&t,this.indexMap=fn(n.length),this.lifecycle=e,this.lengthObserver=void 0,wn.set(n,this)}notify(){this.lifecycle.batch.depth>0?this.inBatch||(this.inBatch=!0,this.lifecycle.batch.add(this)):this.flushBatch(0)}getLengthObserver(){return void 0===this.lengthObserver&&(this.lengthObserver=new bn(this.collection)),this.lengthObserver}getIndexObserver(t){return this.getOrCreateIndexObserver(t)}flushBatch(t){const e=this.indexMap,n=this.collection.length;this.inBatch=!1,this.indexMap=fn(n),this.callCollectionSubscribers(e,8|this.persistentFlags),void 0!==this.lengthObserver&&this.lengthObserver.setValue(n,8)}addIndexObserver(t){this.addCollectionSubscriber(t)}removeIndexObserver(t){this.removeCollectionSubscriber(t)}getOrCreateIndexObserver(t){const e=this.indexObservers;let n=e[t];return void 0===n&&(n=e[t]=new Mn(this,t)),n}};return t=mn([mt(),yn("design:paramtypes",[Number,Object,Object])],t),t})(),Mn=(()=>{let t=class{constructor(t,e){this.owner=t,this.index=e,this.subscriberCount=0,this.currentValue=this.getValue()}getValue(){return this.owner.collection[this.index]}setValue(t,e){if(t===this.getValue())return;const n=this.owner,i=this.index,r=n.indexMap;r[i]>-1&&r.deletedItems.push(r[i]),r[i]=-2,n.collection[i]=t,n.notify()}handleCollectionChange(t,e){const n=this.index;if(t[n]===n)return;const i=this.currentValue,r=this.currentValue=this.getValue();i!==r&&this.callSubscribers(r,i,e)}subscribe(t){this.addSubscriber(t)&&1==++this.subscriberCount&&this.owner.addIndexObserver(this)}unsubscribe(t){this.removeSubscriber(t)&&0==--this.subscriberCount&&this.owner.removeIndexObserver(this)}};return t=mn([bt(),yn("design:paramtypes",[Ln,Number])],t),t})();function Dn(t,e,n){const i=wn.get(n);return void 0===i?new Ln(t,e,n):i}var Un=function(t,e,n,i){var r,s=arguments.length,o=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(o=(s<3?r(o):s>3?r(e,n,o):r(e,n))||o);return s>3&&o&&Object.defineProperty(e,n,o),o},qn=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};const _n={static:!1,volatile:!1};let Hn=(()=>{let t=class{constructor(t,e,n){this.obj=t,this.propertyKey=e,this.descriptor=n,this.currentValue=void 0,this.oldValue=void 0,this.observing=!1}setValue(t){this.descriptor.set.call(this.obj,t),this.currentValue!==t&&(this.oldValue=this.currentValue,this.currentValue=t,this.callSubscribers(t,this.oldValue,8))}subscribe(t){this.observing||this.convertProperty(),this.addSubscriber(t)}unsubscribe(t){this.removeSubscriber(t)}convertProperty(){this.observing=!0,this.currentValue=this.obj[this.propertyKey];Reflect.defineProperty(this.obj,this.propertyKey,{set:t=>{this.setValue(t)},get:this.descriptor.get})}};return t=Un([bt(),qn("design:paramtypes",[Object,String,Object])],t),t})(),zn=(()=>{let t=class{constructor(t,e,n,i,r,s){this.overrides=e,this.obj=n,this.propertyKey=i,this.descriptor=r,this.currentValue=void 0,this.oldValue=void 0,this.propertyDeps=[],this.collectionDeps=[],this.subscriberCount=0,this.isCollecting=!1,this.proxy=new Proxy(n,Wn(t,s,this));Reflect.defineProperty(n,i,{get:()=>this.getValue(),set:r.set})}addPropertyDep(t){this.propertyDeps.includes(t)||this.propertyDeps.push(t)}addCollectionDep(t){this.collectionDeps.includes(t)||this.collectionDeps.push(t)}getValue(){return this.subscriberCount>0||this.isCollecting?this.currentValue=Reflect.apply(this.descriptor.get,this.proxy,i.g.emptyArray):this.currentValue=Reflect.apply(this.descriptor.get,this.obj,i.g.emptyArray),this.currentValue}subscribe(t){this.addSubscriber(t),1==++this.subscriberCount&&this.getValueAndCollectDependencies(!0)}unsubscribe(t){this.removeSubscriber(t),0==--this.subscriberCount&&this.unsubscribeAllDependencies()}handleChange(){const t=this.currentValue,e=this.getValueAndCollectDependencies(!1);t!==e&&this.callSubscribers(e,t,8)}handleCollectionChange(){const t=this.currentValue,e=this.getValueAndCollectDependencies(!1);t!==e&&this.callSubscribers(e,t,8)}getValueAndCollectDependencies(t){const e=!this.overrides.static||t;return e&&(this.unsubscribeAllDependencies(),this.isCollecting=!0),this.currentValue=this.getValue(),e&&(this.propertyDeps.forEach(t=>{t.subscribe(this)}),this.collectionDeps.forEach(t=>{t.subscribeToCollection(this)}),this.isCollecting=!1),this.currentValue}doNotCollect(t,e,n){return!this.isCollecting||"$observers"===e||"$synthetic"===e||"constructor"===e}unsubscribeAllDependencies(){this.propertyDeps.forEach(t=>{t.unsubscribe(this)}),this.propertyDeps.length=0,this.collectionDeps.forEach(t=>{t.unsubscribeFromCollection(this)}),this.collectionDeps.length=0}};return t=Un([bt(),qn("design:paramtypes",[Number,Object,Object,String,Object,Object])],t),t})();const Kn=Object.prototype.toString;function Wn(t,e,n){return{get:function(r,s,o){if(n.doNotCollect(r,s,o))return Reflect.get(r,s,o);switch(Kn.call(r)){case"[object Array]":if("length"===s||Object(i.u)(s))return n.addCollectionDep(e.getArrayObserver(t,r)),Qn(t,r,s,e,n);break;case"[object Map]":if("size"===s)return n.addCollectionDep(e.getMapObserver(t,r)),Reflect.get(r,s,r);break;case"[object Set]":if("size"===s)return n.addCollectionDep(e.getSetObserver(t,r)),Reflect.get(r,s,r)}return n.addPropertyDep(e.getObserver(t,r,s)),Qn(t,r,s,e,n)}}}function Qn(t,e,n,i,r){const s=Reflect.get(e,n,e);return"object"!=typeof s||"function"==typeof s||null===s?s:new Proxy(s,Wn(t,i,r))}var Jn=function(t,e,n,i){var r,s=arguments.length,o=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(o=(s<3?r(o):s>3?r(e,n,o):r(e,n))||o);return s>3&&o&&Object.defineProperty(e,n,o),o},Gn=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},Yn=function(t,e){return function(n,i){e(n,i,t)}};const Zn=i.a.createInterface("IDirtyChecker").withDefault(t=>t.singleton(ti)),Xn={framesPerCheck:6,disabled:!1,warn:!0,throw:!1,resetToDefault(){this.framesPerCheck=6,this.disabled=!1,this.warn=!0,this.throw=!1}};let ti=(()=>{let t=class{constructor(t){this.scheduler=t,this.tracked=[],this.task=null,this.elapsedFrames=0}createProperty(t,e){if(Xn.throw)throw i.j.error(800,e);return Xn.warn&&i.j.write(801,e),new ei(this,t,e)}addProperty(t){this.tracked.push(t),1===this.tracked.length&&(this.task=this.scheduler.queueRenderTask(()=>this.check(),{persistent:!0}))}removeProperty(t){this.tracked.splice(this.tracked.indexOf(t),1),0===this.tracked.length&&(this.task.cancel(),this.task=null)}check(t){if(Xn.disabled)return;if(++this.elapsedFrames<Xn.framesPerCheck)return;this.elapsedFrames=0;const e=this.tracked,n=e.length;let i,r=0;for(;r<n;++r)i=e[r],i.isDirty()&&i.flush(0)}};return t=Jn([Yn(0,pn.a),Gn("design:paramtypes",[Object])],t),t})(),ei=(()=>{let t=class{constructor(t,e,n){this.dirtyChecker=t,this.obj=e,this.propertyKey=n,this.type=4}isDirty(){return this.oldValue!==this.obj[this.propertyKey]}flush(t){const e=this.oldValue,n=this.obj[this.propertyKey];this.callSubscribers(n,e,8|t),this.oldValue=n}subscribe(t){this.hasSubscribers()||(this.oldValue=this.obj[this.propertyKey],this.dirtyChecker.addProperty(this)),this.addSubscriber(t)}unsubscribe(t){this.removeSubscriber(t)&&!this.hasSubscribers()&&this.dirtyChecker.removeProperty(this)}};return t=Jn([bt(),Gn("design:paramtypes",[Object,Object,String])],t),t})();var ni=function(t,e,n,i){var r,s=arguments.length,o=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(o=(s<3?r(o):s>3?r(e,n,o):r(e,n))||o);return s>3&&o&&Object.defineProperty(e,n,o),o},ii=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};let ri=(()=>{let t=class{constructor(t){this.obj=t,this.type=4,this.task=null,this.currentValue=t.size}getValue(){return this.obj.size}setValue(t,e){const{currentValue:n}=this;t!==n&&(this.currentValue=t,this.callSubscribers(t,n,8|e))}};return t=ni([bt(),ii("design:paramtypes",[Object])],t),t})();var si=function(t,e,n,i){var r,s=arguments.length,o=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(o=(s<3?r(o):s>3?r(e,n,o):r(e,n))||o);return s>3&&o&&Object.defineProperty(e,n,o),o},oi=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};const ai=new WeakMap,ci=Map.prototype,li=ci.set,hi=ci.clear,ui=ci.delete,di=["set","clear","delete"],pi={set:function(t,e){let n=this;void 0!==n.$raw&&(n=n.$raw);const i=ai.get(n);if(void 0===i)return li.call(n,t,e),this;const r=n.get(t),s=n.size;li.call(n,t,e);if(n.size===s){let e=0;for(const s of n.entries()){if(s[0]===t)return s[1]!==r&&(i.indexMap.deletedItems.push(i.indexMap[e]),i.indexMap[e]=-2,i.notify()),this;e++}return this}return i.indexMap[s]=-2,i.notify(),this},clear:function(){let t=this;void 0!==t.$raw&&(t=t.$raw);const e=ai.get(t);if(void 0===e)return hi.call(t);if(t.size>0){const n=e.indexMap;let i=0;for(const e of t.keys())n[i]>-1&&n.deletedItems.push(n[i]),i++;hi.call(t),n.length=0,e.notify()}},delete:function(t){let e=this;void 0!==e.$raw&&(e=e.$raw);const n=ai.get(e);if(void 0===n)return ui.call(e,t);if(0===e.size)return!1;let i=0;const r=n.indexMap;for(const s of e.keys()){if(s===t){r[i]>-1&&r.deletedItems.push(r[i]),r.splice(i,1);const s=ui.call(e,t);return!0===s&&n.notify(),s}++i}return!1}},fi={writable:!0,enumerable:!1,configurable:!0},gi=Reflect.defineProperty;for(const t of di)gi(pi[t],"observing",{value:!0,writable:!1,configurable:!1,enumerable:!1});let vi=!1;Array.prototype.slice;let bi=(()=>{let t=class{constructor(t,e,n){this.type=34,this.task=null,vi||(vi=!0,function(){for(const t of di)!0!==ci[t].observing&&gi(ci,t,{...fi,value:pi[t]})}()),this.inBatch=!1,this.collection=n,this.persistentFlags=31751&t,this.indexMap=fn(n.size),this.lifecycle=e,this.lengthObserver=void 0,ai.set(n,this)}notify(){this.lifecycle.batch.depth>0?this.inBatch||(this.inBatch=!0,this.lifecycle.batch.add(this)):this.flushBatch(0)}getLengthObserver(){return void 0===this.lengthObserver&&(this.lengthObserver=new ri(this.collection)),this.lengthObserver}getIndexObserver(t){throw new Error("Map index observation not supported")}flushBatch(t){const e=this.indexMap,n=this.collection.size;this.inBatch=!1,this.indexMap=fn(n),this.callCollectionSubscribers(e,8|this.persistentFlags),void 0!==this.lengthObserver&&this.lengthObserver.setValue(n,8)}};return t=si([mt(),oi("design:paramtypes",[Number,Object,Object])],t),t})();function mi(t,e,n){const i=ai.get(n);return void 0===i?new bi(t,e,n):i}Array.prototype.slice;const yi=i.g.noop;class wi{constructor(t,e){this.doNotCache=!0,this.type=0,this.task=null,"length"===e?(this.obj=t,this.getValue=this.getStringLength):this.getValue=this.returnUndefined}getStringLength(){return this.obj.length}returnUndefined(){}}wi.prototype.setValue=yi,wi.prototype.subscribe=yi,wi.prototype.unsubscribe=yi,wi.prototype.dispose=yi;class Ci{constructor(t,e){this.obj=t,this.propertyKey=e,this.type=4,void 0!==t.$observers&&void 0!==t.$observers[e]&&void 0!==t.$observers[e].setValue&&(this.setValue=this.setValueDirect)}getValue(){return this.obj[this.propertyKey]}setValue(t,e){this.obj[this.propertyKey]=t}setValueDirect(t,e){this.obj.$observers[this.propertyKey].setValue(t,e)}}var Si=function(t,e,n,i){var r,s=arguments.length,o=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(o=(s<3?r(o):s>3?r(e,n,o):r(e,n))||o);return s>3&&o&&Object.defineProperty(e,n,o),o},ki=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};const Oi=new WeakMap,ji=Set.prototype,Ti=ji.add,xi=ji.clear,Ai=ji.delete,Ri=["add","clear","delete"],Pi={add:function(t){let e=this;void 0!==e.$raw&&(e=e.$raw);const n=Oi.get(e);if(void 0===n)return Ti.call(e,t),this;const i=e.size;Ti.call(e,t);return e.size===i||(n.indexMap[i]=-2,n.notify()),this},clear:function(){let t=this;void 0!==t.$raw&&(t=t.$raw);const e=Oi.get(t);if(void 0===e)return xi.call(t);if(t.size>0){const n=e.indexMap;let i=0;for(const e of t.keys())n[i]>-1&&n.deletedItems.push(n[i]),i++;xi.call(t),n.length=0,e.notify()}},delete:function(t){let e=this;void 0!==e.$raw&&(e=e.$raw);const n=Oi.get(e);if(void 0===n)return Ai.call(e,t);if(0===e.size)return!1;let i=0;const r=n.indexMap;for(const s of e.keys()){if(s===t){r[i]>-1&&r.deletedItems.push(r[i]),r.splice(i,1);const s=Ai.call(e,t);return!0===s&&n.notify(),s}i++}return!1}},Ii={writable:!0,enumerable:!1,configurable:!0},Ei=Reflect.defineProperty;for(const t of Ri)Ei(Pi[t],"observing",{value:!0,writable:!1,configurable:!1,enumerable:!1});let Vi=!1;Array.prototype.slice;let $i=(()=>{let t=class{constructor(t,e,n){this.type=18,this.task=null,Vi||(Vi=!0,function(){for(const t of Ri)!0!==ji[t].observing&&Ei(ji,t,{...Ii,value:Pi[t]})}()),this.inBatch=!1,this.collection=n,this.persistentFlags=31751&t,this.indexMap=fn(n.size),this.lifecycle=e,this.lengthObserver=void 0,Oi.set(n,this)}notify(){this.lifecycle.batch.depth>0?this.inBatch||(this.inBatch=!0,this.lifecycle.batch.add(this)):this.flushBatch(0)}getLengthObserver(){return void 0===this.lengthObserver&&(this.lengthObserver=new ri(this.collection)),this.lengthObserver}getIndexObserver(t){throw new Error("Set index observation not supported")}flushBatch(t){const e=this.indexMap,n=this.collection.size;this.inBatch=!1,this.indexMap=fn(n),this.callCollectionSubscribers(e,8|this.persistentFlags),void 0!==this.lengthObserver&&this.lengthObserver.setValue(n,8)}};return t=Si([mt(),ki("design:paramtypes",[Number,Object,Object])],t),t})();function Ni(t,e,n){const i=Oi.get(n);return void 0===i?new $i(t,e,n):i}var Fi=function(t,e,n,i){var r,s=arguments.length,o=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(o=(s<3?r(o):s>3?r(e,n,o):r(e,n))||o);return s>3&&o&&Object.defineProperty(e,n,o),o},Bi=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},Li=function(t,e){return function(n,i){e(n,i,t)}};const Mi=Object.prototype.toString,Di=i.a.createInterface("IObserverLocator").noDefault(),Ui=i.a.createInterface("ITargetObserverLocator").noDefault(),qi=i.a.createInterface("ITargetAccessorLocator").noDefault();let _i=(()=>{let t=class{constructor(t,e,n,i,r){this.lifecycle=t,this.scheduler=e,this.dirtyChecker=n,this.targetObserverLocator=i,this.targetAccessorLocator=r,this.adapters=[]}static register(t){return i.i.singleton(Di,this).register(t)}getObserver(t,e,n){if(2&t&&"object"==typeof e)return Mt.getOrCreate(e,n);if(function(t){return!0===t.$synthetic}(e))return e.getObservers(t).getOrCreate(this.lifecycle,t,e,n);let i=e.$observers;if(i&&n in i)return i[n];const r=this.createPropertyObserver(t,e,n);return r.doNotCache||(void 0===i&&(i=this.getOrCreateObserversLookup(e)),i[n]=r),r}addAdapter(t){this.adapters.push(t)}getAccessor(t,e,n){return this.targetAccessorLocator.handles(t,e)?this.targetObserverLocator.overridesAccessor(t,e,n)?this.getObserver(t,e,n):this.targetAccessorLocator.getAccessor(t,this.scheduler,this.lifecycle,e,n):2&t?Mt.getOrCreate(e,n):new Ci(e,n)}getArrayObserver(t,e){return Dn(t,this.lifecycle,e)}getMapObserver(t,e){return mi(t,this.lifecycle,e)}getSetObserver(t,e){return Ni(t,this.lifecycle,e)}getOrCreateObserversLookup(t){return t.$observers||this.createObserversLookup(t)}createObserversLookup(t){const e={};return Reflect.defineProperty(t,"$observers",{enumerable:!1,configurable:!1,writable:!1,value:e})||i.j.write(0,t),e}getAdapterObserver(t,e,n,i){for(let r=0,s=this.adapters.length;r<s;r++){const s=this.adapters[r].getObserver(t,e,n,i);if(null!=s)return s}return null}createPropertyObserver(t,e,n){if(!(e instanceof Object))return new wi(e,n);let r=!1;if(this.targetObserverLocator.handles(t,e)){const i=this.targetObserverLocator.getObserver(t,this.scheduler,this.lifecycle,this,e,n);if(null!=i)return i;r=!0}switch(Mi.call(e)){case"[object Array]":if("length"===n)return this.getArrayObserver(t,e).getLengthObserver();if(Object(i.u)(n))return this.getArrayObserver(t,e).getIndexObserver(Number(n));break;case"[object Map]":if("size"===n)return this.getMapObserver(t,e).getLengthObserver();break;case"[object Set]":if("size"===n)return this.getSetObserver(t,e).getLengthObserver()}const s=function(t,e){let n=Object.getOwnPropertyDescriptor(t,e),i=Object.getPrototypeOf(t);for(;null==n&&null!=i;)n=Object.getOwnPropertyDescriptor(i,e),i=Object.getPrototypeOf(i);return n}(e,n);if(null!=s&&(null!=s.get||null!=s.set)){if(null!=s.get&&null!=s.get.getObserver)return s.get.getObserver(e);const o=this.getAdapterObserver(t,e,n,s);return null!=o?o:r?this.dirtyChecker.createProperty(e,n):function(t,e,n,r,s,o,a){if(!1===a.configurable)return n.createProperty(s,o);if(null!=a.get){const{constructor:{prototype:{computed:n}}}=s,i=n&&n[o]||_n;return null!=a.set?i.volatile?new zn(t,i,s,o,a,e):new Hn(s,o,a):new zn(t,i,s,o,a,e)}throw i.j.error(18,o)}(t,this,this.dirtyChecker,this.lifecycle,e,n,s)}return new te(this.lifecycle,t,e,n)}};return t=Fi([Li(0,Jt),Li(1,pn.a),Li(2,Zn),Li(3,Ui),Li(4,qi),Bi("design:paramtypes",[Object,Object,Object,Object,Object])],t),t})();function Hi(t,e,n){const i=n instanceof Object?Mt.getRawIfProxy(n):n;switch(Mi.call(n)){case"[object Array]":return Dn(t,e,i);case"[object Map]":return mi(t,e,i);case"[object Set]":return Ni(t,e,i)}}var zi=function(t,e,n,i){var r,s=arguments.length,o=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(o=(s<3?r(o):s>3?r(e,n,o):r(e,n))||o);return s>3&&o&&Object.defineProperty(e,n,o),o},Ki=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};const{oneTime:Wi,toView:Qi,fromView:Ji}=$,Gi=Qi|Wi,Yi={reusable:!1,preempt:!0};let Zi=(()=>{let t=class{constructor(t,e,n,i,r,s){this.sourceExpression=t,this.target=e,this.targetProperty=n,this.mode=i,this.observerLocator=r,this.locator=s,this.interceptor=this,this.isBound=!1,this.$scope=void 0,this.$hostScope=null,this.targetObserver=void 0,this.persistentFlags=0,this.task=null,me.assignIdTo(this),this.$lifecycle=s.get(Jt),this.$scheduler=s.get(pn.a)}updateTarget(t,e){e|=this.persistentFlags,this.targetObserver.setValue(t,e)}updateSource(t,e){e|=this.persistentFlags,this.sourceExpression.assign(e,this.$scope,this.$hostScope,this.locator,t)}handleChange(t,e,n){var i,r;if(!this.isBound)return;n|=this.persistentFlags;const s=this.targetObserver,o=this.interceptor,a=this.sourceExpression,c=this.$scope,l=this.locator;if((8&n)>0){(10082!==this.sourceExpression.$kind||this.observerSlots>1)&&(t=this.sourceExpression.evaluate(n,c,this.$hostScope,l));const e=0==(32&n)&&(64&s.type)>0,h=s.getValue();return(10082!==a.$kind||this.observerSlots>1)&&(t=a.evaluate(n,c,this.$hostScope,l)),t!==h&&(e&&(n|=4096,null===(i=this.task)||void 0===i||i.cancel(),null===(r=s.task)||void 0===r||r.cancel(),s.task=this.task=this.$scheduler.queueRenderTask(()=>{var t,e;null===(e=(t=s).flushChanges)||void 0===e||e.call(t,n),this.task=s.task=null},Yi)),o.updateTarget(t,n)),void(0==(this.mode&Wi)&&(this.version++,a.connect(n,c,this.$hostScope,this.interceptor),o.unobserve(!1)))}if(!((16&n)>0))throw new Error("Unexpected handleChange context in PropertyBinding");t!==a.evaluate(n,c,this.$hostScope,l)&&o.updateSource(t,n)}$bind(t,e,n){if(this.isBound){if(this.$scope===e)return;this.interceptor.$unbind(32|t)}t|=4,this.persistentFlags=31751&t,this.$scope=e,this.$hostScope=n;let i=this.sourceExpression;i.hasBind&&i.bind(t,e,n,this.interceptor);let r=this.mode,s=this.targetObserver;if(!s){const e=this.observerLocator;s=r&Ji?e.getObserver(t,this.target,this.targetProperty):e.getAccessor(t,this.target,this.targetProperty),this.targetObserver=s}r!==$.oneTime&&s.bind&&s.bind(t),r=this.mode,i=this.sourceExpression;const o=this.interceptor;r&Gi&&o.updateTarget(i.evaluate(t,e,this.$hostScope,this.locator),t),r&Qi&&i.connect(t,e,this.$hostScope,o),r&Ji&&(s.subscribe(o),0==(r&Qi)&&o.updateSource(s.getValue(),t),s[this.id]|=16),this.isBound=!0}$unbind(t){if(!this.isBound)return;this.persistentFlags=0,this.sourceExpression.hasUnbind&&this.sourceExpression.unbind(t,this.$scope,this.$hostScope,this.interceptor),this.$scope=void 0;const e=this.targetObserver,n=this.task;e.unbind&&e.unbind(t),e.unsubscribe&&(e.unsubscribe(this.interceptor),e[this.id]&=-17),null!=n&&(n.cancel(),n===e.task&&(e.task=null),this.task=null),this.interceptor.unobserve(!0),this.isBound=!1}dispose(){this.interceptor=void 0,this.sourceExpression=void 0,this.locator=void 0,this.targetObserver=void 0,this.target=void 0}};return t=zi([me(),Ki("design:paramtypes",[Object,Object,String,Number,Object,Object])],t),t})();class Xi{constructor(t,e,n,i,r){this.sourceExpression=t,this.locator=r,this.interceptor=this,this.isBound=!1,this.$hostScope=null,this.targetObserver=i.getObserver(0,e,n)}callSource(t){const e=this.$scope.overrideContext;Object.assign(e,t);const n=this.sourceExpression.evaluate(128,this.$scope,this.$hostScope,this.locator);for(const n in t)Reflect.deleteProperty(e,n);return n}$bind(t,e,n){if(this.isBound){if(this.$scope===e)return;this.interceptor.$unbind(32|t)}this.$scope=e,this.$hostScope=n,this.sourceExpression.hasBind&&this.sourceExpression.bind(t,e,n,this.interceptor),this.targetObserver.setValue(t=>this.interceptor.callSource(t),t),this.isBound=!0}$unbind(t){this.isBound&&(this.sourceExpression.hasUnbind&&this.sourceExpression.unbind(t,this.$scope,this.$hostScope,this.interceptor),this.$scope=void 0,this.targetObserver.setValue(null,t),this.isBound=!1)}observeProperty(t,e,n){}handleChange(t,e,n){}dispose(){this.interceptor=void 0,this.sourceExpression=void 0,this.locator=void 0,this.targetObserver=void 0}}const tr=i.a.createInterface("IExpressionParser").withDefault(t=>t.singleton(er));class er{constructor(){this.expressionLookup=Object.create(null),this.forOfLookup=Object.create(null),this.interpolationLookup=Object.create(null)}static register(t){return i.i.singleton(tr,this).register(t)}parse(t,e){switch(e){case 2048:{let n=this.interpolationLookup[t];return void 0===n&&(n=this.interpolationLookup[t]=this.$parse(t,e)),n}case 539:{let n=this.forOfLookup[t];return void 0===n&&(n=this.forOfLookup[t]=this.$parse(t,e)),n}default:{if(0===t.length&&55&e)return We.$empty;let n=this.expressionLookup[t];return void 0===n&&(n=this.expressionLookup[t]=this.$parse(t,e)),n}}}$parse(t,e){return gr.input=t,gr.length=t.length,gr.index=0,gr.currentChar=t.charCodeAt(0),mr(gr,0,61,void 0===e?53:e)}}var nr,ir,rr,sr;function or(t){switch(t){case 98:return 8;case 116:return 9;case 110:return 10;case 118:return 11;case 102:return 12;case 114:return 13;case 34:return 34;case 39:return 39;case 92:return 92;default:return t}}!function(t){t[t.Null=0]="Null",t[t.Backspace=8]="Backspace",t[t.Tab=9]="Tab",t[t.LineFeed=10]="LineFeed",t[t.VerticalTab=11]="VerticalTab",t[t.FormFeed=12]="FormFeed",t[t.CarriageReturn=13]="CarriageReturn",t[t.Space=32]="Space",t[t.Exclamation=33]="Exclamation",t[t.DoubleQuote=34]="DoubleQuote",t[t.Dollar=36]="Dollar",t[t.Percent=37]="Percent",t[t.Ampersand=38]="Ampersand",t[t.SingleQuote=39]="SingleQuote",t[t.OpenParen=40]="OpenParen",t[t.CloseParen=41]="CloseParen",t[t.Asterisk=42]="Asterisk",t[t.Plus=43]="Plus",t[t.Comma=44]="Comma",t[t.Minus=45]="Minus",t[t.Dot=46]="Dot",t[t.Slash=47]="Slash",t[t.Semicolon=59]="Semicolon",t[t.Backtick=96]="Backtick",t[t.OpenBracket=91]="OpenBracket",t[t.Backslash=92]="Backslash",t[t.CloseBracket=93]="CloseBracket",t[t.Caret=94]="Caret",t[t.Underscore=95]="Underscore",t[t.OpenBrace=123]="OpenBrace",t[t.Bar=124]="Bar",t[t.CloseBrace=125]="CloseBrace",t[t.Colon=58]="Colon",t[t.LessThan=60]="LessThan",t[t.Equals=61]="Equals",t[t.GreaterThan=62]="GreaterThan",t[t.Question=63]="Question",t[t.Zero=48]="Zero",t[t.One=49]="One",t[t.Two=50]="Two",t[t.Three=51]="Three",t[t.Four=52]="Four",t[t.Five=53]="Five",t[t.Six=54]="Six",t[t.Seven=55]="Seven",t[t.Eight=56]="Eight",t[t.Nine=57]="Nine",t[t.UpperA=65]="UpperA",t[t.UpperB=66]="UpperB",t[t.UpperC=67]="UpperC",t[t.UpperD=68]="UpperD",t[t.UpperE=69]="UpperE",t[t.UpperF=70]="UpperF",t[t.UpperG=71]="UpperG",t[t.UpperH=72]="UpperH",t[t.UpperI=73]="UpperI",t[t.UpperJ=74]="UpperJ",t[t.UpperK=75]="UpperK",t[t.UpperL=76]="UpperL",t[t.UpperM=77]="UpperM",t[t.UpperN=78]="UpperN",t[t.UpperO=79]="UpperO",t[t.UpperP=80]="UpperP",t[t.UpperQ=81]="UpperQ",t[t.UpperR=82]="UpperR",t[t.UpperS=83]="UpperS",t[t.UpperT=84]="UpperT",t[t.UpperU=85]="UpperU",t[t.UpperV=86]="UpperV",t[t.UpperW=87]="UpperW",t[t.UpperX=88]="UpperX",t[t.UpperY=89]="UpperY",t[t.UpperZ=90]="UpperZ",t[t.LowerA=97]="LowerA",t[t.LowerB=98]="LowerB",t[t.LowerC=99]="LowerC",t[t.LowerD=100]="LowerD",t[t.LowerE=101]="LowerE",t[t.LowerF=102]="LowerF",t[t.LowerG=103]="LowerG",t[t.LowerH=104]="LowerH",t[t.LowerI=105]="LowerI",t[t.LowerJ=106]="LowerJ",t[t.LowerK=107]="LowerK",t[t.LowerL=108]="LowerL",t[t.LowerM=109]="LowerM",t[t.LowerN=110]="LowerN",t[t.LowerO=111]="LowerO",t[t.LowerP=112]="LowerP",t[t.LowerQ=113]="LowerQ",t[t.LowerR=114]="LowerR",t[t.LowerS=115]="LowerS",t[t.LowerT=116]="LowerT",t[t.LowerU=117]="LowerU",t[t.LowerV=118]="LowerV",t[t.LowerW=119]="LowerW",t[t.LowerX=120]="LowerX",t[t.LowerY=121]="LowerY",t[t.LowerZ=122]="LowerZ"}(nr||(nr={})),function(t){t[t.Reset=0]="Reset",t[t.Ancestor=511]="Ancestor",t[t.This=512]="This",t[t.Scope=1024]="Scope",t[t.Member=2048]="Member",t[t.Keyed=4096]="Keyed"}(ir||(ir={})),function(t){t[t.Variadic=61]="Variadic",t[t.Assign=62]="Assign",t[t.Conditional=63]="Conditional",t[t.LogicalOR=64]="LogicalOR",t[t.LogicalAND=128]="LogicalAND",t[t.Equality=192]="Equality",t[t.Relational=256]="Relational",t[t.Additive=320]="Additive",t[t.Multiplicative=384]="Multiplicative",t[t.Binary=448]="Binary",t[t.LeftHandSide=449]="LeftHandSide",t[t.Primary=450]="Primary",t[t.Unary=451]="Unary"}(rr||(rr={})),function(t){t[t.EOF=1572864]="EOF",t[t.ExpressionTerminal=1048576]="ExpressionTerminal",t[t.AccessScopeTerminal=524288]="AccessScopeTerminal",t[t.ClosingToken=262144]="ClosingToken",t[t.OpeningToken=131072]="OpeningToken",t[t.BinaryOp=65536]="BinaryOp",t[t.UnaryOp=32768]="UnaryOp",t[t.LeftHandSide=16384]="LeftHandSide",t[t.StringOrNumericLiteral=12288]="StringOrNumericLiteral",t[t.NumericLiteral=8192]="NumericLiteral",t[t.StringLiteral=4096]="StringLiteral",t[t.IdentifierName=3072]="IdentifierName",t[t.Keyword=2048]="Keyword",t[t.Identifier=1024]="Identifier",t[t.Contextual=512]="Contextual",t[t.Precedence=448]="Precedence",t[t.Type=63]="Type",t[t.FalseKeyword=2048]="FalseKeyword",t[t.TrueKeyword=2049]="TrueKeyword",t[t.NullKeyword=2050]="NullKeyword",t[t.UndefinedKeyword=2051]="UndefinedKeyword",t[t.ThisScope=3076]="ThisScope",t[t.HostScope=3077]="HostScope",t[t.ParentScope=3078]="ParentScope",t[t.OpenParen=671751]="OpenParen",t[t.OpenBrace=131080]="OpenBrace",t[t.Dot=16393]="Dot",t[t.CloseBrace=1835018]="CloseBrace",t[t.CloseParen=1835019]="CloseParen",t[t.Comma=1572876]="Comma",t[t.OpenBracket=671757]="OpenBracket",t[t.CloseBracket=1835022]="CloseBracket",t[t.Colon=1572879]="Colon",t[t.Question=1572880]="Question",t[t.Ampersand=1572883]="Ampersand",t[t.Bar=1572884]="Bar",t[t.BarBar=1638549]="BarBar",t[t.AmpersandAmpersand=1638614]="AmpersandAmpersand",t[t.EqualsEquals=1638679]="EqualsEquals",t[t.ExclamationEquals=1638680]="ExclamationEquals",t[t.EqualsEqualsEquals=1638681]="EqualsEqualsEquals",t[t.ExclamationEqualsEquals=1638682]="ExclamationEqualsEquals",t[t.LessThan=1638747]="LessThan",t[t.GreaterThan=1638748]="GreaterThan",t[t.LessThanEquals=1638749]="LessThanEquals",t[t.GreaterThanEquals=1638750]="GreaterThanEquals",t[t.InKeyword=1640799]="InKeyword",t[t.InstanceOfKeyword=1640800]="InstanceOfKeyword",t[t.Plus=623009]="Plus",t[t.Minus=623010]="Minus",t[t.TypeofKeyword=34851]="TypeofKeyword",t[t.VoidKeyword=34852]="VoidKeyword",t[t.Asterisk=1638885]="Asterisk",t[t.Percent=1638886]="Percent",t[t.Slash=1638887]="Slash",t[t.Equals=1048616]="Equals",t[t.Exclamation=32809]="Exclamation",t[t.TemplateTail=540714]="TemplateTail",t[t.TemplateContinuation=540715]="TemplateContinuation",t[t.OfKeyword=1051180]="OfKeyword"}(sr||(sr={}));const ar=We.$false,cr=We.$true,lr=We.$null,hr=We.$undefined,ur=Le.$this,dr=Le.$host,pr=Le.$parent;var fr;!function(t){t[t.None=0]="None",t[t.IgnoreCustomAttr=4096]="IgnoreCustomAttr",t[t.Interpolation=2048]="Interpolation",t[t.IsRef=5376]="IsRef",t[t.IsIterator=512]="IsIterator",t[t.IsCustom=256]="IsCustom",t[t.IsFunction=128]="IsFunction",t[t.IsEvent=64]="IsEvent",t[t.IsProperty=32]="IsProperty",t[t.IsCommand=16]="IsCommand",t[t.IsPropertyCommand=48]="IsPropertyCommand",t[t.IsEventCommand=80]="IsEventCommand",t[t.DelegationStrategyDelta=6]="DelegationStrategyDelta",t[t.Command=15]="Command",t[t.OneTimeCommand=49]="OneTimeCommand",t[t.ToViewCommand=50]="ToViewCommand",t[t.FromViewCommand=51]="FromViewCommand",t[t.TwoWayCommand=52]="TwoWayCommand",t[t.BindCommand=53]="BindCommand",t[t.TriggerCommand=4182]="TriggerCommand",t[t.CaptureCommand=4183]="CaptureCommand",t[t.DelegateCommand=4184]="DelegateCommand",t[t.CallCommand=153]="CallCommand",t[t.OptionsCommand=26]="OptionsCommand",t[t.ForCommand=539]="ForCommand",t[t.CustomCommand=284]="CustomCommand"}(fr||(fr={}));const gr=new class{constructor(t){this.input=t,this.index=0,this.startIndex=0,this.lastIndex=0,this.currentToken=1572864,this.tokenValue="",this.assignable=!0,this.length=t.length,this.currentChar=t.charCodeAt(0)}get tokenRaw(){return this.input.slice(this.startIndex,this.index)}}("");var vr,br;function mr(t,e,n,r){if(284===r)return new Ve(t.input);if(0===t.index){if(2048&r)return function(t){const e=[],n=[],i=t.length;let r="";for(;t.index<i;){switch(t.currentChar){case 36:if(123===t.input.charCodeAt(t.index+1)){e.push(r),r="",t.index+=2,t.currentChar=t.input.charCodeAt(t.index),wr(t);const i=mr(t,0,61,2048);n.push(i);continue}r+="$";break;case 92:r+=String.fromCharCode(or(Cr(t)));break;default:r+=String.fromCharCode(t.currentChar)}Cr(t)}if(n.length)return e.push(r),new sn(e,n);return null}(t);if(wr(t),1048576&t.currentToken)throw i.j.error(100,{state:t})}t.assignable=448>n;let s=void 0;if(32768&t.currentToken){const n=xr[63&t.currentToken];wr(t),s=new Ke(n,mr(t,e,449,r)),t.assignable=!1}else{t:switch(t.currentToken){case 3078:t.assignable=!1;do{if(wr(t),e++,!jr(t,16393)){if(524288&t.currentToken){const t=511&e;s=0===t?ur:1===t?pr:new Le(t),e=512;break t}throw i.j.error(103,{state:t})}if(16393===t.currentToken)throw i.j.error(102,{state:t});if(1572864===t.currentToken)throw i.j.error(105,{state:t})}while(3078===t.currentToken);case 1024:512&r?s=new en(t.tokenValue):(s=new Me(t.tokenValue,511&e),e=1024),t.assignable=!0,wr(t);break;case 3076:t.assignable=!1,wr(t),s=ur,e=512;break;case 3077:t.assignable=!1,wr(t),s=dr,e=512;break;case 671751:wr(t),s=mr(t,0,62,r),Tr(t,1835019),e=0;break;case 671757:s=function(t,e,n){wr(t);const i=new Array;for(;1835022!==t.currentToken;)if(jr(t,1572876)){if(i.push(hr),1835022===t.currentToken)break}else{if(i.push(mr(t,e,62,-513&n)),!jr(t,1572876))break;if(1835022===t.currentToken)break}return Tr(t,1835022),512&n?new Xe(i):(t.assignable=!1,new Je(i))}(t,e,r),e=0;break;case 131080:s=function(t,e){const n=new Array,r=new Array;wr(t);for(;1835018!==t.currentToken;){if(n.push(t.tokenValue),12288&t.currentToken)wr(t),Tr(t,1572879),r.push(mr(t,0,62,-513&e));else{if(!(3072&t.currentToken))throw i.j.error(107,{state:t});{const{currentChar:n,currentToken:i,index:s}=t;wr(t),jr(t,1572879)?r.push(mr(t,0,62,-513&e)):(t.currentChar=n,t.currentToken=i,t.index=s,r.push(mr(t,0,450,-513&e)))}}1835018!==t.currentToken&&Tr(t,1572876)}return Tr(t,1835018),512&e?new tn(n,r):(t.assignable=!1,new Ge(n,r))}(t,r),e=0;break;case 540714:s=new Ye([t.tokenValue]),t.assignable=!1,wr(t),e=0;break;case 540715:s=yr(t,e,r,s,!1),e=0;break;case 4096:case 8192:s=new We(t.tokenValue),t.assignable=!1,wr(t),e=0;break;case 2050:case 2051:case 2049:case 2048:s=xr[63&t.currentToken],t.assignable=!1,wr(t),e=0;break;default:throw t.index>=t.length?i.j.error(104,{state:t}):i.j.error(101,{state:t})}if(512&r)return function(t,e){if(0==(65536&e.$kind))throw i.j.error(106,{state:t});if(1051180!==t.currentToken)throw i.j.error(106,{state:t});wr(t);const n=e,r=mr(t,0,61,0);return new rn(n,r)}(t,s);if(449<n)return s;let o=t.tokenValue;for(;(16384&t.currentToken)>0;){const n=[];let a;switch(t.currentToken){case 16393:if(t.assignable=!0,wr(t),0==(3072&t.currentToken))throw i.j.error(105,{state:t});if(o=t.tokenValue,wr(t),e=(1536&e)<<1|2048&e|(4096&e)>>1,671751===t.currentToken){0===e&&(e=2048);continue}s=1024&e?new Me(o,s.ancestor,s===dr):new De(s,o);continue;case 671757:t.assignable=!0,wr(t),e=4096,s=new Ue(s,mr(t,0,62,r)),Tr(t,1835022);break;case 671751:for(t.assignable=!1,wr(t);1835019!==t.currentToken&&(n.push(mr(t,0,62,r)),jr(t,1572876)););Tr(t,1835019),s=1024&e?new qe(o,n,s.ancestor,s===dr):2048&e?new _e(s,o,n):new He(s,n),e=0;break;case 540714:t.assignable=!1,a=[t.tokenValue],s=new Ze(a,a,s),wr(t);break;case 540715:s=yr(t,e,r,s,!0)}}}if(448<n)return s;for(;(65536&t.currentToken)>0;){const i=t.currentToken;if((448&i)<=n)break;wr(t),s=new ze(xr[63&i],s,mr(t,e,448&i,r)),t.assignable=!1}if(63<n)return s;if(jr(t,1572880)){const n=mr(t,e,62,r);Tr(t,1572879),s=new Be(s,n,mr(t,e,62,r)),t.assignable=!1}if(62<n)return s;if(jr(t,1048616)){if(!t.assignable)throw i.j.error(150,{state:t});s=new Fe(s,mr(t,e,62,r))}if(61<n)return s;for(;jr(t,1572884);){if(1572864===t.currentToken)throw i.j.error(112);const n=t.tokenValue;wr(t);const o=new Array;for(;jr(t,1572879);)o.push(mr(t,e,62,r));s=new Ne(s,n,o)}for(;jr(t,1572883);){if(1572864===t.currentToken)throw i.j.error(113);const n=t.tokenValue;wr(t);const o=new Array;for(;jr(t,1572879);)o.push(mr(t,e,62,r));s=new $e(s,n,o)}if(1572864!==t.currentToken){if(2048&r)return s;if("of"===t.tokenRaw)throw i.j.error(151,{state:t});throw i.j.error(101,{state:t})}return s}function yr(t,e,n,i,r){const s=[t.tokenValue];Tr(t,540715);const o=[mr(t,e,62,n)];for(;540714!==(t.currentToken=Or(t));)s.push(t.tokenValue),Tr(t,540715),o.push(mr(t,e,62,n));return s.push(t.tokenValue),t.assignable=!1,r?(wr(t),new Ze(s,s,i,o)):(wr(t),new Ye(s,o))}function wr(t){for(;t.index<t.length;)if(t.startIndex=t.index,null!=(t.currentToken=Br[t.currentChar](t)))return;t.currentToken=1572864}function Cr(t){return t.currentChar=t.input.charCodeAt(++t.index)}function Sr(t,e){let n=t.currentChar;if(!1===e){do{n=Cr(t)}while(n<=57&&n>=48);if(46!==n)return t.tokenValue=parseInt(t.tokenRaw,10),8192;if(n=Cr(t),t.index>=t.length)return t.tokenValue=parseInt(t.tokenRaw.slice(0,-1),10),8192}if(n<=57&&n>=48)do{n=Cr(t)}while(n<=57&&n>=48);else t.currentChar=t.input.charCodeAt(--t.index);return t.tokenValue=parseFloat(t.tokenRaw),8192}function kr(t){let e=!0,n="";for(;96!==Cr(t);)if(36===t.currentChar){if(t.index+1<t.length&&123===t.input.charCodeAt(t.index+1)){t.index++,e=!1;break}n+="$"}else if(92===t.currentChar)n+=String.fromCharCode(or(Cr(t)));else{if(t.index>=t.length)throw i.j.error(109,{state:t});n+=String.fromCharCode(t.currentChar)}return Cr(t),t.tokenValue=n,e?540714:540715}function Or(t){if(t.index>=t.length)throw i.j.error(109,{state:t});return t.index--,kr(t)}function jr(t,e){return t.currentToken===e&&(wr(t),!0)}function Tr(t,e){if(t.currentToken!==e)throw i.j.error(110,{state:t,expected:e});wr(t)}!function(t){t[t.InvalidExpressionStart=100]="InvalidExpressionStart",t[t.UnconsumedToken=101]="UnconsumedToken",t[t.DoubleDot=102]="DoubleDot",t[t.InvalidMemberExpression=103]="InvalidMemberExpression",t[t.UnexpectedEndOfExpression=104]="UnexpectedEndOfExpression",t[t.ExpectedIdentifier=105]="ExpectedIdentifier",t[t.InvalidForDeclaration=106]="InvalidForDeclaration",t[t.InvalidObjectLiteralPropertyDefinition=107]="InvalidObjectLiteralPropertyDefinition",t[t.UnterminatedQuote=108]="UnterminatedQuote",t[t.UnterminatedTemplate=109]="UnterminatedTemplate",t[t.MissingExpectedToken=110]="MissingExpectedToken",t[t.UnexpectedCharacter=111]="UnexpectedCharacter",t[t.MissingValueConverter=112]="MissingValueConverter",t[t.MissingBindingBehavior=113]="MissingBindingBehavior"}(vr||(vr={})),function(t){t[t.NotAssignable=150]="NotAssignable",t[t.UnexpectedForOf=151]="UnexpectedForOf"}(br||(br={}));const xr=[ar,cr,lr,hr,"$this","$host","$parent","(","{",".","}",")",",","[","]",":","?","'",'"',"&","|","||","&&","==","!=","===","!==","<",">","<=",">=","in","instanceof","+","-","typeof","void","*","%","/","=","!",540714,540715,"of"],Ar=Object.create(null);Ar.true=2049,Ar.null=2050,Ar.false=2048,Ar.undefined=2051,Ar.$this=3076,Ar.$host=3077,Ar.$parent=3078,Ar.in=1640799,Ar.instanceof=1640800,Ar.typeof=34851,Ar.void=34852,Ar.of=1051180;const Rr=[36,0,48,58,65,91,95,0,97,123],Pr=[36,0,65,91,95,0,97,123,170,0,186,0,192,215,216,247,248,697,736,741,7424,7462,7468,7517,7522,7526,7531,7544,7545,7615,7680,7936,8305,0,8319,0,8336,8349,8490,8492,8498,0,8526,0,8544,8585,11360,11392,42786,42888,42891,42927,42928,42936,42999,43008,43824,43867,43868,43877,64256,64263,65313,65339,65345,65371],Ir=[48,58],Er=[0,33,127,161];function Vr(t,e,n,i){const r=n.length;for(let s=0;s<r;s+=2){const r=n[s];let o=n[s+1];if(o=o>0?o:r+1,t&&t.fill(i,r,o),e)for(let t=r;t<o;t++)e.add(t)}}function $r(t){return e=>(Cr(e),t)}const Nr=t=>{throw i.j.error(111,{state:t})};Nr.notMapped=!0;Vr(null,new Set,Rr,!0);const Fr=new Uint8Array(65535);Vr(Fr,null,Pr,1),Vr(Fr,null,Ir,1);const Br=new Array(65535);Br.fill(Nr,0,65535),Vr(Br,null,Er,t=>(Cr(t),null)),Vr(Br,null,Pr,(function(t){for(;Fr[Cr(t)];);const e=Ar[t.tokenValue=t.tokenRaw];return void 0===e?1024:e})),Vr(Br,null,Ir,t=>Sr(t,!1)),Br[34]=Br[39]=t=>function(t){const e=t.currentChar;Cr(t);let n=0;const r=new Array;let s=t.index;for(;t.currentChar!==e;)if(92===t.currentChar)r.push(t.input.slice(s,t.index)),Cr(t),n=or(t.currentChar),Cr(t),r.push(String.fromCharCode(n)),s=t.index;else{if(t.index>=t.length)throw i.j.error(108,{state:t});Cr(t)}const o=t.input.slice(s,t.index);Cr(t),r.push(o);const a=r.join("");return t.tokenValue=a,4096}(t),Br[96]=t=>kr(t),Br[33]=t=>61!==Cr(t)?32809:61!==Cr(t)?1638680:(Cr(t),1638682),Br[61]=t=>61!==Cr(t)?1048616:61!==Cr(t)?1638679:(Cr(t),1638681),Br[38]=t=>38!==Cr(t)?1572883:(Cr(t),1638614),Br[124]=t=>124!==Cr(t)?1572884:(Cr(t),1638549),Br[46]=t=>Cr(t)<=57&&t.currentChar>=48?Sr(t,!0):16393,Br[60]=t=>61!==Cr(t)?1638747:(Cr(t),1638749),Br[62]=t=>61!==Cr(t)?1638748:(Cr(t),1638750),Br[37]=$r(1638886),Br[40]=$r(671751),Br[41]=$r(1835019),Br[42]=$r(1638885),Br[43]=$r(623009),Br[44]=$r(1572876),Br[45]=$r(623010),Br[47]=$r(1638887),Br[58]=$r(1572879),Br[63]=$r(1572880),Br[91]=$r(671757),Br[93]=$r(1835022),Br[123]=$r(131080),Br[125]=$r(1835018);var Lr=function(t,e,n,i){var r,s=arguments.length,o=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(o=(s<3?r(o):s>3?r(e,n,o):r(e,n))||o);return s>3&&o&&Object.defineProperty(e,n,o),o},Mr=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};const{toView:Dr,oneTime:Ur}=$,qr={reusable:!1,preempt:!0};class _r{constructor(t,e,n,i,r,s){this.observerLocator=t,this.interpolation=e,this.target=n,this.targetProperty=i,this.mode=r,this.locator=s,this.interceptor=this,this.isBound=!1,this.$scope=void 0;const o=e.expressions,a=this.parts=Array(o.length);for(let c=0,l=o.length;c<l;++c)a[c]=new Hr(o[c],e,n,i,r,t,s,0===c)}$bind(t,e,n){if(this.isBound){if(this.$scope===e)return;this.interceptor.$unbind(t)}this.isBound=!0,this.$scope=e;const i=this.parts;for(let r=0,s=i.length;r<s;++r)i[r].interceptor.$bind(t,e,n)}$unbind(t){if(!this.isBound)return;this.isBound=!1,this.$scope=void 0;const e=this.parts;for(let n=0,i=e.length;n<i;++n)e[n].interceptor.$unbind(t)}dispose(){this.interceptor=void 0,this.interpolation=void 0,this.locator=void 0,this.target=void 0}}let Hr=(()=>{let t=class{constructor(t,e,n,i,r,s,o,a){this.sourceExpression=t,this.interpolation=e,this.target=n,this.targetProperty=i,this.mode=r,this.observerLocator=s,this.locator=o,this.isFirst=a,this.interceptor=this,this.$hostScope=null,this.task=null,this.isBound=!1,me.assignIdTo(this),this.$scheduler=o.get(pn.a),this.targetObserver=s.getAccessor(0,n,i)}updateTarget(t,e){this.targetObserver.setValue(t,8|e)}handleChange(t,e,n){var i,r;if(!this.isBound)return;const s=this.targetObserver,o=0==(32&n)&&(64&s.type)>0,a=this.interpolation.evaluate(n,this.$scope,this.$hostScope,this.locator),c=s.getValue(),l=this.interceptor;a!==c&&(o&&(n|=4096,null===(i=this.task)||void 0===i||i.cancel(),null===(r=s.task)||void 0===r||r.cancel(),s.task=this.task=this.$scheduler.queueRenderTask(()=>{var t,e;null===(e=(t=s).flushChanges)||void 0===e||e.call(t,n),this.task=s.task=null},qr)),l.updateTarget(a,n)),0==(this.mode&Ur)&&(this.version++,this.sourceExpression.connect(n,this.$scope,this.$hostScope,l),l.unobserve(!1))}$bind(t,e,n){if(this.isBound){if(this.$scope===e)return;this.interceptor.$unbind(t)}this.isBound=!0,this.$scope=e,this.$hostScope=n;const i=this.sourceExpression;i.hasBind&&i.bind(t,e,n,this.interceptor);const r=this.targetObserver,s=this.mode;s!==$.oneTime&&r.bind&&r.bind(t),this.isFirst&&this.interceptor.updateTarget(this.interpolation.evaluate(t,e,n,this.locator),t),(s&Dr)>0&&i.connect(t,e,n,this.interceptor)}$unbind(t){if(!this.isBound)return;this.isBound=!1;const e=this.sourceExpression;e.hasUnbind&&e.unbind(t,this.$scope,this.$hostScope,this.interceptor);const n=this.targetObserver,i=this.task;n.unbind&&n.unbind(t),null!=i&&(i.cancel(),i===n.task&&(n.task=null),this.task=null),this.$scope=void 0,this.interceptor.unobserve(!0)}dispose(){this.interceptor=void 0,this.sourceExpression=void 0,this.locator=void 0,this.targetObserver=void 0}};return t=Lr([me(),Mr("design:paramtypes",[Object,sn,Object,String,Number,Object,Object,Boolean])],t),t})();var zr=function(t,e,n,i){var r,s=arguments.length,o=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(o=(s<3?r(o):s>3?r(e,n,o):r(e,n))||o);return s>3&&o&&Object.defineProperty(e,n,o),o},Kr=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};let Wr=(()=>{let t=class{constructor(t,e,n,i,r=!1){this.sourceExpression=t,this.targetProperty=e,this.observerLocator=n,this.locator=i,this.toBindingContext=r,this.interceptor=this,this.isBound=!1,this.$scope=void 0,this.$hostScope=null,this.task=null,this.target=null,me.assignIdTo(this),this.$lifecycle=i.get(Jt)}handleChange(t,e,n){if(this.isBound){if(!(8&n))throw new Error("Unexpected handleChange context in LetBinding");{const t=this.target,e=this.targetProperty,i=t[e],r=this.sourceExpression.evaluate(n,this.$scope,this.$hostScope,this.locator);r!==i&&(t[e]=r)}}}$bind(t,e,n){if(this.isBound){if(this.$scope===e)return;this.interceptor.$unbind(32|t)}this.$scope=e,this.$hostScope=n,this.target=this.toBindingContext?(null!=n?n:e).bindingContext:(null!=n?n:e).overrideContext;const i=this.sourceExpression;i.hasBind&&i.bind(t,e,n,this.interceptor),this.target[this.targetProperty]=this.sourceExpression.evaluate(32|t,e,n,this.locator),this.sourceExpression.connect(t,e,n,this.interceptor),this.isBound=!0}$unbind(t){if(!this.isBound)return;const e=this.sourceExpression;e.hasUnbind&&e.unbind(t,this.$scope,this.$hostScope,this.interceptor),this.$scope=void 0,this.interceptor.unobserve(!0),this.isBound=!1}dispose(){this.interceptor=void 0,this.sourceExpression=void 0,this.locator=void 0,this.target=void 0}};return t=zr([me(),Kr("design:paramtypes",[Object,String,Object,Object,Boolean])],t),t})();class Qr{constructor(t,e,n){this.sourceExpression=t,this.target=e,this.locator=n,this.interceptor=this,this.isBound=!1,this.$scope=void 0,this.$hostScope=null}$bind(t,e,n){if(this.isBound){if(this.$scope===e)return;this.interceptor.$unbind(32|t)}this.$scope=e,this.$hostScope=n,this.sourceExpression.hasBind&&this.sourceExpression.bind(t,e,n,this),this.sourceExpression.assign(16|t,this.$scope,n,this.locator,this.target),this.isBound=!0}$unbind(t){if(!this.isBound)return;let e=this.sourceExpression;e.evaluate(t,this.$scope,this.$hostScope,this.locator)===this.target&&e.assign(t,this.$scope,this.$hostScope,this.locator,null),e=this.sourceExpression,e.hasUnbind&&e.unbind(t,this.$scope,this.$hostScope,this.interceptor),this.$scope=void 0,this.isBound=!1}observeProperty(t,e,n){}handleChange(t,e,n){}dispose(){this.interceptor=void 0,this.sourceExpression=void 0,this.locator=void 0,this.target=void 0}}var Jr=function(t,e,n,i){var r,s=arguments.length,o=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(o=(s<3?r(o):s>3?r(e,n,o):r(e,n))||o);return s>3&&o&&Object.defineProperty(e,n,o),o},Gr=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};let Yr=(()=>{let t=class{constructor(t,e,n,r,s,o){this.lifecycle=t,this.obj=n,this.propertyKey=r,this.$set=o,this.currentValue=void 0,this.oldValue=void 0,this.inBatch=!1,this.type=4;let a=!1;Mt.isProxy(n)&&(a=!0,n.$observer.subscribe(this,r),this.obj=n.$raw),this.callback=this.obj[s];const c=this.propertyChangedCallback=this.obj.propertyChanged,l=this.hasPropertyChangedCallback="function"==typeof c,h=this.shouldInterceptSet=o!==i.g.noop;if(void 0!==this.callback||l||h){this.observing=!0;const t=n[r];this.currentValue=h&&void 0!==t?o(t):t,a||this.createGetterSetter()}else this.observing=!1;this.persistentFlags=31751&e}handleChange(t,e,n){this.setValue(t,n)}getValue(){return this.currentValue}setValue(t,e){if(this.shouldInterceptSet&&(t=this.$set(t)),this.observing){const n=this.currentValue;if(Object.is(t,n))return;if(this.currentValue=t,0===this.lifecycle.batch.depth){if(this.callSubscribers(t,n,this.persistentFlags|e),0==(32&e)||(16&e)>0){const i=this.callback;void 0!==i&&i.call(this.obj,t,n,this.persistentFlags|e),this.hasPropertyChangedCallback&&this.propertyChangedCallback.call(this.obj,this.propertyKey,t,n,this.persistentFlags|e)}}else this.inBatch||(this.inBatch=!0,this.oldValue=n,this.lifecycle.batch.add(this))}else this.obj[this.propertyKey]=t}subscribe(t){if(!1===this.observing){this.observing=!0;const t=this.obj[this.propertyKey];this.currentValue=this.shouldInterceptSet?this.$set(t):t,this.createGetterSetter()}this.addSubscriber(t)}createGetterSetter(){Reflect.defineProperty(this.obj,this.propertyKey,{enumerable:!0,configurable:!0,get:()=>this.currentValue,set:t=>{this.setValue(t,0)}})||i.j.write(1,this.propertyKey,this.obj)}};return t=Jr([bt(),Gr("design:paramtypes",[Object,Number,Object,String,String,Function])],t),t})();var Zr=function(t,e,n,i){var r,s=arguments.length,o=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(o=(s<3?r(o):s>3?r(e,n,o):r(e,n))||o);return s>3&&o&&Object.defineProperty(e,n,o),o},Xr=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};class ts{constructor(t){this.mode=t,this.originalModes=new WeakMap}bind(t,e,n){this.originalModes.set(n,n.mode),n.mode=this.mode}unbind(t,e,n){n.mode=this.originalModes.get(n)}}let es=(()=>{let t=class extends ts{constructor(){super($.oneTime)}};return t=Zr([ke("oneTime"),Xr("design:paramtypes",[])],t),t})(),ns=(()=>{let t=class extends ts{constructor(){super($.toView)}};return t=Zr([ke("toView"),Xr("design:paramtypes",[])],t),t})(),is=(()=>{let t=class extends ts{constructor(){super($.fromView)}};return t=Zr([ke("fromView"),Xr("design:paramtypes",[])],t),t})(),rs=(()=>{let t=class extends ts{constructor(){super($.twoWay)}};return t=Zr([ke("twoWay"),Xr("design:paramtypes",[])],t),t})();var ss=function(t,e,n,i){var r,s=arguments.length,o=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(o=(s<3?r(o):s>3?r(e,n,o):r(e,n))||o);return s>3&&o&&Object.defineProperty(e,n,o),o},os=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};let as=(()=>{let t=class extends Te{constructor(t,e){super(t,e),this.opts={delay:0},this.firstArg=null,this.task=null,this.taskQueue=t.locator.get(pn.a).getPostRenderTaskQueue(),e.args.length>0&&(this.firstArg=e.args[0])}callSource(t){this.queueTask(()=>this.binding.callSource(t))}handleChange(t,e,n){this.queueTask(()=>this.binding.handleChange(t,e,n))}queueTask(t){null!==this.task&&this.task.cancel(),this.task=this.taskQueue.queueTask(t,this.opts)}$bind(t,e,n){if(null!==this.firstArg){const i=Number(this.firstArg.evaluate(t,e,n,this.locator));isNaN(i)||(this.opts.delay=i)}this.binding.$bind(t,e,n)}};return t=ss([ke("debounce"),os("design:paramtypes",[Object,$e])],t),t})();var cs=function(t,e,n,i){var r,s=arguments.length,o=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(o=(s<3?r(o):s>3?r(e,n,o):r(e,n))||o);return s>3&&o&&Object.defineProperty(e,n,o),o},ls=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},hs=function(t,e){return function(n,i){e(n,i,t)}};let us=(()=>{let t=class{constructor(t){this.signaler=t}bind(t,e,n,...r){if(!n.updateTarget)throw i.j.error(11);if(4===arguments.length){const t=r[0];this.signaler.addSignalListener(t,n),n.signal=t}else{if(!(arguments.length>4))throw i.j.error(12);{const t=Array.prototype.slice.call(r.length+3,3);let e=t.length;for(;e--;){const i=t[e];this.signaler.addSignalListener(i,n)}n.signal=t}}}unbind(t,e,n){const i=n.signal;if(n.signal=null,Array.isArray(i)){const t=i;let e=t.length;for(;e--;)this.signaler.removeSignalListener(t[e],n)}else this.signaler.removeSignalListener(i,n)}};return t=cs([ke("signal"),hs(0,ce),ls("design:paramtypes",[Object])],t),t})();var ds=function(t,e,n,i){var r,s=arguments.length,o=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(o=(s<3?r(o):s>3?r(e,n,o):r(e,n))||o);return s>3&&o&&Object.defineProperty(e,n,o),o},ps=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};let fs=(()=>{let t=class extends Te{constructor(t,e){super(t,e),this.opts={delay:0},this.firstArg=null,this.task=null,this.lastCall=0,this.taskQueue=t.locator.get(pn.a).getPostRenderTaskQueue(),this.now=t.locator.get(pn.b),e.args.length>0&&(this.firstArg=e.args[0])}callSource(t){this.queueTask(()=>this.binding.callSource(t))}handleChange(t,e,n){this.queueTask(()=>this.binding.handleChange(t,e,n))}queueTask(t){const e=this.opts,n=this.now,i=this.lastCall+e.delay-n();i>0?(null!==this.task&&this.task.cancel(),e.delay=i,this.task=this.taskQueue.queueTask(()=>{this.lastCall=n(),t()},e)):(this.lastCall=n(),t())}$bind(t,e,n){if(null!==this.firstArg){const i=Number(this.firstArg.evaluate(t,e,n,this.locator));isNaN(i)||(this.opts.delay=i)}this.binding.$bind(t,e,n)}};return t=ds([ke("throttle"),ps("design:paramtypes",[Object,$e])],t),t})();function gs(t,e){let n;function r(t,e){arguments.length>1&&(n.property=e),i.f.define(bs.name,ms.create(e,n),t.constructor,e),i.h.annotation.appendTo(t.constructor,bs.keyFrom(e))}return arguments.length>1?(n={},void r(t,e)):"string"==typeof t?(n={},r):(n=void 0===t?{}:t,r)}function vs(t){return t.startsWith(bs.name)}const bs={name:i.h.annotation.keyFor("bindable"),keyFrom:t=>`${bs.name}:${t}`,from(...t){const e={},n=Array.isArray;function i(t){e[t]=ms.create(t)}return t.forEach((function(t){n(t)?t.forEach(i):t instanceof ms?e[t.property]=t:void 0!==t&&Object.keys(t).forEach(n=>function(t,n){e[t]=n instanceof ms?n:ms.create(t,n)}(n,t[n]))})),e},for(t){let e;const n={add(r){let s,o;return"string"==typeof r?(s=r,o={property:s}):(s=r.property,o=r),e=ms.create(s,o),i.f.hasOwn(bs.name,t,s)||i.h.annotation.appendTo(t,bs.keyFrom(s)),i.f.define(bs.name,e,t,s),n},mode:t=>(e.mode=t,n),callback:t=>(e.callback=t,n),attribute:t=>(e.attribute=t,n),primary:()=>(e.primary=!0,n),set:t=>(e.set=t,n)};return n},getAll(t){const e=bs.name.length+1,n=[],r=Object(i.t)(t);let s,o,a,c=r.length,l=0;for(;--c>=0;){a=r[c],s=i.h.annotation.getKeys(a).filter(vs),o=s.length;for(let t=0;t<o;++t)n[l++]=i.f.getOwn(bs.name,a,s[t].slice(e))}return n}};class ms{constructor(t,e,n,i,r,s){this.attribute=t,this.callback=e,this.mode=n,this.primary=i,this.property=r,this.set=s}static create(t,e={}){return new ms(Object(i.p)(e.attribute,Object(i.z)(t)),Object(i.p)(e.callback,t+"Changed"),Object(i.p)(e.mode,$.toView),Object(i.p)(e.primary,!1),Object(i.p)(e.property,t),Object(i.p)(e.set,i.g.noop))}}function ys(t){return function(e){return Ss.define(t,e)}}function ws(t){return function(e){return Ss.define("string"==typeof t?{isTemplateController:!0,name:t}:{isTemplateController:!0,...t},e)}}class Cs{constructor(t,e,n,i,r,s,o,a,c,l){this.Type=t,this.name=e,this.aliases=n,this.key=i,this.defaultBindingMode=r,this.isTemplateController=s,this.bindables=o,this.strategy=a,this.hooks=c,this.noMultiBindings=l}static create(t,e){let n,r;return"string"==typeof t?(n=t,r={name:n}):(n=t.name,r=t),new Cs(e,Object(i.p)(Ss.getAnnotation(e,"name"),n),Object(i.A)(Ss.getAnnotation(e,"aliases"),r.aliases,e.aliases),Ss.keyFrom(n),Object(i.p)(Ss.getAnnotation(e,"defaultBindingMode"),r.defaultBindingMode,e.defaultBindingMode,$.toView),Object(i.p)(Ss.getAnnotation(e,"isTemplateController"),r.isTemplateController,e.isTemplateController,!1),bs.from(...bs.getAll(e),Ss.getAnnotation(e,"bindables"),e.bindables,r.bindables),Object(i.p)(Ss.getAnnotation(e,"strategy"),r.strategy,e.strategy,1),Object(i.p)(Ss.getAnnotation(e,"hooks"),r.hooks,e.hooks,new A(e.prototype)),Object(i.p)(Ss.getAnnotation(e,"noMultiBindings"),r.noMultiBindings,e.noMultiBindings,!1))}register(t){const{Type:e,key:n,aliases:r}=this;i.i.transient(n,e).register(t),i.i.aliasTo(n,e).register(t),R(r,Ss,n,t)}}const Ss={name:i.h.resource.keyFor("custom-attribute"),keyFrom:t=>`${Ss.name}:${t}`,isType:t=>"function"==typeof t&&i.f.hasOwn(Ss.name,t),for:(t,e)=>i.f.getOwn(Ss.keyFrom(e),t),define(t,e){const n=Cs.create(t,e);return i.f.define(Ss.name,n,n.Type),i.f.define(Ss.name,n,n),i.h.resource.appendTo(e,Ss.name),n.Type},getDefinition(t){const e=i.f.getOwn(Ss.name,t);if(void 0===e)throw new Error("No definition found for type "+t.name);return e},annotate(t,e,n){i.f.define(i.h.annotation.keyFor(e),n,t)},getAnnotation:(t,e)=>i.f.getOwn(i.h.annotation.keyFor(e),t)},ks=i.a.createInterface("INode").noDefault(),Os=i.a.createInterface("IRenderLocation").noDefault(),js=i.a.createInterface("IDOM").noDefault(),Ts=function(...t){throw i.j.error(1e3)},xs={addEventListener:Ts,appendChild:Ts,cloneNode:Ts,convertToRenderLocation:Ts,createDocumentFragment:Ts,createNodeSequence:Ts,createElement:Ts,createCustomEvent:Ts,dispatchEvent:Ts,createNodeObserver:Ts,createTemplate:Ts,createTextNode:Ts,getEffectiveParentNode:Ts,setEffectiveParentNode:Ts,insertBefore:Ts,isMarker:Ts,isNodeInstance:Ts,isRenderLocation:Ts,makeTarget:Ts,registerElementResolver:Ts,remove:Ts,removeEventListener:Ts,setAttribute:Ts},As={...xs,scheduler:void 0,get isInitialized(){return!0===Reflect.get(this,"$initialized")},initialize(t){if(this.isInitialized)throw i.j.error(1001);const e={},n=[t];let r=Object.getPrototypeOf(t);for(;r&&r!==Object.prototype;)n.unshift(r),r=Object.getPrototypeOf(r);for(r of n)Object.assign(e,Object.getOwnPropertyDescriptors(r));const s=[];let o,a;for(o in e)a=e[o],a.configurable&&a.writable&&(Reflect.defineProperty(this,o,a),s.push(o));Reflect.set(this,"$domKeys",s),Reflect.set(this,"$initialized",!0)},destroy(){if(!this.isInitialized)throw i.j.error(1002);Reflect.get(this,"$domKeys").forEach(t=>{Reflect.deleteProperty(this,t)}),Object.assign(this,xs),Reflect.set(this,"$domKeys",i.g.emptyArray),Reflect.set(this,"$initialized",!1)}};i.g.emptyArray;var Rs=function(t,e,n,i){var r,s=arguments.length,o=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(o=(s<3?r(o):s>3?r(e,n,o):r(e,n))||o);return s>3&&o&&Object.defineProperty(e,n,o),o},Ps=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},Is=function(t,e){return function(n,i){e(n,i,t)}};class Es{constructor(t,e,n){this.factory=t,this.flags=n,this.id=Object(i.B)("au$component"),this.view=this.factory.create(),this.view.setLocation(e,1)}afterAttach(t,e,n){const{$controller:i}=this;return this.view.activate(t,i,n|this.flags,i.scope,i.hostScope)}afterUnbind(t,e,n){return this.view.deactivate(t,this.$controller,n)}onCancel(t,e,n){var i;null===(i=this.view)||void 0===i||i.cancel(t,this.$controller,n)}dispose(){this.view.dispose(),this.view=void 0}accept(t){var e;if(!0===(null===(e=this.view)||void 0===e?void 0:e.accept(t)))return!0}}let Vs=(()=>{let t=class extends Es{constructor(t,e){super(t,e,4096)}};return t=Rs([ws("infrequent-mutations"),Is(0,Qt),Is(1,Os),Ps("design:paramtypes",[Object,Object])],t),t})(),$s=(()=>{let t=class extends Es{constructor(t,e){super(t,e,8192)}};return t=Rs([ws("frequent-mutations"),Is(0,Qt),Is(1,Os),Ps("design:paramtypes",[Object,Object])],t),t})(),Ns=(()=>{let t=class extends Es{constructor(t,e){super(t,e,2048)}};return t=Rs([ws("observe-shallow"),Is(0,Qt),Is(1,Os),Ps("design:paramtypes",[Object,Object])],t),t})();var Fs=function(t,e,n,i){var r,s=arguments.length,o=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(o=(s<3?r(o):s>3?r(e,n,o):r(e,n))||o);return s>3&&o&&Object.defineProperty(e,n,o),o},Bs=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},Ls=function(t,e){return function(n,i){e(n,i,t)}};let Ms=(()=>{let t=class{constructor(t,e){this.ifFactory=t,this.location=e,this.id=Object(i.B)("au$component"),this.elseFactory=void 0,this.elseView=void 0,this.ifView=void 0,this.view=void 0,this.value=!1}afterAttach(t,e,n){const i=this.view=this.updateView(this.value,n);if(void 0!==i){const{$controller:e}=this;return i.activate(t,e,n,e.scope,e.hostScope)}}afterUnbind(t,e,n){if(void 0!==this.view)return this.view.deactivate(t,this.$controller,n)}valueChanged(t,e,n){var r;const{$controller:s}=this;if(!s.isActive)return;const o=Object(i.C)(null===(r=this.view)||void 0===r?void 0:r.deactivate(this.view,s,n),()=>{const t=this.view=this.updateView(this.value,n);if(void 0!==t)return t.activate(t,s,n,s.scope,s.hostScope)});o instanceof Promise&&o.catch(t=>{throw t})}updateView(t,e){return t?this.ifView=this.ensureView(this.ifView,this.ifFactory,e):null!=this.elseFactory?this.elseView=this.ensureView(this.elseView,this.elseFactory,e):void 0}ensureView(t,e,n){return void 0===t&&(t=e.create(n)),t.setLocation(this.location,1),t}onCancel(t,e,n){var i;null===(i=this.view)||void 0===i||i.cancel(t,this.$controller,n)}dispose(){void 0!==this.ifView&&(this.ifView.dispose(),this.ifView=void 0),void 0!==this.elseView&&(this.elseView.dispose(),this.elseView=void 0),this.view=void 0}accept(t){var e;if(!0===(null===(e=this.view)||void 0===e?void 0:e.accept(t)))return!0}};return Fs([gs,Bs("design:type",Boolean)],t.prototype,"value",void 0),t=Fs([ws("if"),Ls(0,Qt),Ls(1,Os),Bs("design:paramtypes",[Object,Object])],t),t})(),Ds=(()=>{let t=class{constructor(t){this.factory=t,this.id=Object(i.B)("au$component")}link(t){if(t instanceof Ms)t.elseFactory=this.factory;else{if(!(t.viewModel instanceof Ms))throw new Error("Unsupported IfBehavior");t.viewModel.elseFactory=this.factory}}};return t=Fs([ws("else"),Ls(0,Qt),Bs("design:paramtypes",[Object])],t),t})();var Us=function(t,e,n,i){var r,s=arguments.length,o=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(o=(s<3?r(o):s>3?r(e,n,o):r(e,n))||o);return s>3&&o&&Object.defineProperty(e,n,o),o},qs=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},_s=function(t,e){return function(n,i){e(n,i,t)}};function Hs(t){t.dispose()}let zs=(()=>{let t=class{constructor(t,e,n){this.location=t,this.renderable=e,this.factory=n,this.id=Object(i.B)("au$component"),this.hasPendingInstanceMutation=!1,this.observer=void 0,this.views=[],this.key=void 0,this.normalizedItems=void 0}beforeBind(t,e,n){this.checkCollectionObserver(n);const i=this.renderable.bindings;let r=void 0;for(let t=0,e=i.length;t<e;++t)if(r=i[t],r.target.id===this.id&&"items"===r.targetProperty){this.forOf=r.sourceExpression;break}this.local=this.forOf.declaration.evaluate(n,this.$controller.scope,null,r.locator)}afterAttach(t,e,n){return this.normalizeToArray(n),this.activateAllViews(t,n)}afterUnbind(t,e,n){return this.checkCollectionObserver(n),this.deactivateAllViews(t,n)}itemsChanged(t){const{$controller:e}=this;if(!e.isActive)return;t|=e.flags,this.checkCollectionObserver(t),t|=8,this.normalizeToArray(t);const n=Object(i.C)(this.deactivateAllViews(null,t),()=>this.activateAllViews(null,t));n instanceof Promise&&n.catch(t=>{throw t})}handleCollectionChange(t,e){const{$controller:n}=this;if(n.isActive)if(e|=n.flags,e|=8,this.normalizeToArray(e),void 0===t){const t=Object(i.C)(this.deactivateAllViews(null,e),()=>this.activateAllViews(null,e));t instanceof Promise&&t.catch(t=>{throw t})}else{const n=this.views.length;if(function(t){let e=0,n=0;const i=t.length;for(let r=0;r<i;++r){for(;t.deletedItems[n]<=r-e;)++n,--e;-2===t[r]?++e:t[r]+=e}}(t),t.deletedItems.length>0){t.deletedItems.sort(i.o);const r=Object(i.C)(this.deactivateAndRemoveViewsByKey(t,e),()=>this.createAndActivateAndSortViewsByKey(n,t,e));r instanceof Promise&&r.catch(t=>{throw t})}else this.createAndActivateAndSortViewsByKey(n,t,e)}}checkCollectionObserver(t){const e=this.observer;if(64&t)void 0!==e&&e.unsubscribeFromCollection(this);else if(this.$controller.isActive){const n=this.observer=Hi(t,this.$controller.lifecycle,this.items);e!==n&&e&&e.unsubscribeFromCollection(this),n&&n.subscribeToCollection(this)}}normalizeToArray(t){const e=this.items;if(e instanceof Array)return void(this.normalizedItems=e);if(void 0===this.forOf)return;const n=[];this.forOf.iterate(t,e,(t,e,i)=>{n[e]=i}),this.normalizedItems=n}activateAllViews(t,e){let n,i,r,s=void 0;const{$controller:o,factory:a,local:c,location:l,items:h}=this,u=o.scope,d=o.hostScope,p=this.forOf.count(e,h),f=this.views=Array(p);if(this.forOf.iterate(e,h,(h,g,v)=>{i=f[g]=a.create(e),i.setLocation(l,1),i.nodes.unlink(),r=oe.fromParent(e,u,re.create(e,c,v)),Js(r.overrideContext,g,p),n=i.activate(null!=t?t:i,o,e,r,d),n instanceof Promise&&(null!=s?s:s=[]).push(n)}),void 0!==s)return 1===s.length?s[0]:Promise.all(s)}deactivateAllViews(t,e){let n,i,r=void 0;const{views:s,$controller:o}=this;for(let a=0,c=s.length;a<c;++a)i=s[a],i.release(),n=i.deactivate(null!=t?t:i,o,e),n instanceof Promise&&(null!=r?r:r=[]).push(n);if(void 0!==r)return 1===r.length?r[0]:Promise.all(r)}deactivateAndRemoveViewsByKey(t,e){let n,i,r=void 0;const{$controller:s,views:o}=this,a=t.deletedItems,c=a.length;let l=0;for(;l<c;++l)i=o[a[l]],i.release(),n=i.deactivate(i,s,e),n instanceof Promise&&(null!=r?r:r=[]).push(n);l=0;let h=0;for(;l<c;++l)h=a[l]-l,o.splice(h,1);if(void 0!==r)return 1===r.length?r[0]:Promise.all(r)}createAndActivateAndSortViewsByKey(t,e,n){var i;let r,s,o,a=void 0;const{$controller:c,factory:l,local:h,normalizedItems:u,location:d,views:p}=this,f=e.length;for(let t=0;t<f;++t)-2===e[t]&&(s=l.create(n),p.splice(t,0,s));if(p.length!==f)throw new Error(`viewsLen=${p.length}, mapLen=${f}`);const g=c.scope,v=c.hostScope,b=e.length;!function(t,e){const n=t.slice(),i=e.length;let r=0,s=0;for(;r<i;)s=e[r],-2!==s&&(t[r]=n[s]),++r}(p,e);const m=function(t){const e=t.length;e>Ks&&(Ks=e,Ws=new Int32Array(e),Qs=new Int32Array(e));let n=0,i=0,r=0,s=0,o=0,a=0,c=0,l=0;for(;s<e;s++)if(i=t[s],-2!==i){if(o=Ws[n],r=t[o],-2!==r&&r<i){Qs[s]=o,Ws[++n]=s;continue}for(a=0,c=n;a<c;)l=a+c>>1,r=t[Ws[l]],-2!==r&&r<i?a=l+1:c=l;r=t[Ws[a]],(i<r||-2===r)&&(a>0&&(Qs[s]=Ws[a-1]),Ws[a]=s)}s=++n;const h=new Int32Array(s);i=Ws[n-1];for(;n-- >0;)h[n]=i,i=Qs[i];for(;s-- >0;)Ws[s]=0;return h}(e),y=m.length;let w,C=y-1,S=b-1;for(;S>=0;--S)s=p[S],w=p[S+1],s.nodes.link(null!==(i=null==w?void 0:w.nodes)&&void 0!==i?i:d),-2===e[S]?(o=oe.fromParent(n,g,re.create(n,h,u[S])),Js(o.overrideContext,S,b),s.setLocation(d,1),r=s.activate(s,c,n,o,v),r instanceof Promise&&(null!=a?a:a=[]).push(r)):C<0||1===y||S!==m[C]?(Js(s.scope.overrideContext,S,b),s.nodes.insertBefore(s.location)):(t!==b&&Js(s.scope.overrideContext,S,b),--C);if(void 0!==a)return 1===a.length?a[0]:Promise.all(a)}onCancel(t,e,n){this.views.forEach(e=>{e.cancel(t,this.$controller,n)})}dispose(){this.views.forEach(Hs),this.views=void 0}accept(t){const{views:e}=this;if(void 0!==e)for(let n=0,i=e.length;n<i;++n)if(!0===e[n].accept(t))return!0}};return Us([gs,qs("design:type",Object)],t.prototype,"items",void 0),t=Us([ws("repeat"),_s(0,Os),_s(1,Kt),_s(2,Qt),qs("design:paramtypes",[Object,Object,Object])],t),t})(),Ks=16,Ws=new Int32Array(Ks),Qs=new Int32Array(Ks);function Js(t,e,n){const i=0===e,r=e===n-1,s=e%2==0;t.$index=e,t.$first=i,t.$last=r,t.$middle=!i&&!r,t.$even=s,t.$odd=!s,t.$length=n}var Gs=function(t,e,n,i){var r,s=arguments.length,o=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(o=(s<3?r(o):s>3?r(e,n,o):r(e,n))||o);return s>3&&o&&Object.defineProperty(e,n,o),o},Ys=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},Zs=function(t,e){return function(n,i){e(n,i,t)}};let Xs=(()=>{let t=class{constructor(t,e){this.factory=t,this.location=e,this.id=Object(i.B)("au$component"),this.id=Object(i.B)("au$component"),this.view=this.factory.create(),this.view.setLocation(e,1)}valueChanged(t,e,n){this.$controller.isActive&&this.activateView(this.view,32)}afterAttach(t,e,n){return this.activateView(t,n)}afterUnbind(t,e,n){return this.view.deactivate(t,this.$controller,n)}activateView(t,e){const{$controller:n,value:i}=this,r=oe.fromParent(e,n.scope,void 0===i?{}:i);return this.view.activate(t,n,e,r,n.hostScope)}onCancel(t,e,n){var i;null===(i=this.view)||void 0===i||i.cancel(t,this.$controller,n)}dispose(){this.view.dispose(),this.view=void 0}accept(t){var e;if(!0===(null===(e=this.view)||void 0===e?void 0:e.accept(t)))return!0}};return Gs([gs,Ys("design:type",Object)],t.prototype,"value",void 0),t=Gs([ws("with"),Zs(0,Qt),Zs(1,Os),Ys("design:paramtypes",[Object,Object])],t),t})();var to=function(t,e,n,i){var r,s=arguments.length,o=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(o=(s<3?r(o):s>3?r(e,n,o):r(e,n))||o);return s>3&&o&&Object.defineProperty(e,n,o),o},eo=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};function no(t){return t.startsWith(io.name)}const io={name:i.h.annotation.keyFor("children-observer"),keyFrom:t=>`${io.name}:${t}`,from(...t){const e={},n=Array.isArray;function i(t){e[t]=ro.create(t)}return t.forEach((function(t){n(t)?t.forEach(i):t instanceof ro?e[t.property]=t:void 0!==t&&Object.keys(t).forEach(n=>function(t,n){e[t]=ro.create(t,n)}(n,t))})),e},getAll(t){const e=io.name.length+1,n=[],r=Object(i.t)(t);let s,o,a,c=r.length,l=0;for(;--c>=0;){a=r[c],s=i.h.annotation.getKeys(a).filter(no),o=s.length;for(let t=0;t<o;++t)n[l++]=i.f.getOwn(io.name,a,s[t].slice(e))}return n}};class ro{constructor(t,e,n,i,r,s){this.callback=t,this.property=e,this.options=n,this.query=i,this.filter=r,this.map=s}static create(t,e={}){return new ro(Object(i.p)(e.callback,t+"Changed"),Object(i.p)(e.property,t),e.options,e.query,e.filter,e.map)}}let so=(()=>{let t=class{constructor(t,e,n,i,r,s=oo,o=ao,a=co,c){this.controller=t,this.obj=e,this.propertyKey=i,this.query=s,this.filter=o,this.map=a,this.options=c,this.observing=!1,this.children=void 0,this.callback=e[r],this.persistentFlags=31751&n,this.createGetterSetter()}getValue(){return this.tryStartObserving(),this.children}setValue(t){}subscribe(t){this.tryStartObserving(),this.addSubscriber(t)}tryStartObserving(){if(!this.observing){this.observing=!0;const t=this.controller.projector;this.children=ho(t,this.query,this.filter,this.map),t.subscribeToChildrenChange(()=>{this.onChildrenChanged()},this.options)}}onChildrenChanged(){this.children=ho(this.controller.projector,this.query,this.filter,this.map),void 0!==this.callback&&this.callback.call(this.obj),this.callSubscribers(this.children,void 0,8|this.persistentFlags)}createGetterSetter(){Reflect.defineProperty(this.obj,this.propertyKey,{enumerable:!0,configurable:!0,get:()=>this.getValue(),set:()=>{}})||i.j.write(1,this.propertyKey,this.obj)}};return t=to([bt(),eo("design:paramtypes",[Object,Object,Number,String,String,Object,Object,Object,Object])],t),t})();function oo(t){return t.children}function ao(t,e,n){return!!n}function co(t,e,n){return n}const lo={optional:!0};function ho(t,e,n,i){var r;const s=e(t),o=[];for(let t=0,e=s.length;t<e;++t){const e=s[t],a=vo.for(e,lo),c=null!==(r=null==a?void 0:a.viewModel)&&void 0!==r?r:null;n(e,a,c)&&o.push(i(e,a,c))}return o}function uo(t){return function(e){return vo.define(t,e)}}const po=new WeakMap;class fo{constructor(t,e,n,i,r,s,o,a,c,l,h,u,d,p,f,g,v,b,m,y,w){this.Type=t,this.name=e,this.aliases=n,this.key=i,this.cache=r,this.template=s,this.instructions=o,this.dependencies=a,this.injectable=c,this.needsCompile=l,this.surrogates=h,this.bindables=u,this.childrenObservers=d,this.containerless=p,this.isStrictBinding=f,this.shadowOptions=g,this.hasSlots=v,this.strategy=b,this.hooks=m,this.enhance=y,this.projectionsMap=w}static create(t,e=null){if(null===e){const n=t;if("string"==typeof n)throw new Error("Cannot create a custom element definition with only a name and no type: "+t);const r=Object(i.s)("name",n,vo.generateName);return e="function"==typeof n.Type?n.Type:vo.generateType(Object(i.D)(r)),new fo(e,r,Object(i.A)(n.aliases),Object(i.s)("key",n,()=>vo.keyFrom(r)),Object(i.s)("cache",n,()=>0),Object(i.s)("template",n,()=>null),Object(i.A)(n.instructions),Object(i.A)(n.dependencies),Object(i.s)("injectable",n,()=>null),Object(i.s)("needsCompile",n,()=>!0),Object(i.A)(n.surrogates),bs.from(n.bindables),io.from(n.childrenObservers),Object(i.s)("containerless",n,()=>!1),Object(i.s)("isStrictBinding",n,()=>!1),Object(i.s)("shadowOptions",n,()=>null),Object(i.s)("hasSlots",n,()=>!1),Object(i.s)("strategy",n,()=>1),Object(i.s)("hooks",n,()=>A.none),Object(i.s)("enhance",n,()=>!1),Object(i.s)("projectionsMap",n,()=>new Map))}if("string"==typeof t)return new fo(e,t,Object(i.A)(vo.getAnnotation(e,"aliases"),e.aliases),vo.keyFrom(t),Object(i.r)("cache",e,()=>0),Object(i.r)("template",e,()=>null),Object(i.A)(vo.getAnnotation(e,"instructions"),e.instructions),Object(i.A)(vo.getAnnotation(e,"dependencies"),e.dependencies),Object(i.r)("injectable",e,()=>null),Object(i.r)("needsCompile",e,()=>!0),Object(i.A)(vo.getAnnotation(e,"surrogates"),e.surrogates),bs.from(...bs.getAll(e),vo.getAnnotation(e,"bindables"),e.bindables),io.from(...io.getAll(e),vo.getAnnotation(e,"childrenObservers"),e.childrenObservers),Object(i.r)("containerless",e,()=>!1),Object(i.r)("isStrictBinding",e,()=>!1),Object(i.r)("shadowOptions",e,()=>null),Object(i.r)("hasSlots",e,()=>!1),Object(i.r)("strategy",e,()=>1),Object(i.r)("hooks",e,()=>new A(e.prototype)),Object(i.r)("enhance",e,()=>!1),Object(i.r)("projectionsMap",e,()=>new Map));const n=Object(i.s)("name",t,vo.generateName);return new fo(e,n,Object(i.A)(vo.getAnnotation(e,"aliases"),t.aliases,e.aliases),vo.keyFrom(n),Object(i.q)("cache",t,e,()=>0),Object(i.q)("template",t,e,()=>null),Object(i.A)(vo.getAnnotation(e,"instructions"),t.instructions,e.instructions),Object(i.A)(vo.getAnnotation(e,"dependencies"),t.dependencies,e.dependencies),Object(i.q)("injectable",t,e,()=>null),Object(i.q)("needsCompile",t,e,()=>!0),Object(i.A)(vo.getAnnotation(e,"surrogates"),t.surrogates,e.surrogates),bs.from(...bs.getAll(e),vo.getAnnotation(e,"bindables"),e.bindables,t.bindables),io.from(...io.getAll(e),vo.getAnnotation(e,"childrenObservers"),e.childrenObservers,t.childrenObservers),Object(i.q)("containerless",t,e,()=>!1),Object(i.q)("isStrictBinding",t,e,()=>!1),Object(i.q)("shadowOptions",t,e,()=>null),Object(i.q)("hasSlots",t,e,()=>!1),Object(i.q)("strategy",t,e,()=>1),Object(i.r)("hooks",e,()=>new A(e.prototype)),Object(i.q)("enhance",t,e,()=>!1),Object(i.q)("projectionsMap",t,e,()=>new Map))}static getOrCreate(t){if(t instanceof fo)return t;if(po.has(t))return po.get(t);const e=fo.create(t);return po.set(t,e),i.f.define(vo.name,e,e.Type),e}register(t){const{Type:e,key:n,aliases:r}=this;i.i.transient(n,e).register(t),i.i.aliasTo(n,e).register(t),R(r,vo,n,t)}}const go={name:void 0,searchParents:!1,optional:!1},vo={name:i.h.resource.keyFor("custom-element"),keyFrom:t=>`${vo.name}:${t}`,isType:t=>"function"==typeof t&&i.f.hasOwn(vo.name,t),for(t,e=go){if(void 0===e.name&&!0!==e.searchParents){const n=i.f.getOwn(vo.name,t);if(void 0===n){if(!0===e.optional)return null;throw new Error("The provided node is not a custom element or containerless host.")}return n}if(void 0!==e.name){if(!0!==e.searchParents){const n=i.f.getOwn(vo.name,t);if(void 0===n)throw new Error("The provided node is not a custom element or containerless host.");return n.is(e.name)?n:void 0}let n=t,r=!1;for(;null!==n;){const t=i.f.getOwn(vo.name,n);if(void 0!==t&&(r=!0,t.is(e.name)))return t;n=As.getEffectiveParentNode(n)}if(r)return;throw new Error("The provided node does does not appear to be part of an Aurelia app DOM tree, or it was added to the DOM in a way that Aurelia cannot properly resolve its position in the component tree.")}let n=t;for(;null!==n;){const t=i.f.getOwn(vo.name,n);if(void 0!==t)return t;n=As.getEffectiveParentNode(n)}throw new Error("The provided node does does not appear to be part of an Aurelia app DOM tree, or it was added to the DOM in a way that Aurelia cannot properly resolve its position in the component tree.")},define(t,e){const n=fo.create(t,e);return i.f.define(vo.name,n,n.Type),i.f.define(vo.name,n,n),i.h.resource.appendTo(n.Type,vo.name),n.Type},getDefinition(t){const e=i.f.getOwn(vo.name,t);if(void 0===e)throw new Error("No definition found for type "+t.name);return e},annotate(t,e,n){i.f.define(i.h.annotation.keyFor(e),n,t)},getAnnotation:(t,e)=>i.f.getOwn(i.h.annotation.keyFor(e),t),generateName:function(){let t=0;return function(){return"unnamed-"+ ++t}}(),createInjectable(){const t=function(e,n,r){return i.a.getOrCreateAnnotationParamTypes(e)[r]=t,e};return t.register=function(e){return{resolve:(e,n)=>n.has(t,!0)?n.get(t):null}},t},generateType:function(){const t={value:"",writable:!1,enumerable:!1,configurable:!0},e={};return function(n,i=e){const r=class{};return t.value=n,Reflect.defineProperty(r,"name",t),i!==e&&Object.assign(r.prototype,i),r}}()},bo=i.a.createInterface("IProjectorLocator").noDefault();var mo=function(t,e,n,i){var r,s=arguments.length,o=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(o=(s<3?r(o):s>3?r(e,n,o):r(e,n))||o);return s>3&&o&&Object.defineProperty(e,n,o),o},yo=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},wo=function(t,e){return function(n,i){e(n,i,t)}};i.a.createInterface("IProjections").noDefault();var Co;!function(t){t[t.Projection=0]="Projection",t[t.Fallback=1]="Fallback"}(Co||(Co={}));class So{constructor(t,e,n){this.name=t,this.type=e,this.projectionContext=n}}class ko{constructor(t,e=null){this.content=t,this.scope=e}}class Oo{constructor(t,e){this.scope=t,this.projections=e}}const jo=i.a.createInterface("IProjectionProvider").noDefault(),To=new WeakMap;class xo{static register(t){return t.register(i.i.singleton(jo,xo))}registerProjections(t,e){for(const[n,i]of t)To.set(n,new Oo(e,i))}getProjectionFor(t){var e;return null!==(e=To.get(t))&&void 0!==e?e:null}}let Ao=(()=>{let t=class{constructor(t,e){this.factory=t,this.hostScope=null,this.view=t.create(),this.view.setLocation(e,1),this.isProjection=t.contentType===Co.Projection,this.outerScope=t.projectionScope}beforeBind(t,e,n){this.hostScope=this.$controller.scope.parentScope}afterAttach(t,e,n){var i;const{$controller:r}=this;return this.view.activate(t,r,n,null!==(i=this.outerScope)&&void 0!==i?i:this.hostScope,this.hostScope)}afterUnbind(t,e,n){return this.view.deactivate(t,this.$controller,n)}onCancel(t,e,n){this.view.cancel(t,this.$controller,n)}dispose(){this.view.dispose(),this.view=void 0}accept(t){var e;if(!0===(null===(e=this.view)||void 0===e?void 0:e.accept(t)))return!0}};return t=mo([uo({name:"au-slot",template:null,containerless:!0}),wo(0,Qt),wo(1,Os),yo("design:paramtypes",[Object,Object])],t),t})();var Ro=function(t,e,n,i){var r,s=arguments.length,o=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(o=(s<3?r(o):s>3?r(e,n,o):r(e,n))||o);return s>3&&o&&Object.defineProperty(e,n,o),o},Po=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},Io=function(t,e){return function(n,i){e(n,i,t)}};const Eo=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,Vo=i.a.createInterface("ISanitizer").withDefault(t=>t.singleton(class{sanitize(t){return t.replace(Eo,"")}}));let $o=(()=>{let t=class{constructor(t){this.sanitizer=t}toView(t){return null==t?null:this.sanitizer.sanitize(t)}};return t=Ro([Ae("sanitize"),Io(0,Vo),Po("design:paramtypes",[Object])],t),t})();var No=function(t,e,n,i){var r,s=arguments.length,o=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(o=(s<3?r(o):s>3?r(e,n,o):r(e,n))||o);return s>3&&o&&Object.defineProperty(e,n,o),o},Fo=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},Bo=function(t,e){return function(n,i){e(n,i,t)}};const Lo=i.a.createInterface("ITemplateCompiler").noDefault(),Mo=i.a.createInterface("IInstructionRenderer").noDefault(),Do=i.a.createInterface("IRenderer").noDefault();function Uo(t){return function(e){const n=function(...n){const i=new e(...n);return i.instructionType=t,i};n.register=function(t){i.i.singleton(Mo,n).register(t)};const r=i.f.getOwnKeys(e);for(const t of r)i.f.define(t,i.f.getOwn(t,e),n);const s=Object.getOwnPropertyDescriptors(e);return Object.keys(s).filter(t=>"prototype"!==t).forEach(t=>{Reflect.defineProperty(n,t,s[t])}),n}}let qo=(()=>{let t=class{constructor(t){const e=this.instructionRenderers={};t.forEach(t=>{e[t.instructionType]=t.render.bind(t)})}static register(t){return i.i.singleton(Do,this).register(t)}render(t,e,n,i,r,s){const o=r.instructions;if(i.length!==o.length)throw new Error(`The compiled template is not aligned with the render instructions. There are ${i.length} targets and ${o.length} instructions.`);for(let r=0,s=i.length;r<s;++r)this.renderInstructions(t,e,o[r],n,i[r]);null!=s&&this.renderInstructions(t,e,r.surrogates,n,s)}renderInstructions(t,e,n,i,r){const s=this.instructionRenderers;let o;for(let a=0,c=n.length;a<c;++a)o=n[a],s[o.type](t,e,i,r,o)}};return t=No([Bo(0,Object(i.l)(Mo)),Fo("design:paramtypes",[Array])],t),t})();function _o(t,e,n){return"string"==typeof e?t.parse(e,n):e}function Ho(t){return void 0!==t.bindingContext?t.bindingContext:t}let zo=(()=>{let t=class{render(t,e,n,i,r){const s=Ho(i);void 0!==s.$observers&&void 0!==s.$observers[r.to]?s.$observers[r.to].setValue(r.value,32):s[r.to]=r.value}};return t=No([Uo("re")],t),t})(),Ko=(()=>{let t=class{render(t,e,n,r,s){let o;const a=s.slotInfo;if(null!==a){const t=a.projectionContext;o=ca(t.content,e).getViewFactory(void 0,a.type,t.scope)}const c=e.getComponentFactory(n,r,s,o,r),l=vo.keyFrom(s.res),h=c.createComponent(l),u=e.get(Jt),d=Aa.forCustomElement(h,u,r,e,e.getProjectionFor(s),t);t=d.flags,i.f.define(l,d,r),e.renderInstructions(t,s.instructions,n,d),n.addController(d),c.dispose()}};return t=No([Uo("ra")],t),t})(),Wo=(()=>{let t=class{render(t,e,n,r,s){const o=e.getComponentFactory(n,r,s,void 0,void 0),a=Ss.keyFrom(s.res),c=o.createComponent(a),l=e.get(Jt),h=Aa.forCustomAttribute(c,l,r,t);i.f.define(a,h,r),e.renderInstructions(t,s.instructions,n,h),n.addController(h),o.dispose()}};return t=No([Uo("rb")],t),t})(),Qo=(()=>{let t=class{render(t,e,n,r,s){const o=ca(s.def,e).getViewFactory(),a=e.dom.convertToRenderLocation(r),c=e.getComponentFactory(n,r,s,o,a),l=Ss.keyFrom(s.res),h=c.createComponent(l),u=e.get(Jt),d=Aa.forCustomAttribute(h,u,r,t);if(i.f.define(l,d,a),s.link){const t=n.children;h.link(t[t.length-1])}e.renderInstructions(t,s.instructions,n,d),n.addController(d),c.dispose()}};return t=No([Uo("rc")],t),t})(),Jo=(()=>{let t=class{constructor(t,e){this.parser=t,this.observerLocator=e}render(t,e,n,i,r){e.dom.remove(i);const s=r.instructions,o=r.toBindingContext;let a,c,l;for(let t=0,i=s.length;t<i;++t)a=s[t],c=_o(this.parser,a.from,48),l=ia(new Wr(c,a.to,this.observerLocator,e,o),c,e),n.addBinding(l)}};return t=No([Uo("rd"),Bo(0,tr),Bo(1,Di),Fo("design:paramtypes",[Object,Object])],t),t})(),Go=(()=>{let t=class{constructor(t,e){this.parser=t,this.observerLocator=e}render(t,e,n,i,r){const s=_o(this.parser,r.from,153),o=ia(new Xi(s,Ho(i),r.to,this.observerLocator,e),s,e);n.addBinding(o)}};return t=No([Uo("rh"),Bo(0,tr),Bo(1,Di),Fo("design:paramtypes",[Object,Object])],t),t})(),Yo=(()=>{let t=class{constructor(t){this.parser=t}render(t,e,n,i,r){const s=_o(this.parser,r.from,5376),o=ia(new Qr(s,function(t,e){if("element"===e)return t;switch(e){case"controller":return vo.for(t);case"view":throw new Error("Not supported API");case"view-model":return vo.for(t).viewModel;default:{const n=Ss.for(t,e);if(void 0!==n)return n.viewModel;const i=vo.for(t,{name:e});if(void 0===i)throw new Error(`Attempted to reference "${e}", but it was not found amongst the target's API.`);return i.viewModel}}}(i,r.to),e),s,e);n.addBinding(o)}};return t=No([Uo("rj"),Bo(0,tr),Fo("design:paramtypes",[Object])],t),t})(),Zo=(()=>{let t=class{constructor(t,e){this.parser=t,this.observerLocator=e}render(t,e,n,i,r){let s;const o=_o(this.parser,r.from,2048);s=o.isMulti?ia(new _r(this.observerLocator,o,Ho(i),r.to,$.toView,e),o,e):ia(new Hr(o.firstExpression,o,Ho(i),r.to,$.toView,this.observerLocator,e,!0),o,e),n.addBinding(s)}};return t=No([Uo("rf"),Bo(0,tr),Bo(1,Di),Fo("design:paramtypes",[Object,Object])],t),t})(),Xo=(()=>{let t=class{constructor(t,e){this.parser=t,this.observerLocator=e}render(t,e,n,i,r){const s=_o(this.parser,r.from,48|r.mode),o=ia(new Zi(s,Ho(i),r.to,r.mode,this.observerLocator,e),s,e);n.addBinding(o)}};return t=No([Uo("rg"),Bo(0,tr),Bo(1,Di),Fo("design:paramtypes",[Object,Object])],t),t})(),ta=(()=>{let t=class{constructor(t,e){this.parser=t,this.observerLocator=e}render(t,e,n,i,r){const s=_o(this.parser,r.from,539),o=ia(new Zi(s,Ho(i),r.to,$.toView,this.observerLocator,e),s,e);n.addBinding(o)}};return t=No([Uo("rk"),Bo(0,tr),Bo(1,Di),Fo("design:paramtypes",[Object,Object])],t),t})(),ea=0;const na=[];function ia(t,e,n){for(;e instanceof $e;)na[ea++]=e,e=e.expression;for(;ea>0;){const e=na[--ea],i=n.get(e.behaviorKey);i instanceof je&&(t=i.construct(t,e))}return na.length=0,t}const ra=new WeakMap,sa=new WeakMap,oa=new WeakMap;function aa(t){return t instanceof la}function ca(t,e,n){const i=fo.getOrCreate(t);if(null!==i.injectable)return new la(i,e);if(null==n){let t=ra.get(i);void 0===t&&ra.set(i,t=new WeakMap);let n=t.get(e);return void 0===n&&t.set(e,n=new la(i,e)),n}let r=sa.get(i);void 0===r&&sa.set(i,r=new WeakMap);let s=r.get(e);void 0===s&&r.set(e,s=new WeakMap);let o=s.get(n);return void 0===o&&s.set(n,o=new la(i,e)),o}class la{constructor(t,e){this.definition=t,this.parentContainer=e,this.viewModelProvider=void 0,this.fragment=null,this.factory=void 0,this.isCompiled=!1,this.compiledDefinition=void 0;const n=this.container=e.createChild();this.renderer=n.get(Do),this.projectionProvider=n.get(jo),n.registerResolver(Qt,this.factoryProvider=new ha,!0),n.registerResolver(Kt,this.parentControllerProvider=new i.e,!0),n.registerResolver(x,this.instructionProvider=new i.e,!0),n.registerResolver(Os,this.renderLocationProvider=new i.e,!0),(this.dom=n.get(js)).registerElementResolver(n,this.elementProvider=new i.e),n.register(...t.dependencies)}has(t,e){return this.container.has(t,e)}get(t){return this.container.get(t)}getAll(t){return this.container.getAll(t)}register(...t){return this.container.register(...t)}registerResolver(t,e){return this.container.registerResolver(t,e)}registerTransformer(t,e){return this.container.registerTransformer(t,e)}getResolver(t,e){return this.container.getResolver(t,e)}getFactory(t){return this.container.getFactory(t)}registerFactory(t,e){this.container.registerFactory(t,e)}createChild(){return this.container.createChild()}disposeResolvers(){this.container.disposeResolvers()}compile(t){let e;if(this.isCompiled)return this;this.isCompiled=!0;const n=this.definition;if(n.needsCompile){const i=this.container,r=i.get(Lo);e=this.compiledDefinition=r.compile(n,i,t)}else e=this.compiledDefinition=n;if(e.register(this),oa.has(e))this.fragment=oa.get(e);else{const t=e.template;null===t?oa.set(e,null):oa.set(e,this.fragment=this.definition.enhance?t:this.dom.createDocumentFragment(t))}return this}getViewFactory(t,e,n){let i=this.factory;if(void 0===i){void 0===t&&(t=this.definition.name);const r=this.parentContainer.get(Jt);i=this.factory=new Na(t,this,r,e,n)}return i}beginChildComponentOperation(t){const e=this.definition;return null!==e.injectable&&(void 0===this.viewModelProvider&&this.container.registerResolver(e.injectable,this.viewModelProvider=new i.e),this.viewModelProvider.prepare(t)),this}createNodes(){return this.dom.createNodeSequence(this.fragment,!this.definition.enhance)}getComponentFactory(t,e,n,i,r){return void 0!==t&&this.parentControllerProvider.prepare(t),void 0!==e&&this.elementProvider.prepare(e),void 0!==n&&this.instructionProvider.prepare(n),void 0!==r&&this.renderLocationProvider.prepare(r),void 0!==i&&this.factoryProvider.prepare(i),this}createComponent(t){return this.container.get(t)}render(t,e,n,i,r){this.renderer.render(t,this,e,n,i,r)}renderInstructions(t,e,n,i){this.renderer.renderInstructions(t,this,e,n,i)}dispose(){this.elementProvider.dispose(),this.container.disposeResolvers()}registerProjections(t,e){this.projectionProvider.registerProjections(t,e)}getProjectionFor(t){return this.projectionProvider.getProjectionFor(t)}}class ha{constructor(){this.factory=null}prepare(t){this.factory=t}get $isResolver(){return!0}resolve(t,e){const n=this.factory;if(null===n)throw i.j.error(50);if("string"!=typeof n.name||0===n.name.length)throw i.j.error(51);return n}dispose(){this.factory=null}}var ua=function(t,e,n,i){var r,s=arguments.length,o=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(o=(s<3?r(o):s>3?r(e,n,o):r(e,n))||o);return s>3&&o&&Object.defineProperty(e,n,o),o},da=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},pa=function(t,e){return function(n,i){e(n,i,t)}};const fa={done:{done:!0,wait:()=>Promise.resolve()}};var ga;!function(t){t[t.beforeCreate=0]="beforeCreate",t[t.beforeRender=1]="beforeRender",t[t.beforeCompileChildren=2]="beforeCompileChildren",t[t.beforeBind=3]="beforeBind",t[t.afterAttach=4]="afterAttach"}(ga||(ga={}));const va=i.a.createInterface("IStartTask").noDefault();var ba;!function(t){t[t.with=0]="with",t[t.from=1]="from"}(ba||(ba={}));const ma=class t{constructor(t){this.type=t,this._slot=void 0,this._promiseOrTask=void 0,this._container=void 0,this._key=void 0,this._callback=void 0,this._task=void 0}get slot(){if(void 0===this._slot)throw new Error("StartTask.slot is not set");return this._slot}get promiseOrTask(){if(void 0===this._promiseOrTask)throw new Error("StartTask.promiseOrTask is not set");return this._promiseOrTask}get container(){if(void 0===this._container)throw new Error("StartTask.container is not set");return this._container}get key(){if(void 0===this._key)throw new Error("StartTask.key is not set");return this._key}get callback(){if(void 0===this._callback)throw new Error("StartTask.callback is not set");return this._callback}get task(){if(void 0===this._task)throw new Error("StartTask.task is not set");return this._task}static with(e){const n=new t(0);return n._key=e,n}static from(e){const n=new t(1);return n._promiseOrTask=e,n}beforeCreate(){return this.at(0)}beforeRender(){return this.at(1)}beforeCompileChildren(){return this.at(2)}beforeBind(){return this.at(3)}afterAttach(){return this.at(4)}at(t){return this._slot=t,this}call(t){return this._callback=t,this}register(t){return this._container=t.register(i.i.instance(va,this))}resolveTask(){if(void 0===this._task)switch(this.type){case 0:this._task=new Ca(this.container,this.key,this.callback);break;case 1:this._task=new ka(this.promiseOrTask)}return this.task}},ya=i.a.createInterface("IStartTaskManager").noDefault();let wa=(()=>{let t=class{constructor(t){this.locator=t,this.beforeCompileChildrenQueued=!1}static register(t){return i.i.singleton(ya,this).register(t)}enqueueBeforeCompileChildren(){if(this.beforeCompileChildrenQueued)throw new Error("BeforeCompileChildren already queued");this.beforeCompileChildrenQueued=!0}runBeforeCreate(t=this.locator){return this.run(0,t)}runBeforeRender(t=this.locator){return this.run(1,t)}runBeforeCompileChildren(t=this.locator){return this.beforeCompileChildrenQueued?(this.beforeCompileChildrenQueued=!1,this.run(2,t)):fa.done}runBeforeBind(t=this.locator){return this.run(3,t)}runAfterAttach(t=this.locator){return this.run(4,t)}run(t,e=this.locator){const n=e.getAll(va).filter(e=>e.slot===t).map(t=>t.resolveTask()).filter(t=>!t.done);return 0===n.length?fa.done:new Oa(n)}};return t=ua([pa(0,i.d),da("design:paramtypes",[Object])],t),t})();class Ca{constructor(t,e,n){this.container=t,this.key=e,this.callback=n,this.done=!1}wait(){if(void 0===this.promise){const t=this.container.get(this.key),e=this.callback.call(void 0,t);this.promise=void 0===e?Promise.resolve():e.then instanceof Function?e:e.wait(),this.promise=this.promise.then(()=>{this.done=!0,this.container=void 0,this.key=void 0,this.callback=void 0}).catch(t=>{throw t})}return this.promise}}class Sa{constructor(t,e,n,...i){this.done=!1;const r=t.then instanceof Function?t:t.wait();this.promise=r.then(()=>{const t=e.call(n,...i);if(void 0!==t){return(t.then instanceof Function?t:t.wait()).then(()=>{this.done=!0})}this.done=!0})}wait(){return this.promise}}class ka{constructor(t){this.done=!1,this.promise=t.then instanceof Function?t:t.wait(),this.promise.then(()=>{this.done=!0}).catch(t=>{throw t})}wait(){return this.promise}}class Oa{constructor(t){this.done=!1,this.promise=Promise.all(t.map(t=>t.wait())).then(()=>{this.done=!0})}wait(){return this.promise}}function ja(t){return!(void 0===t||!0===t.done)}function Ta(t){t.dispose()}const xa=new WeakMap;class Aa{constructor(t,e,n,r,s,o,a,c,l){this.vmKind=t,this.flags=e,this.lifecycle=n,this.definition=r,this.hooks=s,this.viewFactory=o,this.viewModel=a,this.bindingContext=c,this.host=l,this.id=Object(i.B)("au$component"),this.head=null,this.tail=null,this.next=null,this.parent=null,this.bindings=void 0,this.children=void 0,this.hasLockedScope=!1,this.isStrictBinding=!1,this.scope=void 0,this.hostScope=null,this.projector=void 0,this.nodes=void 0,this.context=void 0,this.location=void 0,this.mountStrategy=1,this.state=0,this.promise=void 0,this.resolve=void 0,this.reject=void 0,this.logger=null,this.debug=!1,this.fullyNamed=!1,this.canceling=!1}get isActive(){return(15&this.state)>0&&0==(16&this.state)}get name(){var t,e,n,i,r;let s=null!==(e=null===(t=this.parent)||void 0===t?void 0:t.name)&&void 0!==e?e:"";switch(s=s.length>0?s+" -> ":"",this.vmKind){case 1:return`${s}Attribute<${null===(n=this.viewModel)||void 0===n?void 0:n.constructor.name}>`;case 0:return`${s}Element<${null===(i=this.viewModel)||void 0===i?void 0:i.constructor.name}>`;case 2:return`${s}View<${null===(r=this.viewFactory)||void 0===r?void 0:r.name}>`}}static getCached(t){return xa.get(t)}static getCachedOrThrow(t){const e=Aa.getCached(t);if(void 0===e)throw new Error("There is no cached controller for the provided ViewModel: "+String(t));return e}static forCustomElement(t,e,n,i,r,s=0,o=!0,a){if(xa.has(t))return xa.get(t);s|=(a=null!=a?a:vo.getDefinition(t.constructor)).strategy;const c=new Aa(0,s,e,a,a.hooks,void 0,t,Ra(s,t),n);return xa.set(t,c),o&&c.hydrateCustomElement(i,r),c}static forCustomAttribute(t,e,n,i=0){if(xa.has(t))return xa.get(t);const r=Ss.getDefinition(t.constructor);i|=r.strategy;const s=new Aa(1,i,e,r,r.hooks,void 0,t,Ra(i,t),n);return xa.set(t,s),s.hydrateCustomAttribute(),s}static forSyntheticView(t,e,n,i=0){const r=new Aa(2,i,e,void 0,A.none,t,void 0,void 0,void 0);return r.hydrateSynthetic(n),r}hydrateCustomElement(t,e){this.logger=t.get(i.c).root,this.debug=this.logger.config.level<=1,this.debug&&(this.logger=this.logger.scopeTo(this.name));let n=this.definition;const r=this.flags|=n.strategy,s=this.viewModel;Ia(this.lifecycle,n,r,s),function(t,e,n,i){const r=e.childrenObservers,s=Object.getOwnPropertyNames(r),o=s.length;if(o>0){const e=Pa(i);let a;for(let c=0;c<o;++c)if(a=s[c],null==e[a]){const s=r[a];e[a]=new so(t,i,n,a,s.callback,s.query,s.filter,s.map,s.options)}}}(this,n,r,s);const o=this.scope=oe.create(r,this.bindingContext,null),a=this.hooks;if(a.hasCreate){this.debug&&this.logger.trace("invoking create() hook");const e=s.create(this,t,n);void 0!==e&&e!==n&&(n=fo.getOrCreate(e))}const c=this.context=ca(n,t,null==e?void 0:e.projections);n.register(c),null!==n.injectable&&c.beginChildComponentOperation(s),a.hasBeforeCompile&&(this.debug&&this.logger.trace("invoking hasBeforeCompile() hook"),s.beforeCompile(this));const l=c.compile(e),h=l.compiledDefinition;l.registerProjections(h.projectionsMap,o),h.projectionsMap.clear(),this.isStrictBinding=h.isStrictBinding;const u=t.get(bo);this.projector=u.getElementProjector(c.dom,this,this.host,h),s.$controller=this;const d=this.nodes=l.createNodes();a.hasAfterCompile&&(this.debug&&this.logger.trace("invoking hasAfterCompile() hook"),s.afterCompile(this));t.get(ya).runBeforeCompileChildren(t);const p=d.findTargets();l.render(this.flags,this,p,h,this.host),a.hasAfterCompileChildren&&(this.debug&&this.logger.trace("invoking afterCompileChildren() hook"),s.afterCompileChildren(this))}hydrateCustomAttribute(){const t=this.definition,e=this.flags|t.strategy,n=this.viewModel;Ia(this.lifecycle,t,e,n),n.$controller=this}hydrateSynthetic(t){this.context=t;const e=t.compile(null),n=e.compiledDefinition;this.isStrictBinding=n.isStrictBinding;const i=(this.nodes=e.createNodes()).findTargets();e.render(this.flags,this,i,n,void 0)}cancel(t,e,n){var i,r,s,o;if(!this.canceling)if(this.canceling=!0,1==(1&this.state)){if(this.state=1^this.state|16,null===(r=null===(i=this.bindingContext)||void 0===i?void 0:i.onCancel)||void 0===r||r.call(i,t,e,n),4==(4&this.state)&&void 0!==this.children)for(const i of this.children)i.cancel(t,e,n)}else if(16==(16&this.state)&&(this.state=16^this.state|1,null===(o=null===(s=this.bindingContext)||void 0===s?void 0:s.onCancel)||void 0===o||o.call(s,t,e,n),64==(64&this.state)&&void 0!==this.children))for(const i of this.children)i.cancel(t,e,n)}activate(t,e,n,r,s){switch(this.canceling=!1,this.state){case 0:case 224:if(null!==e&&!e.isActive)return;this.state=1;break;case 14:return;case 512:throw new Error(this.name+" trying to activate a controller that is disposed.");default:if(1==(1&this.state))return this.promise;if(16==(16&this.state))return this.state=16^this.state|1,64==(64&this.state)&&void 0!==this.children?Object(i.E)(this.onResolve(this.$activateChildren(t,e,n)),this.promise):this.promise;throw new Error(`${this.name} unexpected state: ${zt(this.state)}.`)}switch(this.parent=e,this.debug&&!this.fullyNamed&&(this.fullyNamed=!0,this.logger=this.context.get(i.c).root.scopeTo(this.name),this.logger.trace("activate()")),this.hostScope=null!=s?s:null,n|=32,this.vmKind){case 0:this.scope.parentScope=void 0===r?null:r;break;case 1:this.scope=r;break;case 2:if(null==r)throw new Error("Scope is null or undefined");this.hasLockedScope||(this.scope=r)}return this.isStrictBinding&&(n|=4),this.beforeBind(t,e,n)}beforeBind(t,e,n){var i,r;return this.debug&&this.logger.trace("beforeBind()"),this.onResolve(null===(r=null===(i=this.bindingContext)||void 0===i?void 0:i.beforeBind)||void 0===r?void 0:r.call(i,t,e,n),()=>this.bind(t,e,n))}bind(t,e,n){if(this.debug&&this.logger.trace("bind()"),this.state|=2,16==(16&this.state))return this.afterUnbind(t,e,n);if(void 0!==this.bindings){const{scope:t,hostScope:e,bindings:i}=this;for(let r=0,s=i.length;r<s;++r)i[r].$bind(n,t,e)}return this.afterBind(t,e,n)}afterBind(t,e,n){var i,r;return this.debug&&this.logger.trace("afterBind()"),this.onResolve(null===(r=null===(i=this.bindingContext)||void 0===i?void 0:i.afterBind)||void 0===r?void 0:r.call(i,t,e,n),()=>this.attach(t,e,n))}attach(t,e,n){if(this.debug&&this.logger.trace("attach()"),16==(16&this.state))return this.beforeUnbind(t,e,n);switch(this.vmKind){case 0:this.projector.project(this.nodes);break;case 2:switch(this.mountStrategy){case 2:this.nodes.appendTo(this.location);break;case 1:this.nodes.insertBefore(this.location)}}return this.afterAttach(t,e,n)}afterAttach(t,e,n){var i,r;return this.debug&&this.logger.trace("afterAttach()"),this.onResolve(null===(r=null===(i=this.bindingContext)||void 0===i?void 0:i.afterAttach)||void 0===r?void 0:r.call(i,t,e,n),()=>this.activateChildren(t,e,n))}activateChildren(t,e,n){return this.debug&&this.logger.trace("activateChildren()"),this.state|=4,this.onResolve(this.$activateChildren(t,e,n),()=>this.endActivate(t,e,n))}$activateChildren(t,e,n){if(void 0!==this.children){const{children:e,scope:r,hostScope:s}=this;return Object(i.E)(...e.map(e=>e.activate(t,this,n,r,s)))}}endActivate(t,e,n){if(this.debug&&this.logger.trace("afterAttachChildren()"),this.state^=4,16==(16&this.state))return Ea(t),this.beforeDetach(t,e,n);if(32==(32&this.state))return this.state^=32,void this.resolvePromise();let i,r=void 0;if(null===t.head?t.head=this:t.tail.next=this,t.tail=this,t===this){if(null!==t.head){let s,o=t.head;t.head=t.tail=null;do{i=o.afterAttachChildren(t,e,n),i instanceof Promise&&(null!=r?r:r=[]).push(i),s=o.next,o.next=null,o=s}while(null!==o);if(void 0!==r){return(1===r.length?r[0]:Promise.all(r)).then(()=>{this.resolvePromise()})}}this.resolvePromise()}}afterAttachChildren(t,e,n){var i,r;return this.onResolve(null===(r=null===(i=this.bindingContext)||void 0===i?void 0:i.afterAttachChildren)||void 0===r?void 0:r.call(i,t,n),()=>{if(16==(16&this.state))return this.state=14,this.deactivate(this,e,n);this.state=14,t!==this&&this.resolvePromise()})}deactivate(t,e,n){switch(this.canceling=!1,-257&this.state){case 14:this.state=16;break;case 0:case 224:case 512:case 736:return;default:if(16==(16&this.state))return this.promise;if(1==(1&this.state))return this.state=1^this.state|16,4==(4&this.state)&&void 0!==this.children?Object(i.E)(this.onResolve(this.$deactivateChildren(t,e,n)),this.promise):this.promise;throw new Error(`${this.name} unexpected state: ${zt(this.state)}.`)}return this.debug&&this.logger.trace("deactivate()"),this.beforeDetach(t,e,n)}beforeDetach(t,e,n){var i,r;return this.debug&&this.logger.trace("beforeDetach()"),this.onResolve(null===(r=null===(i=this.bindingContext)||void 0===i?void 0:i.beforeDetach)||void 0===r?void 0:r.call(i,t,e,n),()=>this.detach(t,e,n))}detach(t,e,n){if(this.debug&&this.logger.trace("detach()"),this.state|=32,1==(1&this.state))return this.afterAttach(t,e,n);switch(this.vmKind){case 0:this.projector.take(this.nodes);break;case 2:this.nodes.remove(),this.nodes.unlink()}return this.beforeUnbind(t,e,n)}beforeUnbind(t,e,n){var i,r;return this.debug&&this.logger.trace("beforeUnbind()"),this.onResolve(null===(r=null===(i=this.bindingContext)||void 0===i?void 0:i.beforeUnbind)||void 0===r?void 0:r.call(i,t,e,n),()=>this.unbind(t,e,n))}unbind(t,e,n){if(this.debug&&this.logger.trace("unbind()"),1==(1&this.state))return this.afterBind(t,e,n);if(n|=64,void 0!==this.bindings){const{bindings:t}=this;for(let e=0,i=t.length;e<i;++e)t[e].$unbind(n)}return this.afterUnbind(t,e,n)}afterUnbind(t,e,n){var i,r;return this.debug&&this.logger.trace("afterUnbind()"),this.onResolve(null===(r=null===(i=this.bindingContext)||void 0===i?void 0:i.afterUnbind)||void 0===r?void 0:r.call(i,t,e,n),()=>this.deactivateChildren(t,e,n))}deactivateChildren(t,e,n){return this.debug&&this.logger.trace("deactivateChildren()"),this.state|=64,this.onResolve(this.$deactivateChildren(t,e,n),()=>this.endDeactivate(t,e,n))}$deactivateChildren(t,e,n){if(void 0!==this.children){const{children:e}=this;return Object(i.E)(...e.map(e=>e.deactivate(t,this,n)))}}endDeactivate(t,e,n){if(this.debug&&this.logger.trace("afterUnbindChildren()"),this.state^=64,1==(1&this.state))return Ea(t),this.beforeBind(t,e,n);if(2==(2&this.state))return this.state^=2,void this.resolvePromise();let i,r=void 0;if(null===t.head?t.head=this:t.tail.next=this,t.tail=this,t===this){if(null!==t.head){let s,o=t.head;t.head=t.tail=null;do{i=o.afterUnbindChildren(t,e,n),i instanceof Promise&&(null!=r?r:r=[]).push(i),s=o.next,o.next=null,o=s}while(null!==o);if(void 0!==r){return(1===r.length?r[0]:Promise.all(r)).then(()=>{this.resolvePromise()})}}this.resolvePromise()}}afterUnbindChildren(t,e,n){var i,r;return this.onResolve(null===(r=null===(i=this.bindingContext)||void 0===i?void 0:i.afterUnbindChildren)||void 0===r?void 0:r.call(i,t,n),()=>{switch(this.parent=null,this.vmKind){case 1:this.scope=void 0;break;case 2:this.hasLockedScope||(this.scope=void 0),256!=(256&this.state)||this.viewFactory.tryReturnToCache(this)||this.dispose();break;case 0:this.scope.parentScope=null}if(1==(1&this.state))return this.state=512&this.state|224,this.activate(this,e,n);512==(512&n)&&this.dispose(),this.state=512&this.state|224,t!==this&&this.resolvePromise()})}onResolve(t,e){return t instanceof Promise?(void 0===this.promise&&(this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})),t=t.catch(t=>{var e;null===(e=this.logger)||void 0===e||e.error(t);const n=this.reject;throw this.promise=this.resolve=this.reject=void 0,n(t),t}),void 0===e?t:t.then(e)):void 0!==e?e():void 0}addBinding(t){void 0===this.bindings?this.bindings=[t]:this.bindings[this.bindings.length]=t}addController(t){void 0===this.children?this.children=[t]:this.children[this.children.length]=t}is(t){switch(this.vmKind){case 1:return Ss.getDefinition(this.viewModel.constructor).name===t;case 0:return vo.getDefinition(this.viewModel.constructor).name===t;case 2:return this.viewFactory.name===t}}lockScope(t){this.scope=t,this.hasLockedScope=!0}setLocation(t,e){this.location=t,this.mountStrategy=e}release(){this.state|=256}dispose(){this.debug&&this.logger.trace("dispose()"),512!=(512&this.state)&&(this.state|=512,this.hooks.hasDispose&&this.bindingContext.dispose(),void 0!==this.children&&(this.children.forEach(Ta),this.children=void 0),void 0!==this.bindings&&(this.bindings.forEach(Ta),this.bindings=void 0),this.scope=void 0,this.projector=void 0,this.nodes=void 0,this.context=void 0,this.location=void 0,this.viewFactory=void 0,void 0!==this.viewModel&&(xa.delete(this.viewModel),this.viewModel=void 0),this.bindingContext=void 0,this.host=void 0)}accept(t){if(!0===t(this))return!0;if(this.hooks.hasAccept&&!0===this.bindingContext.accept(t))return!0;if(void 0!==this.children){const{children:e}=this;for(let n=0,i=e.length;n<i;++n)if(!0===e[n].accept(t))return!0}}getTargetAccessor(t){const{bindings:e}=this;if(void 0!==e){const n=e.find(e=>e.targetProperty===t);if(void 0!==n)return n.targetObserver}}resolvePromise(){const t=this.resolve;void 0!==t&&(this.promise=this.resolve=this.reject=void 0,t())}}function Ra(t,e){return!0===e.noProxy||0==(2&t)?e:Mt.getOrCreate(e).proxy}function Pa(t){let e=t.$observers;return void 0===e&&Reflect.defineProperty(t,"$observers",{enumerable:!1,value:e={}}),e}function Ia(t,e,n,i){const r=e.bindables,s=Object.getOwnPropertyNames(r),o=s.length;if(o>0){let e,a;if((2&n)>0)for(let c=0;c<o;++c)e=s[c],a=r[e],new Yr(t,n,Mt.getOrCreate(i).proxy,e,a.callback,a.set);else{const c=Pa(i);for(let l=0;l<o;++l)e=s[l],void 0===c[e]&&(a=r[e],c[e]=new Yr(t,n,i,e,a.callback,a.set))}}}function Ea(t){let e,n=t.head;for(t.head=t.tail=null;null!==n;)e=n.next,n.next=null,n=e}function Va(t){return t instanceof Aa&&0===t.vmKind}function $a(t){return Object(i.x)(t)&&vo.isType(t.constructor)}let Na=(()=>{class t{constructor(t,e,n,i,r=null){this.name=t,this.context=e,this.lifecycle=n,this.contentType=i,this.projectionScope=r,this.isCaching=!1,this.cache=null,this.cacheSize=-1}setCacheSize(e,n){e&&("*"===e?e=t.maxCacheSize:"string"==typeof e&&(e=parseInt(e,10)),-1!==this.cacheSize&&n||(this.cacheSize=e)),this.cacheSize>0?this.cache=[]:this.cache=null,this.isCaching=this.cacheSize>0}canReturnToCache(t){return null!=this.cache&&this.cache.length<this.cacheSize}tryReturnToCache(t){return!!this.canReturnToCache(t)&&(this.cache.push(t),!0)}create(t){const e=this.cache;let n;return null!=e&&e.length>0?(n=e.pop(),n):(n=Aa.forSyntheticView(this,this.lifecycle,this.context,t),n)}}return t.maxCacheSize=65535,t})();const Fa=new WeakSet;function Ba(t){return!Fa.has(t)}function La(t){return Fa.add(t),fo.create(t)}const Ma={name:i.h.resource.keyFor("views"),has:t=>"function"==typeof t&&(i.f.hasOwn(Ma.name,t)||"$views"in t),get(t){if("function"==typeof t&&"$views"in t){const e=t.$views.filter(Ba).map(La);for(const n of e)Ma.add(t,n)}let e=i.f.getOwn(Ma.name,t);return void 0===e&&i.f.define(Ma.name,e=[],t),e},add(t,e){const n=fo.create(e);let r=i.f.getOwn(Ma.name,t);return void 0===r?i.f.define(Ma.name,r=[n],t):r.push(n),r}};const Da=i.a.createInterface("IViewLocator").noDefault();var Ua=function(t,e,n,i){var r,s=arguments.length,o=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(o=(s<3?r(o):s>3?r(e,n,o):r(e,n))||o);return s>3&&o&&Object.defineProperty(e,n,o),o},qa=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},_a=function(t,e){return function(n,i){e(n,i,t)}};let Ha=(()=>{let t=class{constructor(t){this.viewLocator=t}toView(t,e){return this.viewLocator.getViewComponentForObject(t,e)}};return t=Ua([Ae("view"),_a(0,Da),qa("design:paramtypes",[Object])],t),t})();const za=i.a.createInterface("IActivator").withDefault(t=>t.singleton(Ka));let Ka=(()=>{class t{constructor(t){this.taskManager=t}static register(t){return i.i.singleton(za,this).register(t)}activate(t,e,n,i=0,r){i=void 0===i?0:i;const s=this.taskManager;let o=s.runBeforeRender();return o.done?this.render(t,e,n,i):o=new Sa(o,this.render,this,t,e,n,i),o=o.done?s.runBeforeBind():new Sa(o,s.runBeforeBind,s),o=o.done?this.activateController(e,i,r):new Sa(o,this.activateController,this,e,i,r),o=o.done?s.runAfterAttach():new Sa(o,s.runAfterAttach,s),o}deactivate(t,e=0){const n=Aa.getCachedOrThrow(t),i=n.deactivate(n,null,e);return ja(i)?new ka(i):fa.done}render(t,e,n,i){const r=n.get(Jt);Aa.forCustomElement(e,r,t,n,null,i)}activateController(t,e,n){const i=Aa.getCachedOrThrow(t),r=i.activate(i,null,32|e,n);return ja(r)?new ka(r):fa.done}}return t.inject=[ya],t})();class Wa{constructor(t,e,n,r=!1){if(this.config=t,n.prepare(this),null!=t.host)e.has(ks,!1)?this.container=e.createChild():this.container=e,i.i.instance(ks,t.host).register(this.container),this.host=t.host;else{if(!e.has(ks,!0))throw new Error("No host element found.");this.container=e,this.host=e.get(ks)}this.strategy=null!=t.strategy?t.strategy:1;const s=this.container.get(Ja);this.dom=s.initialize(t),this.lifecycle=this.container.get(Jt),this.activator=this.container.get(za);const o=this.container.get(ya).runBeforeCreate();if(r){const e=t.component;this.enhanceDefinition=vo.getDefinition(vo.isType(e)?vo.define({...vo.getDefinition(e),template:this.host,enhance:!0},e):vo.define({name:void 0,template:this.host,enhance:!0,hooks:new A(e)}))}o.done?(this.task=fa.done,this.create()):this.task=new Sa(o,this.create,this)}activate(t){const{task:e,host:n,viewModel:i,container:r,activator:s,strategy:o}=this,a=o;if(void 0===i)return void 0===this.createTask&&(this.createTask=new Sa(e,this.activate,this,t)),this.createTask;if(e.done)null==t||t.done?this.task=s.activate(n,i,r,a,void 0):this.task=new Sa(t,s.activate,s,n,i,r,a,void 0);else if(null==t||t.done)this.task=new Sa(e,s.activate,s,n,i,r,a,void 0);else{const o=new Sa(e,t.wait,t);this.task=new Sa(o,s.activate,s,n,i,r,a,void 0)}return this.task}deactivate(t){const{task:e,viewModel:n,activator:i,strategy:r}=this,s=r;if(void 0===n)return void 0===this.createTask&&(this.createTask=new Sa(e,this.deactivate,this,t)),this.createTask;if(e.done)null==t||t.done?this.task=i.deactivate(n,s):this.task=new Sa(t,i.deactivate,i,n,s);else if(null==t||t.done)this.task=new Sa(e,i.deactivate,i,n,s);else{const r=new Sa(e,t.wait,t);this.task=new Sa(r,i.deactivate,i,n,s)}return this.task}dispose(){var t;null===(t=this.controller)||void 0===t||t.dispose()}create(){const t=this.config,e=this.viewModel=vo.isType(t.component)?this.container.get(t.component):t.component,n=this.container,i=n.get(Jt);n.get(ya).enqueueBeforeCompileChildren(),this.controller=Aa.forCustomElement(e,i,this.host,n,null,this.strategy,!1,this.enhanceDefinition),this.controller.hydrateCustomElement(n,null)}}class Qa{constructor(t=i.a.createContainer()){if(t.has(Qa,!0))throw new Error("An instance of Aurelia is already registered with the container or an ancestor of it.");this.container=t,this.task=fa.done,this._isRunning=!1,this._isStarting=!1,this._isStopping=!1,this._root=void 0,this.next=void 0,i.i.instance(Qa,this).register(t),t.registerResolver(Wa,this.rootProvider=new i.e)}get isRunning(){return this._isRunning}get isStarting(){return this._isStarting}get isStopping(){return this._isStopping}get root(){if(null==this._root){if(null==this.next)throw new Error("root is not defined");return this.next}return this._root}register(...t){return this.container.register(...t),this}app(t){return this.configureRoot(t)}enhance(t){return this.configureRoot(t,!0)}start(t=this.next){if(null==t)throw new Error("There is no composition root");return this.stop(t),this.task.done?this.onBeforeStart(t):this.task=new Sa(this.task,this.onBeforeStart,this,t),this.task=this.root.activate(this.task),this.task.done?this.task=this.onAfterStart(t):this.task=new Sa(this.task,this.onAfterStart,this,t),this.task}stop(t=this._root){return this._isRunning&&null!=t&&(this.task.done?this.onBeforeStop(t):this.task=new Sa(this.task,this.onBeforeStop,this,t),this.task=t.deactivate(this.task),this.task.done?this.task=this.onAfterStop(t):this.task=new Sa(this.task,this.onAfterStop,this,t)),this.task}wait(){return this.task.wait()}dispose(){var t;if(this._isRunning||this._isStopping)throw new Error("The aurelia instance must be fully stopped before it can be disposed");null===(t=this._root)||void 0===t||t.dispose(),this._root=void 0,this.container.dispose()}configureRoot(t,e){return this.next=new Wa(t,this.container,this.rootProvider,e),this.isRunning&&this.start(),this}onBeforeStart(t){Reflect.set(t.host,"$aurelia",this),this.rootProvider.prepare(this._root=t),this._isStarting=!0}onAfterStart(t){return this._isRunning=!0,this._isStarting=!1,this.dispatchEvent(t,"aurelia-composed",t.dom),this.dispatchEvent(t,"au-started",t.host),fa.done}onBeforeStop(t){this._isRunning=!1,this._isStopping=!0}onAfterStop(t){return Reflect.deleteProperty(t.host,"$aurelia"),this._root=void 0,this.rootProvider.dispose(),this._isStopping=!1,this.dispatchEvent(t,"au-stopped",t.host),fa.done}dispatchEvent(t,e,n){(n="dispatchEvent"in n?n:t.dom).dispatchEvent(t.dom.createCustomEvent(e,{detail:this,bubbles:!0,cancelable:!0}))}}i.g.global.Aurelia=Qa;const Ja=i.a.createInterface("IDOMInitializer").noDefault(),Ga=[j,O],Ya=[ft,ht,dt,ut,pt,gt,vt],Za=[er,_i,Yt,qo,wa,class{constructor(){this.modelInstanceToBoundComponent=new WeakMap,this.modelTypeToUnboundComponent=new Map}static register(t){return i.i.singleton(Da,this).register(t)}getViewComponentForObject(t,e){if(t){const n=Ma.has(t.constructor)?Ma.get(t.constructor):[],i="function"==typeof e?e(t,n):this.getViewName(n,e);return this.getOrCreateBoundComponent(t,n,i)}return null}getOrCreateBoundComponent(t,e,n){let i,r=this.modelInstanceToBoundComponent.get(t);if(void 0===r?(r={},this.modelInstanceToBoundComponent.set(t,r)):i=r[n],void 0===i){const s=this.getOrCreateUnboundComponent(t,e,n);i=vo.define(vo.getDefinition(s),class extends s{constructor(){super(t)}}),r[n]=i}return i}getOrCreateUnboundComponent(t,e,n){let i,r=this.modelTypeToUnboundComponent.get(t.constructor);if(void 0===r?(r={},this.modelTypeToUnboundComponent.set(t.constructor,r)):i=r[n],void 0===i){i=vo.define(this.getView(e,n),class{constructor(t){this.viewModel=t}create(t,e,n){const i=this.viewModel;if(t.scope=oe.fromParent(t.flags,t.scope,i),void 0!==i.create)return i.create(t,e,n)}});const s=i.prototype;"beforeCompile"in t&&(s.beforeCompile=function(t){this.viewModel.beforeCompile(t)}),"afterCompile"in t&&(s.afterCompile=function(t){this.viewModel.afterCompile(t)}),"afterCompileChildren"in t&&(s.afterCompileChildren=function(t){this.viewModel.afterCompileChildren(t)}),"beforeBind"in t&&(s.beforeBind=function(t,e,n){return this.viewModel.beforeBind(t,e,n)}),"afterBind"in t&&(s.afterBind=function(t,e,n){return this.viewModel.afterBind(t,e,n)}),"afterAttach"in t&&(s.afterAttach=function(t,e,n){return this.viewModel.afterAttach(t,e,n)}),"afterAttachChildren"in t&&(s.afterAttachChildren=function(t,e){return this.viewModel.afterAttachChildren(t,e)}),"beforeDetach"in t&&(s.beforeDetach=function(t,e,n){return this.viewModel.beforeDetach(t,e,n)}),"beforeUnbind"in t&&(s.beforeUnbind=function(t,e,n){return this.viewModel.beforeUnbind(t,e,n)}),"afterUnbind"in t&&(s.afterUnbind=function(t,e,n){return this.viewModel.afterUnbind(t,e,n)}),"afterUnbindChildren"in t&&(s.afterUnbindChildren=function(t,e){return this.viewModel.afterUnbindChildren(t,e)}),"dispose"in t&&(s.dispose=function(){this.viewModel.dispose()}),r[n]=i}return i}getViewName(t,e){return e||(1===t.length?t[0].name:"default-view")}getView(t,e){const n=t.find(t=>t.name===e);if(void 0===n)throw new Error("Could not find view: "+e);return n}},pn.b,xo],Xa=[$s,Vs,Ns,Ms,Ds,zs,Xs,$o,Ha,as,es,ns,is,us,fs,rs,Ao],tc=[Xo,ta,Go,Yo,Zo,zo,Ko,Wo,Qo,Jo],ec={register:t=>t.register(...Za,...Xa,...tc,...Ga,...Ya),createContainer(){return this.register(i.a.createContainer())}};class nc{constructor(t,e){this.propName=t,this.mode=e}}class ic{constructor(t,e){this.name=t,this.containerless=e,this.bindables=Object.create(null)}static from(t){const e=new ic(t.name,t.containerless),n=t.bindables,r=$.toView;let s,o,a,c;for(o in n)s=n[o],void 0!==s.property&&(o=s.property),a=void 0!==s.attribute?s.attribute:Object(i.z)(o),c=void 0!==s.mode&&s.mode!==$.default?s.mode:r,e.bindables[a]=new nc(o,c);return e}}class rc{constructor(t,e,n){this.name=t,this.isTemplateController=e,this.noMultiBindings=n,this.bindables=Object.create(null),this.bindable=null}static from(t){const e=new rc(t.name,t.isTemplateController,t.noMultiBindings),n=t.bindables,i=void 0!==t.defaultBindingMode&&t.defaultBindingMode!==$.default?t.defaultBindingMode:$.toView;let r,s,o,a,c=!1,l=!1;for(s in n){if(r=n[s],void 0!==r.property&&(s=r.property),o=void 0!==r.mode&&r.mode!==$.default?r.mode:i,l=!0===r.primary,a=e.bindables[s]=new nc(s,o),l){if(c)throw new Error("primary already exists");c=!0,e.bindable=a}null===e.bindable&&(e.bindable=a)}return null===e.bindable&&(e.bindable=new nc("value",i)),e}}const sc=new WeakMap;class oc{constructor(t){this.elementLookup=Object.create(null),this.attributeLookup=Object.create(null),this.commandLookup=Object.create(null),this.container=t;const e=t.root;this.resourceResolvers=t.resourceResolvers,this.rootResourceResolvers=e.resourceResolvers}static getOrCreate(t){let e=sc.get(t);return void 0===e&&sc.set(t,e=new oc(t)),e}getElementInfo(t){let e=this.elementLookup[t];if(void 0===e){const n=this.find(vo,t);this.elementLookup[t]=e=null===n?null:ic.from(n)}return e}getAttributeInfo(t){let e=this.attributeLookup[t.target];if(void 0===e){const n=this.find(Ss,t.target);this.attributeLookup[t.target]=e=null===n?null:rc.from(n)}return e}getBindingCommand(t,e){const n=t.command;if(null===n)return null;let i=this.commandLookup[n];if(void 0===i){if(i=this.create(E,n),null===i){if(e)return null;throw new Error("Unknown binding command: "+n)}this.commandLookup[n]=i}return i}find(t,e){const n=t.keyFrom(e);let r=this.resourceResolvers[n];if(void 0===r&&(r=this.rootResourceResolvers[n],void 0===r))return null;if(null===r)return null;if("function"==typeof r.getFactory){const e=r.getFactory(this.container);if(null==e)return null;const n=i.f.getOwn(t.name,e.Type);return void 0===n?null:n}return null}create(t,e){const n=t.keyFrom(e);let i=this.resourceResolvers[n];if(void 0===i&&(i=this.rootResourceResolvers[n],void 0===i))return null;if(null===i)return null;const r=i.resolve(this.container,this.container);return void 0===r?null:r}}},function(t,e,n){"use strict";n.d(e,"c",(function(){return nt})),n.d(e,"g",(function(){return wn})),n.d(e,"b",(function(){return Yt})),n.d(e,"a",(function(){return Zt})),n.d(e,"d",(function(){return ie})),n.d(e,"f",(function(){return ee})),n.d(e,"e",(function(){return ne}));var i=n(0);const r=i.a.createInterface("IAttrSyntaxTransformer").noDefault();var s=n(1);class o{constructor(t){this.from=t,this.type="ha"}}class a{constructor(t,e){this.from=t,this.to=e,this.type="hb",this.preventDefault=!0,this.strategy=s.B.none}}class c{constructor(t,e){this.from=t,this.to=e,this.type="hb",this.preventDefault=!1,this.strategy=s.B.bubbling}}class l{constructor(t,e){this.from=t,this.to=e,this.type="hb",this.preventDefault=!1,this.strategy=s.B.capturing}}class h{constructor(t,e){this.value=t,this.to=e,this.type="he"}}class u{constructor(t){this.value=t,this.type="hf"}}class d{constructor(t){this.value=t,this.type="hg"}}class p{constructor(t,e,n){this.attr=t,this.from=e,this.to=n,this.type="hc"}}var f=function(t,e,n,i){var r,s=arguments.length,o=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(o=(s<3?r(o):s>3?r(e,n,o):r(e,n))||o);return s>3&&o&&Object.defineProperty(e,n,o),o};let g=(()=>{let t=class{constructor(){this.bindingType=4182}compile(t){return new a(t.expression,Object(s.Jb)(t,!1))}};return t=f([Object(s.Cb)("trigger")],t),t})(),v=(()=>{let t=class{constructor(){this.bindingType=4184}compile(t){return new c(t.expression,Object(s.Jb)(t,!1))}};return t=f([Object(s.Cb)("delegate")],t),t})(),b=(()=>{let t=class{constructor(){this.bindingType=4183}compile(t){return new l(t.expression,Object(s.Jb)(t,!1))}};return t=f([Object(s.Cb)("capture")],t),t})(),m=(()=>{let t=class{constructor(){this.bindingType=32}compile(t){const e=Object(s.Jb)(t,!1);return new p(e,t.expression,e)}};return t=f([Object(s.Cb)("attr")],t),t})(),y=(()=>{let t=class{constructor(){this.bindingType=32}compile(t){return new p("style",t.expression,Object(s.Jb)(t,!1))}};return t=f([Object(s.Cb)("style")],t),t})(),w=(()=>{let t=class{constructor(){this.bindingType=32}compile(t){return new p("class",t.expression,Object(s.Jb)(t,!1))}};return t=f([Object(s.Cb)("class")],t),t})(),C=(()=>{let t=class{constructor(){this.bindingType=4128}compile(t){return new s.mb(t.expression,Object(s.Jb)(t,!1))}};return t=f([Object(s.Cb)("ref")],t),t})();class S{constructor(t,e,n,i,r,s,o,a){this.dom=t,this.targetEvent=e,this.delegationStrategy=n,this.sourceExpression=i,this.target=r,this.preventDefault=s,this.eventManager=o,this.locator=a,this.interceptor=this,this.isBound=!1,this.$hostScope=null}callSource(t){const e=this.$scope.overrideContext;e.$event=t;const n=this.sourceExpression.evaluate(128,this.$scope,this.$hostScope,this.locator);return Reflect.deleteProperty(e,"$event"),!0!==n&&this.preventDefault&&t.preventDefault(),n}handleEvent(t){this.interceptor.callSource(t)}$bind(t,e,n){if(this.isBound){if(this.$scope===e)return;this.interceptor.$unbind(32|t)}this.$scope=e,this.$hostScope=n;const i=this.sourceExpression;i.hasBind&&i.bind(t,e,n,this.interceptor),this.handler=this.eventManager.addEventListener(this.dom,this.target,this.targetEvent,this,this.delegationStrategy),this.isBound=!0}$unbind(t){if(!this.isBound)return;const e=this.sourceExpression;e.hasUnbind&&e.unbind(t,this.$scope,this.$hostScope,this.interceptor),this.$scope=null,this.handler.dispose(),this.handler=null,this.isBound=!1}observeProperty(t,e,n){}handleChange(t,e,n){}dispose(){this.interceptor=void 0,this.sourceExpression=void 0,this.locator=void 0,this.target=void 0}}var k=function(t,e,n,i){var r,s=arguments.length,o=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(o=(s<3?r(o):s>3?r(e,n,o):r(e,n))||o);return s>3&&o&&Object.defineProperty(e,n,o),o},O=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};let j=(()=>{let t=class{constructor(t,e,n,i,r,s){this.scheduler=t,this.observerLocator=n,this.obj=i,this.propertyKey=r,this.targetAttribute=s,this.currentValue=null,this.oldValue=null,this.hasChanges=!1,this.task=null,this.type=67,this.persistentFlags=12295&e}getValue(){return this.currentValue}setValue(t,e){this.currentValue=t,this.hasChanges=t!==this.oldValue,0==(4096&e)&&this.flushChanges(e)}flushChanges(t){if(this.hasChanges){this.hasChanges=!1;const t=this.currentValue;switch(this.oldValue=t,this.targetAttribute){case"class":t?this.obj.classList.add(this.propertyKey):this.obj.classList.remove(this.propertyKey);break;case"style":{let e="",n=t;"string"==typeof n&&n.includes("!important")&&(e="important",n=n.replace("!important","")),this.obj.style.setProperty(this.propertyKey,n,e)}}}}handleMutation(t){let e=!1;for(let n=0,i=t.length;i>n;++n){const i=t[n];if("attributes"===i.type&&i.attributeName===this.propertyKey){e=!0;break}}if(e){let t;switch(this.targetAttribute){case"class":t=this.obj.classList.contains(this.propertyKey);break;case"style":t=this.obj.style.getPropertyValue(this.propertyKey);break;default:throw new Error("Unsupported targetAttribute: "+this.targetAttribute)}if(t!==this.currentValue){const{currentValue:e}=this;this.currentValue=this.oldValue=t,this.hasChanges=!1,this.callSubscribers(t,e,0)}}}subscribe(t){this.hasSubscribers()||(this.currentValue=this.oldValue=this.obj.getAttribute(this.propertyKey),T(this.obj,this)),this.addSubscriber(t)}unsubscribe(t){this.removeSubscriber(t),this.hasSubscribers()||x(this.obj,this)}};return t=k([Object(s.Ob)(),O("design:paramtypes",[Object,Number,Object,Object,String,String])],t),t})();const T=(t,e)=>{void 0===t.$eMObservers&&(t.$eMObservers=new Set),void 0===t.$mObserver&&(t.$mObserver=s.A.createNodeObserver(t,A,{attributes:!0})),t.$eMObservers.add(e)},x=(t,e)=>{const n=t.$eMObservers;return!(!n||!n.delete(e))&&(0===n.size&&(t.$mObserver.disconnect(),t.$mObserver=void 0),!0)},A=t=>{t[0].target.$eMObservers.forEach(R,t)};function R(t){t.handleMutation(this)}var P=function(t,e,n,i){var r,s=arguments.length,o=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(o=(s<3?r(o):s>3?r(e,n,o):r(e,n))||o);return s>3&&o&&Object.defineProperty(e,n,o),o},I=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};const{oneTime:E,toView:V,fromView:$}=s.o,N=V|E,F={reusable:!1,preempt:!0};let B=(()=>{let t=class{constructor(t,e,n,i,r,o,a){this.sourceExpression=t,this.targetAttribute=n,this.targetProperty=i,this.mode=r,this.observerLocator=o,this.locator=a,this.interceptor=this,this.isBound=!1,this.$scope=null,this.$hostScope=null,this.task=null,this.persistentFlags=0,this.target=e,s.Db.assignIdTo(this),this.$scheduler=a.get(s.R)}updateTarget(t,e){e|=this.persistentFlags,this.targetObserver.setValue(t,8|e)}updateSource(t,e){e|=this.persistentFlags,this.sourceExpression.assign(16|e,this.$scope,this.$hostScope,this.locator,t)}handleChange(t,e,n){var i,r;if(!this.isBound)return;n|=this.persistentFlags;const o=this.mode,a=this.interceptor,c=this.sourceExpression,l=this.$scope,h=this.locator;if(o===s.o.fromView&&(n&=-9,n|=16),8&n){const e=this.targetObserver,s=0==(32&n)&&(64&e.type)>0,u=e.getValue();return(10082!==c.$kind||this.observerSlots>1)&&(t=c.evaluate(n,l,this.$hostScope,h)),t!==u&&(s&&(n|=4096,null===(i=this.task)||void 0===i||i.cancel(),null===(r=e.task)||void 0===r||r.cancel(),e.task=this.task=this.$scheduler.queueRenderTask(()=>{var t,i;null===(i=(t=e).flushChanges)||void 0===i||i.call(t,n),this.task=e.task=null},F)),a.updateTarget(t,n)),void(0==(o&E)&&(this.version++,c.connect(n,l,this.$hostScope,a),a.unobserve(!1)))}if(!(16&n))throw new Error("Unexpected handleChange context in AttributeBinding");t!==this.sourceExpression.evaluate(n,l,this.$hostScope,h)&&a.updateSource(t,n)}$bind(t,e,n,i){if(this.isBound){if(this.$scope===e)return;this.interceptor.$unbind(32|t)}this.persistentFlags=31751&t,this.$scope=e,this.$hostScope=n,this.projection=i;let r=this.sourceExpression;r.hasBind&&r.bind(t,e,n,this.interceptor);let s=this.targetObserver;s||(s=this.targetObserver=new j(this.$scheduler,t,this.observerLocator,this.target,this.targetProperty,this.targetAttribute)),s.bind&&s.bind(t),r=this.sourceExpression;const o=this.mode,a=this.interceptor;o&N&&a.updateTarget(r.evaluate(t,e,this.$hostScope,this.locator),t),o&V&&r.connect(t,e,this.$hostScope,this),o&$&&(s[this.id]|=16,s.subscribe(a)),this.isBound=!0}$unbind(t){if(!this.isBound)return;this.persistentFlags=0,this.sourceExpression.hasUnbind&&this.sourceExpression.unbind(t,this.$scope,this.$hostScope,this.interceptor),this.$scope=null;const e=this.targetObserver,n=this.task;e.unbind&&e.unbind(t),e.unsubscribe&&(e.unsubscribe(this.interceptor),e[this.id]&=-17),null!=n&&(n.cancel(),n===e.task&&(e.task=null),this.task=null),this.interceptor.unobserve(!0),this.isBound=!1}connect(t){this.isBound&&(t|=this.persistentFlags,this.sourceExpression.connect(128|t,this.$scope,this.$hostScope,this.interceptor))}dispose(){this.interceptor=void 0,this.sourceExpression=void 0,this.locator=void 0,this.targetObserver=void 0,this.target=void 0}};return t=P([Object(s.Db)(),I("design:paramtypes",[Object,Object,String,String,Number,Object,Object])],t),t})();class L{constructor(t,e,n,i,r){this.scheduler=t,this.propertyKey=i,this.namespace=r,this.currentValue=null,this.oldValue=null,this.hasChanges=!1,this.task=null,this.type=66,this.obj=n,this.persistentFlags=12295&e}getValue(){return this.currentValue}setValue(t,e){this.currentValue=t,this.hasChanges=t!==this.oldValue,0==(4096&e)&&this.flushChanges(e)}flushChanges(t){if(this.hasChanges){this.hasChanges=!1;const t=this.currentValue;this.oldValue=t,null==t?this.obj.removeAttributeNS(this.namespace,this.propertyKey):this.obj.setAttributeNS(this.namespace,this.propertyKey,t)}}bind(t){this.currentValue=this.oldValue=this.obj.getAttributeNS(this.namespace,this.propertyKey)}}var M=function(t,e,n,i){var r,s=arguments.length,o=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(o=(s<3?r(o):s>3?r(e,n,o):r(e,n))||o);return s>3&&o&&Object.defineProperty(e,n,o),o},D=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};const U=Object.prototype.toString;function q(t,e){return t===e}let _=(()=>{let t=class{constructor(t,e,n,i,r){this.scheduler=t,this.lifecycle=n,this.handler=i,this.obj=r,this.currentValue=void 0,this.oldValue=void 0,this.hasChanges=!1,this.task=null,this.type=67,this.collectionObserver=void 0,this.valueObserver=void 0,this.persistentFlags=12295&e}getValue(){return this.currentValue}setValue(t,e){this.currentValue=t,this.hasChanges=t!==this.oldValue,0==(4096&e)&&this.flushChanges(e)}flushChanges(t){if(this.hasChanges){this.hasChanges=!1;const e=this.oldValue=this.currentValue;void 0===this.valueObserver&&(void 0!==this.obj.$observers&&(void 0!==this.obj.$observers.model?this.valueObserver=this.obj.$observers.model:void 0!==this.obj.$observers.value&&(this.valueObserver=this.obj.$observers.value)),void 0!==this.valueObserver&&this.valueObserver.subscribe(this)),void 0!==this.collectionObserver&&(this.collectionObserver.unsubscribeFromCollection(this),this.collectionObserver=void 0),"checkbox"===this.obj.type&&(this.collectionObserver=Object(s.Hb)(t,this.lifecycle,e),void 0!==this.collectionObserver&&this.collectionObserver.subscribeToCollection(this)),this.synchronizeElement()}}handleCollectionChange(t,e){const n=this.currentValue,i=this.oldValue;this.oldValue=n,this.synchronizeElement(),this.callSubscribers(n,i,e)}handleChange(t,e,n){this.synchronizeElement(),this.callSubscribers(t,e,n),this.flushChanges(n)}synchronizeElement(){const t=this.currentValue,e=this.obj,n=Object.prototype.hasOwnProperty.call(e,"model")?e.model:e.value,i="radio"===e.type,r=void 0!==e.matcher?e.matcher:q;if(i)e.checked=!!r(t,n);else if(!0===t)e.checked=!0;else{let i=!1;switch(U.call(t)){case"[object Array]":i=-1!==t.findIndex(t=>!!r(t,n));break;case"[object Set]":for(const e of t)if(r(e,n)){i=!0;break}break;case"[object Map]":for(const e of t){const t=e[0],s=e[1];if(r(t,n)&&!0===s){i=!0;break}}}e.checked=i}}handleEvent(){let t=this.oldValue=this.currentValue;const e=this.obj,n=Object.prototype.hasOwnProperty.call(e,"model")?e.model:e.value,i=e.checked,r=void 0!==e.matcher?e.matcher:q;if("checkbox"===e.type){const e=U.call(t);if("[object Array]"===e){const e=t.findIndex(t=>!!r(t,n));return void(i&&-1===e?t.push(n):i||-1===e||t.splice(e,1))}if("[object Set]"===e){const e={};let s=e;for(const e of t)if(!0===r(e,n)){s=e;break}return void(i&&s===e?t.add(n):i||s===e||t.delete(s))}if("[object Map]"===e){let e;for(const i of t){const t=i[0];if(!0===r(t,n)){e=t;break}}return void t.set(e,i)}t=i}else{if(!i)return;t=n}this.currentValue=t,this.callSubscribers(this.currentValue,this.oldValue,0)}bind(t){this.currentValue=this.obj.checked}unbind(t){void 0!==this.collectionObserver&&(this.collectionObserver.unsubscribeFromCollection(this),this.collectionObserver=void 0),void 0!==this.valueObserver&&this.valueObserver.unsubscribe(this)}subscribe(t){this.hasSubscribers()||this.handler.subscribe(this.obj,this),this.addSubscriber(t)}unsubscribe(t){this.removeSubscriber(t),this.hasSubscribers()||this.handler.dispose()}};return t=M([Object(s.Ob)(),D("design:paramtypes",[Object,Number,Object,Object,Object])],t),t})();class H{constructor(t,e,n){this.scheduler=t,this.currentValue="",this.oldValue="",this.doNotCache=!0,this.nameIndex={},this.version=0,this.hasChanges=!1,this.isActive=!1,this.task=null,this.type=66,this.obj=n,this.persistentFlags=12295&e}getValue(){return this.currentValue}setValue(t,e){this.currentValue=t,this.hasChanges=t!==this.oldValue,0==(4096&e)&&this.flushChanges(e)}flushChanges(t){if(this.hasChanges){this.hasChanges=!1;const t=this.currentValue,e=this.nameIndex;let n=this.version;this.oldValue=t;const i=z(t);if(i.length>0&&this.addClassesAndUpdateIndex(i),this.version+=1,0===n)return;n-=1;for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&e[t]===n&&this.obj.classList.remove(t)}}addClassesAndUpdateIndex(t){const e=this.obj;for(let n=0,i=t.length;n<i;n++){const i=t[n];0!==i.length&&(this.nameIndex[i]=this.version,e.classList.add(i))}}}function z(t){function e(t){const e=t.match(/\S+/g);return null===e?i.g.emptyArray:e}if("string"==typeof t)return e(t);if(t instanceof Array){const e=t.length;if(e>0){const n=[];for(let i=0;i<e;++i)n.push(...z(t[i]));return n}return i.g.emptyArray}if(t instanceof Object){const n=[];for(const i in t)Boolean(t[i])&&(i.includes(" ")?n.push(...e(i)):n.push(i));return n}return i.g.emptyArray}class K{constructor(t,e,n,i){this.scheduler=t,this.propertyKey=i,this.currentValue=null,this.oldValue=null,this.hasChanges=!1,this.task=null,this.type=66,this.obj=n,this.persistentFlags=12295&e}getValue(){return this.currentValue}setValue(t,e){this.currentValue=t,this.hasChanges=t!==this.oldValue,0==(4096&e)&&this.flushChanges(e)}flushChanges(t){if(this.hasChanges){this.hasChanges=!1;const t=this.currentValue;this.oldValue=t,null==t?this.obj.removeAttribute(this.propertyKey):this.obj.setAttribute(this.propertyKey,t)}}bind(t){this.currentValue=this.oldValue=this.obj.getAttribute(this.propertyKey)}}class W{constructor(t,e,n,i){this.scheduler=t,this.obj=n,this.propertyKey=i,this.currentValue=void 0,this.oldValue=void 0,this.hasChanges=!1,this.task=null,this.type=66,this.persistentFlags=12295&e}getValue(){return this.currentValue}setValue(t,e){this.currentValue=t,this.hasChanges=t!==this.oldValue,0==(4096&e)&&this.flushChanges(e)}flushChanges(t){if(this.hasChanges){this.hasChanges=!1;const t=this.currentValue;this.oldValue=t,this.obj[this.propertyKey]=t}}bind(t){this.currentValue=this.oldValue=this.obj[this.propertyKey]}}function Q(t){return t.composedPath&&t.composedPath()[0]||t.deepPath&&t.deepPath()[0]||t.path&&t.path[0]||t.target}function J(){this.standardStopPropagation(),this.propagationStopped=!0}function G(t){t.propagationStopped=!1;let e=Q(t);const n=[];for(;e;){if(e.capturedCallbacks){const i=e.capturedCallbacks[t.type];i&&(t.stopPropagation!==J&&(t.standardStopPropagation=t.stopPropagation,t.stopPropagation=J),n.push(i))}e=e.parentNode}for(let e=n.length-1;e>=0&&!t.propagationStopped;e--){const i=n[e];"handleEvent"in i?i.handleEvent(t):i(t)}}function Y(t){t.propagationStopped=!1;let e=Q(t);for(;e&&!t.propagationStopped;){if(e.delegatedCallbacks){const n=e.delegatedCallbacks[t.type];n&&(t.stopPropagation!==J&&(t.standardStopPropagation=t.stopPropagation,t.stopPropagation=J),"handleEvent"in n?n.handleEvent(t):n(t))}e=e.parentNode}}class Z{constructor(t,e,n,i){this.dom=t,this.eventName=e,this.listener=n,this.capture=i,this.count=0}increment(){this.count++,1===this.count&&this.dom.addEventListener(this.eventName,this.listener,null,this.capture)}decrement(){this.count--,0===this.count&&this.dom.removeEventListener(this.eventName,this.listener,null,this.capture)}dispose(){this.count>0&&(this.count=0,this.dom.removeEventListener(this.eventName,this.listener,null,this.capture))}}class X{constructor(t,e,n,i){this.entry=t,this.lookup=e,this.targetEvent=n,e[n]=i}dispose(){this.entry.decrement(),this.lookup[this.targetEvent]=null}}class tt{constructor(t,e,n,i){this.dom=t,this.target=e,this.targetEvent=n,this.callback=i,t.addEventListener(n,i,e)}dispose(){this.dom.removeEventListener(this.targetEvent,this.callback,this.target)}}class et{constructor(t,e){this.dom=t,this.events=e,this.target=null,this.handler=null}subscribe(t,e){this.target=t,this.handler=e;const n=this.dom.addEventListener,i=this.events;for(let r=0,s=i.length;s>r;++r)n(i[r],e,t)}dispose(){const t=this.target,e=this.handler,n=this.events,i=this.dom;for(let r=0,s=n.length;s>r;++r)i.removeEventListener(n[r],e,t);this.target=this.handler=null}}const nt=i.a.createInterface("IEventManager").withDefault(t=>t.singleton(it));class it{constructor(){this.delegatedHandlers={},this.capturedHandlers={}}addEventListener(t,e,n,i,r){let o,a,c;if(r===s.B.bubbling){o=this.delegatedHandlers,c=o[n]||(o[n]=new Z(t,n,Y,!1)),c.increment();const r=e.delegatedCallbacks||(e.delegatedCallbacks={});return new X(c,r,n,i)}if(r===s.B.capturing){a=this.capturedHandlers,c=a[n]||(a[n]=new Z(t,n,G,!0)),c.increment();const r=e.capturedCallbacks||(e.capturedCallbacks={});return new X(c,r,n,i)}return new tt(t,e,n,i)}dispose(){let t;const{delegatedHandlers:e,capturedHandlers:n}=this;for(t in e)e[t].dispose();for(t in n)n[t].dispose()}}var rt=function(t,e,n,i){var r,s=arguments.length,o=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(o=(s<3?r(o):s>3?r(e,n,o):r(e,n))||o);return s>3&&o&&Object.defineProperty(e,n,o),o},st=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};const ot={childList:!0,subtree:!0,characterData:!0};function at(t,e){return t===e}let ct=(()=>{let t=class{constructor(t,e,n,i,r,s){this.scheduler=t,this.observerLocator=n,this.dom=i,this.handler=r,this.obj=s,this.currentValue=void 0,this.oldValue=void 0,this.hasChanges=!1,this.task=null,this.type=67,this.arrayObserver=void 0,this.nodeObserver=void 0,this.persistentFlags=12295&e}getValue(){return this.currentValue}setValue(t,e){this.currentValue=t,this.hasChanges=t!==this.oldValue,0==(4096&e)&&this.flushChanges(e)}flushChanges(t){if(this.hasChanges){this.hasChanges=!1;const e=this.currentValue,n=Array.isArray(e);if(this.oldValue=e,!n&&null!=e&&this.obj.multiple)throw new Error("Only null or Array instances can be bound to a multi-select.");this.arrayObserver&&(this.arrayObserver.unsubscribeFromCollection(this),this.arrayObserver=void 0),n&&(this.arrayObserver=this.observerLocator.getArrayObserver(t,e),this.arrayObserver.subscribeToCollection(this)),this.synchronizeOptions(),this.notify(t)}}handleCollectionChange(t,e){(32&e)>0||4096===this.persistentFlags?this.synchronizeOptions():this.hasChanges=!0,8192!==this.persistentFlags&&null===this.task&&(this.task=this.scheduler.queueRenderTask(()=>{this.flushChanges(e),this.task=null})),this.callSubscribers(this.currentValue,this.oldValue,e)}handleChange(t,e,n){(32&n)>0||4096===this.persistentFlags?this.synchronizeOptions():this.hasChanges=!0,8192!==this.persistentFlags&&null===this.task&&(this.task=this.scheduler.queueRenderTask(()=>{this.flushChanges(n),this.task=null})),this.callSubscribers(t,e,n)}notify(t){if((32&t)>0||4096===this.persistentFlags)return;const e=this.oldValue,n=this.currentValue;n!==e&&this.callSubscribers(n,e,t)}handleEvent(){this.synchronizeValue()&&this.callSubscribers(this.currentValue,this.oldValue,0)}synchronizeOptions(t){const{currentValue:e,obj:n}=this,i=Array.isArray(e),r=void 0!==n.matcher?n.matcher:at,s=n.options;let o=s.length;for(;o-- >0;){const t=s[o],n=Object.prototype.hasOwnProperty.call(t,"model")?t.model:t.value;i?t.selected=-1!==e.findIndex(t=>!!r(n,t)):t.selected=!!r(n,e)}}synchronizeValue(){const t=this.obj,e=t.options,n=e.length,i=this.currentValue;let r=0;if(t.multiple){if(!Array.isArray(i))return!0;let s;const o=t.matcher||at,a=[];for(;r<n;)s=e[r],s.selected&&a.push(Object.prototype.hasOwnProperty.call(s,"model")?s.model:s.value),++r;for(r=0;r<i.length;){const t=i[r];-1===a.findIndex(e=>!!o(t,e))?i.splice(r,1):++r}for(r=0;r<a.length;){const t=a[r];-1===i.findIndex(e=>!!o(t,e))&&i.push(t),++r}return!1}let s=null;for(;r<n;){const t=e[r];if(t.selected){s=Object.prototype.hasOwnProperty.call(t,"model")?t.model:t.value;break}++r}return this.oldValue=this.currentValue,this.currentValue=s,!0}bind(t){this.nodeObserver=this.dom.createNodeObserver(this.obj,this.handleNodeChange,ot)}unbind(t){this.nodeObserver.disconnect(),this.nodeObserver=null,this.arrayObserver&&(this.arrayObserver.unsubscribeFromCollection(this),this.arrayObserver=null)}handleNodeChange(){this.synchronizeOptions();this.synchronizeValue()&&this.notify(0)}subscribe(t){this.hasSubscribers()||this.handler.subscribe(this.obj,this),this.addSubscriber(t)}unsubscribe(t){this.removeSubscriber(t),this.hasSubscribers()||this.handler.dispose()}};return rt([i.m,st("design:type",Function),st("design:paramtypes",[]),st("design:returntype",void 0)],t.prototype,"handleNodeChange",null),t=rt([Object(s.Ob)(),st("design:paramtypes",[Object,Number,Object,Object,Object,Object])],t),t})();class lt{constructor(t,e,n){this.scheduler=t,this.currentValue="",this.oldValue="",this.styles={},this.version=0,this.hasChanges=!1,this.task=null,this.type=66,this.obj=n,this.persistentFlags=12295&e}getValue(){return this.obj.style.cssText}setValue(t,e){this.currentValue=t,this.hasChanges=t!==this.oldValue,0==(4096&e)&&this.flushChanges(e)}getStyleTuplesFromString(t){const e=[],n=/\s*([\w-]+)\s*:\s*((?:(?:[\w-]+\(\s*(?:"(?:\\"|[^"])*"|'(?:\\'|[^'])*'|[\w-]+\(\s*(?:[^"](?:\\"|[^"])*"|'(?:\\'|[^'])*'|[^)]*)\),?|[^)]*)\),?|"(?:\\"|[^"])*"|'(?:\\'|[^'])*'|[^;]*),?\s*)+);?/g;let i,r;for(;null!==(i=n.exec(t));)r=i[1],0!==r.length&&e.push([r,i[2]]);return e}getStyleTuplesFromObject(t){let e;const n=[];for(const r in t)e=t[r],null!=e&&("string"!=typeof e?n.push(...this.getStyleTuples(e)):n.push([Object(i.z)(r),e]));return n}getStyleTuplesFromArray(t){const e=t.length;if(e>0){const n=[];for(let i=0;i<e;++i)n.push(...this.getStyleTuples(t[i]));return n}return i.g.emptyArray}getStyleTuples(t){return"string"==typeof t?this.getStyleTuplesFromString(t):t instanceof Array?this.getStyleTuplesFromArray(t):t instanceof Object?this.getStyleTuplesFromObject(t):i.g.emptyArray}flushChanges(t){if(this.hasChanges){this.hasChanges=!1;const t=this.currentValue,e=this.styles,n=this.getStyleTuples(t);let i,r,s,o,a=this.version;this.oldValue=t;const c=n.length;for(let t=0;t<c;++t)r=n[t],s=r[0],o=r[1],this.setProperty(s,o),e[s]=a;if(this.styles=e,this.version+=1,0===a)return;for(i in a-=1,e)Object.prototype.hasOwnProperty.call(e,i)&&e[i]===a&&this.obj.style.removeProperty(i)}}setProperty(t,e){let n="";null!=e&&"function"==typeof e.indexOf&&e.includes("!important")&&(n="important",e=e.replace("!important","")),this.obj.style.setProperty(t,e,n)}bind(t){this.currentValue=this.oldValue=this.obj.style.cssText}}const ht=i.a.createInterface("ISVGAnalyzer").withDefault(t=>t.singleton(class{isStandardSvgAttribute(t,e){return!1}}));var ut=function(t,e,n,i){var r,s=arguments.length,o=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(o=(s<3?r(o):s>3?r(e,n,o):r(e,n))||o);return s>3&&o&&Object.defineProperty(e,n,o),o},dt=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};let pt=(()=>{let t=class{constructor(t,e,n,i,r){this.scheduler=t,this.handler=n,this.obj=i,this.propertyKey=r,this.currentValue="",this.oldValue="",this.hasChanges=!1,this.task=null,this.type=67,this.persistentFlags=12295&e}getValue(){return this.currentValue}setValue(t,e){this.currentValue=t,this.hasChanges=t!==this.oldValue,0==(4096&e)&&this.flushChanges(e)}flushChanges(t){if(this.hasChanges){this.hasChanges=!1;const e=this.currentValue,n=this.oldValue;this.oldValue=e,this.obj[this.propertyKey]=null==e?"":e,0==(32&t)&&this.callSubscribers(e,n,t)}}handleEvent(){const t=this.oldValue=this.currentValue,e=this.currentValue=this.obj[this.propertyKey];t!==e&&(this.oldValue=e,this.callSubscribers(e,t,0))}subscribe(t){this.hasSubscribers()||(this.handler.subscribe(this.obj,this),this.currentValue=this.oldValue=this.obj[this.propertyKey]),this.addSubscriber(t)}unsubscribe(t){this.removeSubscriber(t),this.hasSubscribers()||this.handler.dispose()}};return t=ut([Object(s.Ob)(),dt("design:paramtypes",[Object,Number,Object,Object,String])],t),t})();var ft=function(t,e,n,i){var r,s=arguments.length,o=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(o=(s<3?r(o):s>3?r(e,n,o):r(e,n))||o);return s>3&&o&&Object.defineProperty(e,n,o),o},gt=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},vt=function(t,e){return function(n,i){e(n,i,t)}};const bt="http://www.w3.org/1999/xlink",mt="http://www.w3.org/XML/1998/namespace",yt="http://www.w3.org/2000/xmlns/",wt=Object.assign(Object.create(null),{"xlink:actuate":["actuate",bt],"xlink:arcrole":["arcrole",bt],"xlink:href":["href",bt],"xlink:role":["role",bt],"xlink:show":["show",bt],"xlink:title":["title",bt],"xlink:type":["type",bt],"xml:lang":["lang",mt],"xml:space":["space",mt],xmlns:["xmlns",yt],"xmlns:xlink":["xlink",yt]}),Ct=["change","input"],St=["change"],kt=["change","input","blur","keyup","paste"],Ot=["scroll"],jt=Object.assign(Object.create(null),{class:!0,style:!0,css:!0,checked:!0,value:!0,model:!0,"xlink:actuate":!0,"xlink:arcrole":!0,"xlink:href":!0,"xlink:role":!0,"xlink:show":!0,"xlink:title":!0,"xlink:type":!0,"xml:lang":!0,"xml:space":!0,xmlns:!0,"xmlns:xlink":!0});let Tt=(()=>{let t=class{constructor(t,e){this.dom=t,this.svgAnalyzer=e}static register(t){return i.i.singleton(s.T,this).register(t)}getObserver(t,e,n,i,r,o){switch(o){case"checked":return new _(e,t,n,new et(this.dom,Ct),r);case"value":return"SELECT"===r.tagName?new ct(e,t,i,this.dom,new et(this.dom,St),r):new pt(e,t,new et(this.dom,Ct),r,o);case"files":return new pt(e,t,new et(this.dom,Ct),r,o);case"textContent":case"innerHTML":return new pt(e,t,new et(this.dom,kt),r,o);case"scrollTop":case"scrollLeft":return new pt(e,t,new et(this.dom,Ot),r,o);case"class":return new H(e,t,r);case"style":case"css":return new lt(e,t,r);case"model":return new s.qb(n,t,r,o);case"role":return new K(e,t,r,o);default:if(void 0!==wt[o]){const n=wt[o];return new L(e,t,r,n[0],n[1])}if(Rt(r,o,this.svgAnalyzer))return new K(e,t,r,o)}return null}overridesAccessor(t,e,n){return!0===jt[n]}handles(t,e){return this.dom.isNodeInstance(e)}};return t=ft([vt(0,s.J),vt(1,ht),gt("design:paramtypes",[Object,Object])],t),t})(),xt=(()=>{let t=class{constructor(t,e){this.dom=t,this.svgAnalyzer=e}static register(t){return i.i.singleton(s.S,this).register(t)}getAccessor(t,e,n,i,r){switch(r){case"textContent":return new W(e,t,i,r);case"class":return new H(e,t,i);case"style":case"css":return new lt(e,t,i);case"src":case"href":case"role":return new K(e,t,i,r);default:if(void 0!==wt[r]){const n=wt[r];return new L(e,t,i,n[0],n[1])}return Rt(i,r,this.svgAnalyzer)?new K(e,t,i,r):new W(e,t,i,r)}}handles(t,e){return this.dom.isNodeInstance(e)}};return t=ft([vt(0,s.J),vt(1,ht),gt("design:paramtypes",[Object,Object])],t),t})();const At={};function Rt(t,e,n){if(!0===At[e])return!0;const i=e.slice(0,5);return At[e]="aria-"===i||"data-"===i||n.isStandardSvgAttribute(t,e)}var Pt=function(t,e,n,i){var r,s=arguments.length,o=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(o=(s<3?r(o):s>3?r(e,n,o):r(e,n))||o);return s>3&&o&&Object.defineProperty(e,n,o),o};let It=(()=>{let t=class{bind(t,e,n,i){i.targetObserver=new K(i.locator.get(s.R),t,i.target,i.targetProperty)}unbind(t,e,n,i){}};return t=Pt([Object(s.Bb)("attr")],t),t})();var Et=function(t,e,n,i){var r,s=arguments.length,o=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(o=(s<3?r(o):s>3?r(e,n,o):r(e,n))||o);return s>3&&o&&Object.defineProperty(e,n,o),o};function Vt(t){const e=Q(t);if(this.target===e)return this.selfEventCallSource(t)}let $t=(()=>{let t=class{bind(t,e,n,r){if(!r.callSource||!r.targetEvent)throw i.j.error(8);r.selfEventCallSource=r.callSource,r.callSource=Vt}unbind(t,e,n,i){i.callSource=i.selfEventCallSource,i.selfEventCallSource=null}};return t=Et([Object(s.Bb)("self")],t),t})();var Nt=function(t,e,n,i){var r,s=arguments.length,o=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(o=(s<3?r(o):s>3?r(e,n,o):r(e,n))||o);return s>3&&o&&Object.defineProperty(e,n,o),o},Ft=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},Bt=function(t,e){return function(n,i){e(n,i,t)}};let Lt=(()=>{let t=class{constructor(t){this.observerLocator=t}bind(t,e,n,r,...o){if(0===o.length)throw i.j.error(9);if(r.mode!==s.o.twoWay&&r.mode!==s.o.fromView)throw i.j.error(10);this.persistentFlags=31751&t;const a=this.observerLocator.getObserver(this.persistentFlags|t,r.target,r.targetProperty);if(!a.handler)throw i.j.error(10);r.targetObserver=a,a.originalHandler=r.targetObserver.handler,a.handler=new et(r.locator.get(s.J),o)}unbind(t,e,n,i){i.targetObserver.handler.dispose(),i.targetObserver.handler=i.targetObserver.originalHandler,i.targetObserver.originalHandler=null}};return t=Nt([Object(s.Bb)("updateTrigger"),Bt(0,s.O),Ft("design:paramtypes",[Object])],t),t})();const Mt=Object.freeze({applyTo:i.g.noop}),Dt=i.a.createInterface("IShadowDOMStyles").noDefault(),Ut=i.a.createInterface("IShadowDOMGlobalStyles").withDefault(t=>t.instance(Mt));class qt{constructor(t,e,n,i=null){this.sharedStyles=i,this.styleSheets=e.map(e=>{let i;return e instanceof t.CSSStyleSheet?i=e:(i=n.get(e),i||(i=new t.CSSStyleSheet,i.replaceSync(e),n.set(e,i))),i})}static supported(t){return"adoptedStyleSheets"in t.ShadowRoot.prototype}applyTo(t){null!==this.sharedStyles&&this.sharedStyles.applyTo(t),t.adoptedStyleSheets=[...t.adoptedStyleSheets,...this.styleSheets]}}class _t{constructor(t,e,n=null){this.dom=t,this.localStyles=e,this.sharedStyles=n}applyTo(t){const e=this.localStyles,n=this.dom;for(let i=e.length-1;i>-1;--i){const r=n.createElement("style");r.innerHTML=e[i],t.prepend(r)}null!==this.sharedStyles&&this.sharedStyles.applyTo(t)}}const Ht={mode:"open"};const zt={childList:!0};class Kt{constructor(t,e,n,r){let o;this.dom=t,this.$controller=e,this.host=n,o=r.shadowOptions instanceof Object&&"mode"in r.shadowOptions?r.shadowOptions:Ht,this.shadowRoot=n.attachShadow(o),i.f.define(s.x.name,e,this.host),i.f.define(s.x.name,e,this.shadowRoot)}get children(){return this.host.childNodes}subscribeToChildrenChange(t,e=zt){this.dom.createNodeObserver(this.host,t,e)}provideEncapsulationSource(){return this.shadowRoot}project(t){const e=this.$controller.context;(e.has(Dt,!1)?e.get(Dt):e.get(Ut)).applyTo(this.shadowRoot),t.appendTo(this.shadowRoot)}take(t){t.remove(),t.unlink()}}class Wt{constructor(t,e,n){n.childNodes.length?this.childNodes=Object(i.F)(n.childNodes):this.childNodes=i.g.emptyArray,this.host=t.convertToRenderLocation(n),i.f.define(s.x.name,e,this.host)}get children(){return this.childNodes}subscribeToChildrenChange(t){}provideEncapsulationSource(){return this.host.getRootNode()}project(t){t.insertBefore(this.host)}take(t){t.remove(),t.unlink()}}class Qt{constructor(t,e,n){this.host=e,this.enhance=n,i.f.define(s.x.name,t,e)}get children(){return this.host.childNodes}subscribeToChildrenChange(t){}provideEncapsulationSource(){return this.host.getRootNode()}project(t){t.appendTo(this.host,this.enhance)}take(t){t.remove(),t.unlink()}}var Jt;!function(t){t[t.Element=1]="Element",t[t.Attr=2]="Attr",t[t.Text=3]="Text",t[t.CDATASection=4]="CDATASection",t[t.EntityReference=5]="EntityReference",t[t.Entity=6]="Entity",t[t.ProcessingInstruction=7]="ProcessingInstruction",t[t.Comment=8]="Comment",t[t.Document=9]="Document",t[t.DocumentType=10]="DocumentType",t[t.DocumentFragment=11]="DocumentFragment",t[t.Notation=12]="Notation"}(Jt||(Jt={}));const Gt=new WeakMap;class Yt{constructor(t,e,n,r,o,a,c,l){this.window=t,this.document=e,this.Node=n,this.Element=r,this.HTMLElement=o,this.CustomEvent=a,this.CSSStyleSheet=c,this.ShadowRoot=l,s.A.isInitialized&&(i.j.write(1001),s.A.destroy()),s.A.initialize(this),this.emptyNodes=new Xt(this,e.createDocumentFragment())}static register(t){return i.i.aliasTo(s.J,this).register(t)}addEventListener(t,e,n,i){(n||this.document).addEventListener(t,e,i)}appendChild(t,e){t.appendChild(e)}cloneNode(t,e){return t.cloneNode(!1!==e)}convertToRenderLocation(t){if(this.isRenderLocation(t))return t;if(null==t.parentNode)throw i.j.error(52);const e=this.document.createComment("au-end"),n=this.document.createComment("au-start");return t.parentNode.replaceChild(e,t),e.parentNode.insertBefore(n,e),e.$start=n,n.$nodes=null,e}createDocumentFragment(t){if(null==t)return this.document.createDocumentFragment();if(this.isNodeInstance(t)){if(void 0!==t.content)return t.content;const e=this.document.createDocumentFragment();return e.appendChild(t),e}return this.createTemplate(t).content}createNodeSequence(t,e=!0){return null===t?this.emptyNodes:new Xt(this,e?t.cloneNode(!0):t)}createElement(t){return this.document.createElement(t)}fetch(t,e){return this.window.fetch(t,e)}createCustomEvent(t,e){return new this.CustomEvent(t,e)}dispatchEvent(t){this.document.dispatchEvent(t)}createNodeObserver(t,e,n){if("undefined"==typeof MutationObserver)return{disconnect(){},observe(){},takeRecords:()=>i.g.emptyArray};const r=new MutationObserver(e);return r.observe(t,n),r}createTemplate(t){if(null==t)return this.document.createElement("template");const e=this.document.createElement("template");return e.innerHTML=t.toString(),e}createTextNode(t){return this.document.createTextNode(t)}getEffectiveParentNode(t){if(Gt.has(t))return Gt.get(t);let e=0,n=t.nextSibling;for(;null!==n;){if(8===n.nodeType)switch(n.textContent){case"au-start":++e;break;case"au-end":if(0==e--)return n}n=n.nextSibling}if(null===t.parentNode&&11===t.nodeType){const e=s.x.for(t);if(void 0===e)return null;const n=e.projector;if(n instanceof Kt)return this.getEffectiveParentNode(n.host)}return t.parentNode}setEffectiveParentNode(t,e){if(this.isNodeInstance(t))Gt.set(t,e);else{const n=t.childNodes;for(let t=0,i=n.length;t<i;++t)Gt.set(n[t],e)}}insertBefore(t,e){e.parentNode.insertBefore(t,e)}isMarker(t){return"AU-M"===t.nodeName}isNodeInstance(t){return null!=t&&t.nodeType>0}isRenderLocation(t){return"au-end"===t.textContent}makeTarget(t){t.className="au"}registerElementResolver(t,e){t.registerResolver(s.N,e),t.registerResolver(this.Node,e),t.registerResolver(this.Element,e),t.registerResolver(this.HTMLElement,e)}remove(t){t.remove?t.remove():t.parentNode.removeChild(t)}removeEventListener(t,e,n,i){(n||this.document).removeEventListener(t,e,i)}setAttribute(t,e,n){t.setAttribute(e,n)}}const Zt=s.A;class Xt{constructor(t,e){this.dom=t,this.fragment=e,this.isMounted=!1,this.isLinked=!1,this.next=void 0,this.refNode=void 0;const n=e.querySelectorAll(".au");let i=0,r=n.length;const s=this.targets=Array(r);for(;i<r;){const t=n[i];"AU-M"===t.nodeName?s[i]=this.dom.convertToRenderLocation(t):s[i]=t,++i}const o=e.childNodes;i=0,r=o.length;const a=this.childNodes=Array(r);for(;i<r;)a[i]=o[i],++i;this.firstChild=e.firstChild,this.lastChild=e.lastChild}findTargets(){return this.targets}insertBefore(t){if(this.isLinked&&this.refNode)this.addToLinked();else{const e=t.parentNode;if(this.isMounted){let n=this.firstChild;const i=this.lastChild;let r;for(;null!=n&&(r=n.nextSibling,e.insertBefore(n,t),n!==i);)n=r}else this.isMounted=!0,t.parentNode.insertBefore(this.fragment,t)}}appendTo(t,e=!1){if(this.isMounted){let e=this.firstChild;const n=this.lastChild;let i;for(;null!=e&&(i=e.nextSibling,t.appendChild(e),e!==n);)e=i}else this.isMounted=!0,e||t.appendChild(this.fragment)}remove(){if(this.isMounted){this.isMounted=!1;const t=this.fragment,e=this.lastChild;let n,i=this.firstChild;for(;null!==i&&(n=i.nextSibling,t.appendChild(i),i!==e);)i=n}}addToLinked(){const t=this.refNode,e=t.parentNode;if(this.isMounted){let n=this.firstChild;const i=this.lastChild;let r;for(;null!=n&&(r=n.nextSibling,e.insertBefore(n,t),n!==i);)n=r}else this.isMounted=!0,e.insertBefore(this.fragment,t)}unlink(){this.isLinked=!1,this.next=void 0,this.refNode=void 0}link(t){this.isLinked=!0,this.dom.isRenderLocation(t)?this.refNode=t:(this.next=t,this.obtainRefNode())}obtainRefNode(){void 0!==this.next?this.refNode=this.next.firstChild:this.refNode=void 0}}var te;(te=class{constructor(t){this.nextSibling=t,this.textContent=""}get parentNode(){return this.nextSibling.parentNode}remove(){}}.prototype).previousSibling=null,te.childNodes=i.g.emptyArray,te.nodeName="AU-M",te.nodeType=1;const ee=i.a.createInterface("IWindow").withDefault(t=>t.callback(t=>t.get(Yt).window)),ne=i.a.createInterface("ILocation").withDefault(t=>t.callback(t=>t.get(ee).location)),ie=i.a.createInterface("IHistory").withDefault(t=>t.callback(t=>t.get(ee).history));var re=function(t,e,n,i){var r,s=arguments.length,o=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(o=(s<3?r(o):s>3?r(e,n,o):r(e,n))||o);return s>3&&o&&Object.defineProperty(e,n,o),o},se=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},oe=function(t,e){return function(n,i){e(n,i,t)}};const ae=Symbol(),ce={passive:!0,capture:!0},le={passive:!0},he=new WeakMap;class ue{constructor(t,e){this.dom=t,this.scheduler=e,this.blurs=[],he.set(t.document,this),this.handler=fe(this,this.blurs)}static createFor(t,e){return he.get(t.document)||new ue(t,e)}register(t){const e=this.blurs;e.includes(t)||1!==e.push(t)||this.addListeners()}unregister(t){const e=this.blurs,n=e.indexOf(t);n>-1&&e.splice(n,1),0===e.length&&this.removeListeners()}addListeners(){const t=this.dom,e=t.document,n=t.window,i=this.handler;n.navigator.pointerEnabled&&e.addEventListener("pointerdown",i,ce),e.addEventListener("touchstart",i,ce),e.addEventListener("mousedown",i,ce),e.addEventListener("focus",i,ce),n.addEventListener("blur",i,le)}removeListeners(){const t=this.dom,e=t.document,n=t.window,i=this.handler;n.navigator.pointerEnabled&&e.removeEventListener("pointerdown",i,ce),e.removeEventListener("touchstart",i,ce),e.removeEventListener("mousedown",i,ce),e.removeEventListener("focus",i,ce),n.removeEventListener("blur",i,le)}}let de=(()=>{let t=class{constructor(t,e,n){this.dom=e,this.element=t,this.linkedMultiple=!0,this.searchSubTree=!0,this.linkingContext=null,this.value=ae,this.manager=ue.createFor(e,n)}afterAttachChildren(){this.manager.register(this)}beforeDetach(){this.manager.unregister(this)}handleEventTarget(t){if(!1===this.value)return;const e=this.dom;t!==e.window&&t!==e.document&&this.contains(t)||this.triggerBlur()}contains(t){if(!this.value)return!1;let e,n,r,s,o;const a=this.element;if(pe(a,t))return!0;if(!this.linkedWith)return!1;const c=this.dom.document,l=this.linkedWith,h=this.linkingContext,u=this.searchSubTree,d=this.linkedMultiple,p=Array.isArray(l)?l:[l],f=("string"==typeof h?c.querySelector(h):h)||c.body,g=p.length;for(n=0;g>n;++n)if(o=p[n],"string"==typeof o){if(u){if(d)e=f.querySelectorAll(o);else{const t=f.querySelector(o);e=null!==t?[t]:i.g.emptyArray}for(s=e.length,r=0;s>r;++r)if(e[r].contains(t))return!0}else for(e=f.children,s=e.length,r=0;s>r;++r)if(e[r].matches(o))return!0}else if(o&&o.contains(t))return!0;return!1}triggerBlur(){this.value=!1,"function"==typeof this.onBlur&&this.onBlur.call(null)}};return re([Object(s.Ab)(),se("design:type",Object)],t.prototype,"value",void 0),re([Object(s.Ab)(),se("design:type",Function)],t.prototype,"onBlur",void 0),re([Object(s.Ab)(),se("design:type",Object)],t.prototype,"linkedWith",void 0),re([Object(s.Ab)(),se("design:type",Boolean)],t.prototype,"linkedMultiple",void 0),re([Object(s.Ab)(),se("design:type",Boolean)],t.prototype,"searchSubTree",void 0),re([Object(s.Ab)(),se("design:type",Object)],t.prototype,"linkingContext",void 0),t=re([Object(s.Eb)("blur"),oe(0,s.N),oe(1,s.J),oe(2,s.R),se("design:paramtypes",[Object,Yt,Object])],t),t})();const pe=(t,e)=>{if(t.contains(e))return!0;let n=null;for(;null!=e;){if(e===t)return!0;n=e.parentNode,null!==n||11!==e.nodeType?e=n:e=e.host}return!1},fe=(t,e)=>{let n=!1;const i=()=>{n=!1},r=()=>{n=!0,t.scheduler.queueRenderTask(i,{preempt:!0})},s=t=>{n||(o(t),r())},o=t=>{const n=t.composed?t.composedPath()[0]:t.target;if(null!==n)for(let t=0,i=e.length;t<i;++t)e[t].handleEventTarget(n)};return{onpointerdown:s,ontouchstart:s,onmousedown:s,onfocus:i=>{if(n)return;if(i.target===t.dom.window)for(let t=0,n=e.length;n>t;++t)e[t].triggerBlur();else o(i);r()},onblur:()=>{n=!1;for(let t=0,n=e.length;t<n;++t)e[t].triggerBlur()},handleEvent(t){this["on"+t.type](t)}}};var ge=function(t,e,n,i){var r,s=arguments.length,o=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(o=(s<3?r(o):s>3?r(e,n,o):r(e,n))||o);return s>3&&o&&Object.defineProperty(e,n,o),o},ve=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},be=function(t,e){return function(n,i){e(n,i,t)}};let me=(()=>{let t=class{constructor(t,e){this.dom=e,this.needsApply=!1,this.element=t}beforeBind(){this.valueChanged()}valueChanged(){this.$controller.isActive?this.apply():this.needsApply=!0}afterAttachChildren(){this.needsApply&&(this.needsApply=!1,this.apply());const t=this.element;t.addEventListener("focus",this),t.addEventListener("blur",this)}afterDetachChildren(){const t=this.element;t.removeEventListener("focus",this),t.removeEventListener("blur",this)}handleEvent(t){"focus"===t.type?this.value=!0:this.dom.document.activeElement!==this.element&&(this.value=!1)}apply(){const t=this.element;this.value?t.focus():t.blur()}};return ge([Object(s.Ab)({mode:s.o.twoWay}),ve("design:type",Object)],t.prototype,"value",void 0),t=ge([Object(s.Eb)("focus"),be(0,s.N),be(1,s.J),ve("design:paramtypes",[Object,Yt])],t),t})();var ye=function(t,e,n,i){var r,s=arguments.length,o=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(o=(s<3?r(o):s>3?r(e,n,o):r(e,n))||o);return s>3&&o&&Object.defineProperty(e,n,o),o},we=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},Ce=function(t,e){return function(n,i){e(n,i,t)}};let Se=(()=>{let t=class{constructor(t,e,n){this.factory=t,this.originalLoc=e,this.dom=n,this.id=Object(i.B)("au$component"),this.strict=!1,this.currentTarget=n.createElement("div"),this.view=this.factory.create(),n.setEffectiveParentNode(this.view.nodes,e)}afterAttach(t,e,n){null==this.callbackContext&&(this.callbackContext=this.$controller.scope.bindingContext);const i=this.currentTarget=this.resolveTarget();return this.view.setLocation(i,2),this.$activating(t,i,n)}afterUnbind(t,e,n){return this.$deactivating(t,this.currentTarget,n)}targetChanged(){const{$controller:t}=this;if(!t.isActive)return;const e=this.currentTarget,n=this.currentTarget=this.resolveTarget();if(e===n)return;this.view.setLocation(n,2);const r=Object(i.C)(this.$deactivating(null,n,t.flags),()=>this.$activating(null,n,t.flags));r instanceof Promise&&r.catch(t=>{throw t})}$activating(t,e,n){const{activating:r,callbackContext:s,view:o}=this;return o.setLocation(e,2),Object(i.C)(null==r?void 0:r.call(s,e,o),()=>this.activate(t,e,n))}activate(t,e,n){const{$controller:r,view:s}=this;return null!==t?Object(i.C)(s.activate(null!=t?t:s,r,n,r.scope),()=>this.$activated(e)):(s.nodes.appendTo(e),this.$activated(e))}$activated(t){const{activated:e,callbackContext:n,view:i}=this;return null==e?void 0:e.call(n,t,i)}$deactivating(t,e,n){const{deactivating:r,callbackContext:s,view:o}=this;return Object(i.C)(null==r?void 0:r.call(s,e,o),()=>this.deactivate(t,e,n))}deactivate(t,e,n){const{$controller:r,view:s}=this;return null!==t?Object(i.C)(s.deactivate(t,r,n),()=>this.$deactivated(e)):(s.nodes.remove(),this.$deactivated(e))}$deactivated(t){const{deactivated:e,callbackContext:n,view:i}=this;return null==e?void 0:e.call(n,t,i)}resolveTarget(){const t=this.dom,e=t.document;let n=this.target,i=this.renderContext;if("string"==typeof n){let r=e;"string"==typeof i&&(i=e.querySelector(i)),t.isNodeInstance(i)&&(r=i),n=r.querySelector(n)}if(t.isNodeInstance(n))return n;if(null==n){if(this.strict)throw new Error("Render target not found");n=e.body}return n}onCancel(t,e,n){var i;null===(i=this.view)||void 0===i||i.cancel(t,this.$controller,n)}dispose(){this.view.dispose(),this.view=void 0,this.callbackContext=null}accept(t){var e;if(!0===(null===(e=this.view)||void 0===e?void 0:e.accept(t)))return!0}};return ye([Object(s.Ab)({primary:!0}),we("design:type",Object)],t.prototype,"target",void 0),ye([Object(s.Ab)({callback:"targetChanged"}),we("design:type",Object)],t.prototype,"renderContext",void 0),ye([Object(s.Ab)(),we("design:type",Boolean)],t.prototype,"strict",void 0),ye([Object(s.Ab)(),we("design:type",Function)],t.prototype,"deactivating",void 0),ye([Object(s.Ab)(),we("design:type",Function)],t.prototype,"activating",void 0),ye([Object(s.Ab)(),we("design:type",Function)],t.prototype,"deactivated",void 0),ye([Object(s.Ab)(),we("design:type",Function)],t.prototype,"activated",void 0),ye([Object(s.Ab)(),we("design:type",Object)],t.prototype,"callbackContext",void 0),t=ye([Object(s.Pb)("portal"),Ce(0,s.W),Ce(1,s.Q),Ce(2,s.J),we("design:paramtypes",[Object,Object,Yt])],t),t})();var ke;function Oe(t){const e=t.type;return"string"==typeof e&&2===e.length}function je(t,e,n,i){if("string"==typeof e)return function(t,e,n,i){const r=[],s=[],o=[],a=t.createElement(e);let c=!1;n&&Object.keys(n).forEach(e=>{const i=n[e];Oe(i)?(c=!0,r.push(i)):t.setAttribute(a,e,i)});c&&(t.makeTarget(a),s.push(r));i&&xe(t,a,i,s,o);return new Te(t,a,s,o)}(t,e,n,i);if(s.x.isType(e))return function(t,e,n,i){const r=s.x.getDefinition(e),o=r.name,a=[],c=[a],l=[],u=[],d=r.bindables,p=t.createElement(o);t.makeTarget(p),l.includes(e)||l.push(e);a.push(new s.F(o,u,null)),n&&Object.keys(n).forEach(t=>{const e=n[t];if(Oe(e))u.push(e);else{void 0!==d[t]?u.push({type:"re",to:t,value:e}):u.push(new h(e,t))}});i&&xe(t,p,i,c,l);return new Te(t,p,c,l)}(t,e,n,i);throw new Error("Invalid tagOrType.")}!function(t){t.textBinding="ha",t.listenerBinding="hb",t.attributeBinding="hc",t.stylePropertyBinding="hd",t.setAttribute="he",t.setClassAttribute="hf",t.setStyleAttribute="hg"}(ke||(ke={}));class Te{constructor(t,e,n,i){this.dom=t,this.node=e,this.instructions=n,this.dependencies=i,this.lazyDefinition=void 0}get definition(){return void 0===this.lazyDefinition&&(this.lazyDefinition=s.y.create({name:s.x.generateName(),template:this.node,needsCompile:"string"==typeof this.node,instructions:this.instructions,dependencies:this.dependencies})),this.lazyDefinition}getContext(t){return Object(s.Ib)(this.definition,t)}createView(t){return this.getViewFactory(t).create()}getViewFactory(t){return this.getContext(t).getViewFactory()}mergeInto(t,e,n){this.dom.appendChild(t,this.node),e.push(...this.instructions),n.push(...this.dependencies)}}function xe(t,e,n,i,r){for(let s=0,o=n.length;s<o;++s){const o=n[s];switch(typeof o){case"string":t.appendChild(e,t.createTextNode(o));break;case"object":t.isNodeInstance(o)?t.appendChild(e,o):"mergeInto"in o&&o.mergeInto(e,i,r)}}}var Ae=function(t,e,n,i){var r,s=arguments.length,o=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(o=(s<3?r(o):s>3?r(e,n,o):r(e,n))||o);return s>3&&o&&Object.defineProperty(e,n,o),o},Re=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},Pe=function(t,e){return function(n,i){e(n,i,t)}};function Ie(t,e){const n=e.to;return void 0!==n&&"subject"!==n&&"composing"!==n&&(t[n]=e),t}let Ee=(()=>{let t=class{constructor(t,e){this.dom=t,this.id=Object(i.B)("au$component"),this.subject=void 0,this.composing=!1,this.view=void 0,this.lastSubject=void 0,this.properties=e.instructions.reduce(Ie,{})}afterAttach(t,e,n){const{subject:i,view:r}=this;return void 0===r||this.lastSubject!==i?(this.lastSubject=i,this.composing=!0,this.compose(void 0,i,t,n)):this.compose(r,i,t,n)}afterUnbind(t,e,n){return this.deactivate(this.view,t,n)}subjectChanged(t,e,n){const{$controller:r}=this;if(!r.isActive)return;if(this.lastSubject===t)return;this.lastSubject=t,this.composing=!0,n|=r.flags;const s=Object(i.C)(this.deactivate(this.view,null,n),()=>this.compose(void 0,t,null,n));s instanceof Promise&&s.catch(t=>{throw t})}compose(t,e,n,r){return Object(i.C)(void 0===t?Object(i.C)(e,t=>this.resolveView(t,r)):t,t=>this.activate(t,n,r))}deactivate(t,e,n){return null==t?void 0:t.deactivate(null!=e?e:t,this.$controller,n)}activate(t,e,n){const{$controller:r}=this;return Object(i.C)(null==t?void 0:t.activate(null!=e?e:t,r,n,r.scope,r.hostScope),()=>{this.composing=!1})}resolveView(t,e){const n=this.provideViewFor(t,e);if(n)return n.setLocation(this.$controller.projector.host,1),n.lockScope(this.$controller.scope),n}provideViewFor(t,e){if(t){if(function(t){return"lockScope"in t}(t))return t;if("createView"in t)return t.createView(this.$controller.context);if("create"in t)return t.create(e);if("template"in t){const n=s.y.getOrCreate(t);return Object(s.Ib)(n,this.$controller.context).getViewFactory().create(e)}return je(this.dom,t,this.properties,void 0===this.$controller.projector?i.g.emptyArray:this.$controller.projector.children).createView(this.$controller.context)}}onCancel(t,e,n){var i;null===(i=this.view)||void 0===i||i.cancel(t,this.$controller,n)}dispose(){var t;null===(t=this.view)||void 0===t||t.dispose(),this.view=void 0}accept(t){var e;if(!0===(null===(e=this.view)||void 0===e?void 0:e.accept(t)))return!0}};return Ae([s.Ab,Re("design:type",Object)],t.prototype,"subject",void 0),Ae([Object(s.Ab)({mode:s.o.fromView}),Re("design:type",Boolean)],t.prototype,"composing",void 0),t=Ae([Object(s.Fb)({name:"au-compose",template:null,containerless:!0}),Pe(0,s.J),Pe(1,s.U),Re("design:paramtypes",[Object,Object])],t),t})();const Ve=s.z,$e=s.cb,Ne=s.hb,Fe=s.kb,Be=s.ub,Le=s.wb,Me=Object.assign(Object.create(null),{id:!0,"au-slot":!0}),De=Object.assign(Object.create(null),{"as-element":!0});function Ue(t){const e=t.length;let n=0;for(let i=0;i<e;++i)if(n=t.charCodeAt(i),92===n)++i;else{if(58===n)return!0;if(36===n&&123===t.charCodeAt(i+1))return!1}return!1}function qe(t,e){return t!==e}class _e{constructor(t,e,n,i,r){this.dom=t,this.resources=e,this.attrParser=n,this.exprParser=i,this.attrSyntaxTransformer=r}bind(t){const e=new Ne(this.dom,t),n=this.resources,i=this.attrSyntaxTransformer,r=t.attributes;let s=0;for(;s<r.length;){const o=r[s],a=this.attrParser.parse(o.name,o.value);if(!0===Me[a.target])throw new Error("Invalid surrogate attribute: "+a.target);const c=n.getBindingCommand(a,!0);if(null===c||0==(4096&c.bindingType)){const r=n.getAttributeInfo(a);if(null===r)i.transform(t,a),this.bindPlainAttribute(a,o,e,e);else{if(r.isTemplateController)throw new Error("Cannot have template controller on surrogate element.");this.bindCustomAttribute(a,r,c,e)}}else i.transform(t,a),this.bindPlainAttribute(a,o,e,e);++s}return this.bindChildNodes(t,e,e,null,null),e}bindManifest(t,e,n,i,r,s){var o;let a=!1;switch(e.nodeName){case"LET":return void this.bindLetElement(t,e);case"SLOT":n.hasSlots=!0;break;case"AU-SLOT":a=!0}let c=e.getAttribute("as-element");null===c&&(c=e.nodeName.toLowerCase());const l=this.resources.getElementInfo(c);if(null===l)i=new Ne(this.dom,e);else{s=r;const t=new Ve(this.dom,e,l);a&&(t.flags=512,t.slotName=null!==(o=e.getAttribute("name"))&&void 0!==o?o:"default"),r=i=t}this.bindChildNodes(e,n,i,r,s),this.bindAttributes(e,t,n,i,r,s),r===i&&i.isContainerless?e.parentNode.replaceChild(i.marker,e):i.isTarget&&e.classList.add("au")}bindLetElement(t,e){const n=new $e(this.dom,e);t.childNodes.push(n);const r=e.attributes;let o=0;for(;o<r.length;){const t=r[o];if("to-binding-context"===t.name){e.removeAttribute("to-binding-context"),n.toBindingContext=!0;continue}const a=this.attrParser.parse(t.name,t.value),c=this.resources.getBindingCommand(a,!1),l=null===c?2048:c.bindingType,h=this.exprParser.parse(a.rawValue,l),u=Object(i.n)(a.target),d=new s.l(u,s.o.toView);n.bindings.push(new s.p(c,d,h,a.rawValue,u)),++o}e.parentNode.replaceChild(n.marker,e)}bindAttributes(t,e,n,i,r,s){var o;let a=i,c=void 0,l=void 0;const h=t.attributes;let u=0;for(;u<h.length;){const e=h[u];if(++u,!0===De[e.name])continue;const r=this.attrParser.parse(e.name,e.value),s=this.resources.getBindingCommand(r,!0);if(null===s||0==(4096&s.bindingType)){const o=this.resources.getAttributeInfo(r);null===o?(this.attrSyntaxTransformer.transform(t,r),this.bindPlainAttribute(r,e,n,i)):o.isTemplateController?(l=i.templateController=this.declareTemplateController(r,o),a===i?(l.template=i,a=l):(l.templateController=c,l.template=c.template,c.template=l),c=l):this.bindCustomAttribute(r,o,s,i)}else this.attrSyntaxTransformer.transform(t,r),this.bindPlainAttribute(r,e,n,i)}if("INPUT"===t.tagName){const e=t.type;"checkbox"!==e&&"radio"!==e||this.ensureAttributeOrder(i)}let d=t.getAttribute("au-slot");""===d&&(d="default");const p=null!==d;if(p&&qe(a,i))throw new Error(`Unsupported usage of [au-slot="${d}"] along with a template controller (if, else, repeat.for etc.) found (example: <some-el au-slot if.bind="true"></some-el>).`);const f=null===(o=t.parentNode)||void 0===o?void 0:o.nodeName.toLowerCase();if(p&&(null===r||void 0===f||null===this.resources.getElementInfo(f)))throw new Error(`Unsupported usage of [au-slot="${d}"]. It seems that projection is attempted, but not for a custom element.`);!function(t,e,n){const i=n.physicalNode;let r,s=e;for(;qe(s,n);)s.template===n?(i.parentNode.replaceChild(s.marker,i),"TEMPLATE"===i.nodeName?(s.physicalNode=i,i.remove()):(r=s.physicalNode=t.createTemplate(),r.content.appendChild(i))):(r=s.physicalNode=t.createTemplate(),r.content.appendChild(s.marker)),i.removeAttribute(s.syntax.rawName),s=s.template}(this.dom,a,i);const g=i===r?s:r;p&&null!==g?p&&(g.projections.push(new Fe(d,a)),t.removeAttribute("au-slot"),t.remove()):e.childNodes.push(a)}ensureAttributeOrder(t){const e=t.plainAttributes;let n=void 0,i=void 0,r=0;for(let t=0;t<e.length&&r<3;t++)switch(e[t].syntax.target){case"model":case"value":case"matcher":n=t,r++;break;case"checked":i=t,r++}void 0!==i&&void 0!==n&&i<n&&([e[n],e[i]]=[e[i],e[n]])}bindChildNodes(t,e,n,i,r){let s,o;for(s="TEMPLATE"===t.nodeName?t.content.firstChild:t.firstChild;null!==s;)switch(s.nodeType){case 1:o=s.nextSibling,this.bindManifest(n,s,e,n,i,r),s=o;break;case 3:s=this.bindText(s,n).nextSibling;break;case 4:case 7:case 8:case 10:s=s.nextSibling;break;case 9:case 11:s=s.firstChild}}bindText(t,e){const n=this.exprParser.parse(t.wholeText,2048);if(null!==n){const i=new Le(this.dom,t,n);e.childNodes.push(i),function(t){const e=t.physicalNode,n=e.parentNode;for(;null!==e.nextSibling&&3===e.nextSibling.nodeType;)n.removeChild(e.nextSibling);e.textContent="",n.insertBefore(t.marker,e)}(i)}let i=t;for(;null!==i.nextSibling&&3===i.nextSibling.nodeType;)i=i.nextSibling;return i}declareTemplateController(t,e){let n;const i=t.rawValue,r=this.resources.getBindingCommand(t,!1);if(!1===e.noMultiBindings&&null===r&&Ue(i))n=new Be(this.dom,t,e),this.bindMultiAttribute(n,e,i);else{n=new Be(this.dom,t,e);const o=null===r?2048:r.bindingType,a=this.exprParser.parse(i,o);n.bindings.push(new s.p(r,e.bindable,a,i,t.target))}return n}bindCustomAttribute(t,e,n,i){let r;const o=t.rawValue;if(!1===e.noMultiBindings&&null===n&&Ue(o))r=new s.w(t,e),this.bindMultiAttribute(r,e,o);else{r=new s.w(t,e);const i=null===n?2048:n.bindingType,a=this.exprParser.parse(o,i);r.bindings.push(new s.p(n,e.bindable,a,o,t.target))}i.customAttributes.push(r),i.isTarget=!0}bindMultiAttribute(t,e,n){const r=e.bindables,o=n.length;let a=void 0,c=void 0,l=0,h=0;for(let e=0;e<o;++e)if(h=n.charCodeAt(e),92===h)++e;else if(58===h){for(a=n.slice(l,e);n.charCodeAt(++e)<=32;);for(l=e;e<o;++e)if(h=n.charCodeAt(e),92===h)++e;else if(59===h){c=n.slice(l,e);break}void 0===c&&(c=n.slice(l));const u=this.attrParser.parse(a,c),d=Object(i.n)(u.target),p=this.resources.getBindingCommand(u,!1),f=null===p?2048:p.bindingType,g=this.exprParser.parse(c,f);let v=r[d];for(void 0===v&&(v=r[d]=new s.l(d,s.o.toView)),t.bindings.push(new s.p(p,v,g,c,d));e<o&&n.charCodeAt(++e)<=32;);l=e,a=void 0,c=void 0}}bindPlainAttribute(t,e,n,r){const o=this.resources.getBindingCommand(t,!1),a=null===o?2048:o.bindingType,c=t.target,l=t.rawValue;let h;if(0===l.length&&(55|53&a)>0){if(!((55|53&a)>0))return;h=this.exprParser.parse(Object(i.n)(c),a)}else h=this.exprParser.parse(l,a);if((16&r.flags)>0){const e=r.bindables[c];null!=e?(r.bindings.push(new s.p(o,e,h,l,c)),r.isTarget=!0):null!=h&&(r.plainAttributes.push(new s.gb(t,o,h)),r.isTarget=!0)}else null!=h?(r.plainAttributes.push(new s.gb(t,o,h)),r.isTarget=!0):r===n&&r.plainAttributes.push(new s.gb(t,o,h));null==o&&null!=h&&(e.value="")}}var He=function(t,e,n,i){var r,s=arguments.length,o=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(o=(s<3?r(o):s>3?r(e,n,o):r(e,n))||o);return s>3&&o&&Object.defineProperty(e,n,o),o},ze=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},Ke=function(t,e){return function(n,i){e(n,i,t)}};const We=i.a.createInterface("ITemplateElementFactory").noDefault(),Qe={};let Je=(()=>{let t=class{constructor(t){this.dom=t,this.template=t.createTemplate()}static register(t){return i.i.singleton(We,this).register(t)}createTemplate(t){if("string"==typeof t){let e=Qe[t];if(void 0===e){const n=this.template;n.innerHTML=t;const i=n.content.firstElementChild;null==i||"TEMPLATE"!==i.nodeName||null!=i.nextElementSibling?(this.template=this.dom.createTemplate(),e=n):(n.content.removeChild(i),e=i),Qe[t]=e}return e.cloneNode(!0)}if("TEMPLATE"!==t.nodeName){const e=this.dom.createTemplate();return e.content.appendChild(t),e}return null!=t.parentNode&&t.parentNode.removeChild(t),t}};return t=He([Ke(0,s.J),ze("design:paramtypes",[Object])],t),t})();var Ge,Ye=function(t,e,n,i){var r,s=arguments.length,o=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(o=(s<3?r(o):s>3?r(e,n,o):r(e,n))||o);return s>3&&o&&Object.defineProperty(e,n,o),o},Ze=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},Xe=function(t,e){return function(n,i){e(n,i,t)}};class tn{constructor(t,e,n){this.partialDefinition=t,this.surrogate=e,this.template=n,this.instructions=[],this.surrogates=[],this.projectionsMap=new Map}toDefinition(){const t=this.partialDefinition;return s.y.create({...t,instructions:Object(i.A)(t.instructions,this.instructions),surrogates:Object(i.A)(t.surrogates,this.surrogates),template:this.template,needsCompile:!1,hasSlots:this.surrogate.hasSlots,projectionsMap:this.projectionsMap})}}!function(t){t.property="property",t.attribute="attribute",t.mode="mode"}(Ge||(Ge={}));const en=Object.freeze(["property","attribute","mode"]);let nn=(()=>{let t=class{constructor(t,e,n,i,r,s){this.factory=t,this.attrParser=e,this.exprParser=n,this.attrSyntaxModifier=i,this.dom=s,this.logger=r.scopeTo("TemplateCompiler")}get name(){return"default"}static register(t){return i.i.singleton(s.V,this).register(t)}compile(t,e,n){const r=s.y.getOrCreate(t);if(null===r.template||void 0===r.template)return r;const o=s.nb.getOrCreate(e),{attrParser:a,exprParser:c,attrSyntaxModifier:l,factory:h}=this,u=e.get(s.J),d=new _e(u,o,a,c,l),p=!0===r.enhance?r.template:h.createTemplate(r.template);!function(t,e,n,r,o){let a;if("TEMPLATE"===t.nodeName){if(t.hasAttribute("as-custom-element"))throw new Error("The root cannot be a local template itself.");a=t.content}else a=t;const c=Object(i.F)(a.querySelectorAll("template[as-custom-element]")),l=c.length;if(0===l)return;if(l===a.childElementCount)throw new Error("The custom element does not have any content other than local template(s).");const h=new Set;for(const t of c){if(t.parentNode!==a)throw new Error("Local templates needs to be defined directly under root.");const c=rn(t,h),l=class{},u=t.content,d=Object(i.F)(u.querySelectorAll("bindable")),p=s.k.for(l),f=new Set,g=new Set;for(const t of d){if(t.parentNode!==u)throw new Error("Bindable properties of local templates needs to be defined directly under root.");const e=t.getAttribute("property");if(null===e)throw new Error("The attribute 'property' is missing in "+t.outerHTML);const n=t.getAttribute("attribute");if(null!==n&&g.has(n)||f.has(e))throw new Error(`Bindable property and attribute needs to be unique; found property: ${e}, attribute: ${n}`);null!==n&&g.add(n),f.add(e),p.add({property:e,attribute:null!=n?n:void 0,mode:sn(t)});const i=t.getAttributeNames().filter(t=>!en.includes(t));i.length>0&&o.warn(`The attribute(s) ${i.join(", ")} will be ignored for ${t.outerHTML}. Only ${en.join(", ")} are processed.`),u.removeChild(t)}const v=r.createElement("div");v.appendChild(u);const b=s.x.define({name:c,template:v.innerHTML},l);e.dependencies.push(b),n.register(b),a.removeChild(t)}}(p,r,e,u,this.logger);const f=d.bind(p),g=this.compilation=new tn(r,f,p),v=f.customAttributes,b=f.plainAttributes,m=v.length,y=b.length;if(m+y>0){let t=0;for(let e=0;m>e;++e)g.surrogates[t]=this.compileCustomAttribute(v[e]),t++;for(let e=0;e<y;++e)g.surrogates[t]=this.compilePlainAttribute(b[e],!0),t++}this.compileChildNodes(f,g.instructions,g.projectionsMap,n);const w=g.toDefinition();return this.compilation=null,w}compileChildNodes(t,e,n,i){if((16384&t.flags)>0){const r=t.childNodes,a=r.length;let c;for(let t=0;t<a;++t)if(c=r[t],(128&c.flags)>0)e.push([new o(c.interpolation)]);else if((32&c.flags)>0){const t=c.bindings,n=[];let i;const r=t.length;for(let e=0;e<r;++e)i=t[e],n[e]=new s.ab(i.expression,i.target);e.push([new s.bb(n,c.toBindingContext)])}else this.compileParentNode(c,e,n,i)}}compileCustomElement(t,e,n,i){var r;const o=(512&t.flags)>0,a=this.compileAttributes(t,1),c=t.slotName;let l=null;if(o){const e=null===(r=null==i?void 0:i.projections)||void 0===r?void 0:r[c];l=void 0!==e?new s.rb(c,s.h.Projection,new s.jb(e,null==i?void 0:i.scope)):new s.rb(c,s.h.Fallback,new s.jb(this.compileProjectionFallback(t,n,i)))}const h=a[0]=new s.F(t.res,this.compileBindings(t),l),u=this.compileProjections(t,n,i);null!==u&&n.set(h,u),e.push(a),o||this.compileChildNodes(t,e,n,i)}compilePlainElement(t,e,n,i){const r=this.compileAttributes(t,0);r.length>0&&e.push(r),this.compileChildNodes(t,e,n,i)}compileParentNode(t,e,n,i){switch(1023&t.flags){case 16:case 512:this.compileCustomElement(t,e,n,i);break;case 64:this.compilePlainElement(t,e,n,i);break;case 1:this.compileTemplateController(t,e,n,i)}}compileTemplateController(t,e,n,i){const r=this.compileBindings(t),o=[];this.compileParentNode(t.template,o,n,i);const a=s.y.create({name:t.res,template:t.physicalNode,instructions:o,needsCompile:!1});e.push([new s.G(a,t.res,r,"else"===t.res)])}compileBindings(t){let e;if((8192&t.flags)>0){const{bindings:n}=t,i=n.length;e=Array(i);let r=0;for(;r<i;++r)e[r]=this.compileBinding(n[r])}else e=i.g.emptyArray;return e}compileBinding(t){return null===t.command?null===t.expression?new s.pb(t.rawValue,t.bindable.propName):new s.Z(t.expression,t.bindable.propName):t.command.compile(t)}compileAttributes(t,e){let n;if((4096&t.flags)>0){const i=t.customAttributes,r=t.plainAttributes,s=i.length,o=r.length;n=Array(e+s+o);for(let t=0;s>t;++t)n[e]=this.compileCustomAttribute(i[t]),e++;for(let t=0;o>t;++t)n[e]=this.compilePlainAttribute(r[t],!1),e++}else n=e>0?Array(e):i.g.emptyArray;return n}compileCustomAttribute(t){const e=this.compileBindings(t);return new s.E(t.res,e)}compilePlainAttribute(t,e){if(null===t.command){const n=t.syntax;if(null===t.expression){const t=n.rawValue;if(e)switch(n.target){case"class":return new u(t);case"style":return new d(t)}return new h(t,n.target)}return new s.Z(t.expression,n.target)}return t.command.compile(t)}compileProjections(t,e,n){var i;if(0==(32768&t.flags))return null;const r=this.dom,o=Object.create(null),a=t.projections,c=a.length;for(let t=0;t<c;++t){const c=a[t],l=c.name,h=[];this.compileParentNode(c.template,h,e,n);const u=o[l];if(void 0===u){let t=c.template.physicalNode;if("TEMPLATE"!==t.tagName){const e=r.createTemplate();r.appendChild(e.content,t),t=e}o[l]=s.y.create({name:l,template:t,instructions:h,needsCompile:!1})}else r.appendChild(u.template.content,null===(i=c.template)||void 0===i?void 0:i.physicalNode),u.instructions.push(...h)}return o}compileProjectionFallback(t,e,n){const r=[];this.compileChildNodes(t,r,e,n);const o=this.dom.createTemplate();return o.content.append(...Object(i.F)(t.physicalNode.childNodes)),s.y.create({name:s.x.generateName(),template:o,instructions:r,needsCompile:!1})}};return t=Ye([Xe(0,We),Xe(1,s.H),Xe(2,s.L),Xe(3,r),Xe(4,i.c),Xe(5,s.J),Ze("design:paramtypes",[Object,Object,Object,Object,Object,Object])],t),t})();function rn(t,e){const n=t.getAttribute("as-custom-element");if(null===n||""===n)throw new Error('The value of "as-custom-element" attribute cannot be empty for local template');if(e.has(n))throw new Error("Duplicate definition of the local template named "+n);return e.add(n),n}function sn(t){switch(t.getAttribute("mode")){case"oneTime":return s.o.oneTime;case"toView":return s.o.toView;case"fromView":return s.o.fromView;case"twoWay":return s.o.twoWay;case"default":default:return s.o.default}}var on=function(t,e,n,i){var r,s=arguments.length,o=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(o=(s<3?r(o):s>3?r(e,n,o):r(e,n))||o);return s>3&&o&&Object.defineProperty(e,n,o),o},an=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},cn=function(t,e){return function(n,i){e(n,i,t)}};let ln=(()=>{let t=class{constructor(t,e){this.parser=t,this.observerLocator=e}render(t,e,n,i,r){const o=i.nextSibling;let a;e.dom.isMarker(i)&&e.dom.remove(i);const c=Object(s.Gb)(this.parser,r.from,2048);a=c.isMulti?Object(s.zb)(new s.db(this.observerLocator,c,o,"textContent",s.o.toView,e),c,e):Object(s.zb)(new s.Y(c.firstExpression,c,o,"textContent",s.o.toView,this.observerLocator,e,!0),c,e),n.addBinding(a)}};return t=on([Object(s.Kb)("ha"),cn(0,s.L),cn(1,s.O),an("design:paramtypes",[Object,Object])],t),t})(),hn=(()=>{let t=class{constructor(t,e){this.parser=t,this.eventManager=e}render(t,e,n,i,r){const o=Object(s.Gb)(this.parser,r.from,80|r.strategy+6),a=Object(s.zb)(new S(e.dom,r.to,r.strategy,o,i,r.preventDefault,this.eventManager,e),o,e);n.addBinding(a)}};return t=on([Object(s.Kb)("hb"),cn(0,s.L),cn(1,nt),an("design:paramtypes",[Object,Object])],t),t})(),un=(()=>{let t=class{render(t,e,n,i,r){i.setAttribute(r.to,r.value)}};return t=on([Object(s.Kb)("he")],t),t})(),dn=(()=>{let t=class{render(t,e,n,i,r){!function(t,e){const n=e.length;let i=0;for(let r=0;r<n;++r)32===e.charCodeAt(r)?(r!==i&&t.add(e.slice(i,r)),i=r+1):r+1===n&&t.add(e.slice(i))}(i.classList,r.value)}};return t=on([Object(s.Kb)("hf")],t),t})(),pn=(()=>{let t=class{render(t,e,n,i,r){i.style.cssText+=r.value}};return t=on([Object(s.Kb)("hg")],t),t})(),fn=(()=>{let t=class{constructor(t,e){this.parser=t,this.observerLocator=e}render(t,e,n,i,r){const o=Object(s.Gb)(this.parser,r.from,48|s.o.toView),a=Object(s.zb)(new s.lb(o,i.style,r.to,s.o.toView,this.observerLocator,e),o,e);n.addBinding(a)}};return t=on([Object(s.Kb)("hd"),cn(0,s.L),cn(1,s.O),an("design:paramtypes",[Object,Object])],t),t})(),gn=(()=>{let t=class{constructor(t,e){this.parser=t,this.observerLocator=e}render(t,e,n,i,r){const o=Object(s.Gb)(this.parser,r.from,48|s.o.toView),a=Object(s.zb)(new B(o,i,r.attr,r.to,s.o.toView,this.observerLocator,e),o,e);n.addBinding(a)}};return t=on([Object(s.Kb)("hc"),cn(0,s.L),cn(1,s.O),an("design:paramtypes",[Object,Object])],t),t})();const vn=[nn,Je,class{static register(t){return i.i.singleton(r,this).register(t)}transform(t,e){"bind"===e.command&&function(t,e){switch(t.tagName){case"INPUT":switch(t.type){case"checkbox":case"radio":return"checked"===e.target;default:return"value"===e.target||"files"===e.target}case"TEXTAREA":case"SELECT":return"value"===e.target;default:switch(e.target){case"textcontent":case"innerhtml":return t.hasAttribute("contenteditable");case"scrolltop":case"scrollleft":return!0;default:return!1}}}(t,e)&&(e.command="two-way"),e.target=this.map(t.tagName,e.target)}map(t,e){switch(t){case"LABEL":switch(e){case"for":return"htmlFor";default:return e}case"IMG":switch(e){case"usemap":return"useMap";default:return e}case"INPUT":switch(e){case"maxlength":return"maxLength";case"minlength":return"minLength";case"formaction":return"formAction";case"formenctype":return"formEncType";case"formmethod":return"formMethod";case"formnovalidate":return"formNoValidate";case"formtarget":return"formTarget";case"inputmode":return"inputMode";default:return e}case"TEXTAREA":switch(e){case"maxlength":return"maxLength";default:return e}case"TD":case"TH":switch(e){case"rowspan":return"rowSpan";case"colspan":return"colSpan";default:return e}default:switch(e){case"accesskey":return"accessKey";case"contenteditable":return"contentEditable";case"tabindex":return"tabIndex";case"textcontent":return"textContent";case"innerhtml":return"innerHTML";case"scrolltop":return"scrollTop";case"scrollleft":return"scrollLeft";case"readonly":return"readOnly";default:return e}}}},class{static register(t){return i.i.singleton(s.P,this).register(t)}getElementProjector(t,e,n,r){if(r.shadowOptions||r.hasSlots){if(r.containerless)throw i.j.error(21);return new Kt(t,e,n,r)}return r.containerless?new Wt(t,e,n):new Qt(e,n,r.enhance)}},xt,Tt],bn=[C,g,v,b,w,y,m],mn=[It,$t,Lt,Ee,Se,me,de],yn=[hn,gn,un,dn,pn,fn,ln],wn={register:t=>s.ob.register(t).register(...vn,...mn,...bn,...yn),createContainer(){return this.register(i.a.createContainer())}};var Cn=function(t,e,n,i){var r,s=arguments.length,o=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(o=(s<3?r(o):s>3?r(e,n,o):r(e,n))||o);return s>3&&o&&Object.defineProperty(e,n,o),o},Sn=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},kn=function(t,e){return function(n,i){e(n,i,t)}};const On=new WeakMap,jn=i.a.createInterface("IShadowDOMStyleFactory").withDefault(t=>t.callback((t,e,n)=>{let i=On.get(n);return void 0===i&&On.set(n,i=Tn.createStyleFactory(t)),i}));class Tn{constructor(t){this.css=t}register(t){const e=t.get(Ut),n=t.get(jn);t.register(i.i.instance(Dt,n.createStyles(this.css,e)))}static createStyleFactory(t){return qt.supported(t.get(Yt))?t.get(xn):t.get(An)}}let xn=(()=>{let t=class{constructor(t){this.dom=t,this.cache=new Map}createStyles(t,e){return new qt(this.dom,t,this.cache,e)}};return t=Cn([kn(0,s.J),Sn("design:paramtypes",[Yt])],t),t})(),An=(()=>{let t=class{constructor(t){this.dom=t}createStyles(t,e){if(t.some(t=>"string"!=typeof t))throw new Error("Shadow DOM CSS must be a string.");return new _t(this.dom,t,e)}};return t=Cn([kn(0,s.J),Sn("design:paramtypes",[Yt])],t),t})()},function(t,e,n){"use strict";n.d(e,"b",(function(){return s})),n.d(e,"a",(function(){return C})),n.d(e,"c",(function(){return S}));var i=n(0);const r=i.g.now.bind(i.g),s=i.a.createInterface("Now").withDefault(t=>t.instance(r));var o;!function(t){t[t.microTask=0]="microTask",t[t.render=1]="render",t[t.macroTask=2]="macroTask",t[t.postRender=3]="postRender",t[t.idle=4]="idle"}(o||(o={}));const a={delay:0,preempt:!1,priority:1,persistent:!1,reusable:!0,async:!1};let c,l;function h(t,e){c=t,l=e}function u(){const t=new Promise(h);return t.resolve=c,t.reject=l,t}const{enter:d,leave:p,trace:f}={enter:function(t,e){},leave:function(t,e){},trace:function(t,e){}};class g extends Error{constructor(t){super("Task was canceled."),this.task=t}}let v=0;class b{constructor(t,e,n,i,r,s,o,a){this.taskQueue=t,this.createdTime=e,this.queueTime=n,this.preempt=i,this.persistent=r,this.async=s,this.reusable=o,this.callback=a,this.id=++v,this.next=void 0,this.prev=void 0,this.resolve=void 0,this.reject=void 0,this._result=void 0,this._status="pending",this.priority=t.priority}get result(){const t=this._result;if(void 0===t)switch(this._status){case"pending":{const t=this._result=u();return this.resolve=t.resolve,this.reject=t.reject,t}case"running":throw new Error("Trying to await task from within task will cause a deadlock.");case"completed":return this._result=Promise.resolve();case"canceled":return this._result=Promise.reject(new g(this))}return t}get status(){return this._status}run(){if(d(this,"run"),"pending"!==this._status)throw p(this,"run error"),new Error(`Cannot run task in ${this._status} state`);const{persistent:t,reusable:e,taskQueue:n,callback:i,resolve:r,reject:s,createdTime:o,async:a}=this;n.remove(this),this._status="running";try{const c=i(n.now()-o);!0===a||"auto"===a&&c instanceof Promise?c.then(i=>{this.persistent?n.resetPersistentTask(this):(this._status=t?"canceled":"completed",this.dispose(),e&&n.returnToPool(this)),n.completeAsyncTask(this),p(this,"run async then"),void 0!==r&&r(i)}).catch(t=>{if(this.persistent||this.dispose(),n.completeAsyncTask(this),p(this,"run async catch"),void 0===s)throw t;s(t)}):(this.persistent?n.resetPersistentTask(this):(this._status=t?"canceled":"completed",this.dispose(),e&&n.returnToPool(this)),p(this,"run sync success"),void 0!==r&&r(c))}catch(t){if(this.persistent||this.dispose(),p(this,"run sync error"),void 0===s)throw t;s(t)}}cancel(){if(d(this,"cancel"),"pending"===this._status){const t=this.taskQueue,e=this.reusable,n=this.reject;return t.remove(this),t.isEmpty&&t.cancel(),this._status="canceled",this.dispose(),e&&t.returnToPool(this),void 0!==n&&n(new g(this)),p(this,"cancel true =pending"),!0}return"running"===this._status&&this.persistent?(this.persistent=!1,p(this,"cancel true =running+persistent"),!0):(p(this,"cancel false"),!1)}reset(t){d(this,"reset");const e=this.queueTime-this.createdTime;this.createdTime=t,this.queueTime=t+e,this._status="pending",this.resolve=void 0,this.reject=void 0,this._result=void 0,p(this,"reset")}reuse(t,e,n,i,r,s){d(this,"reuse"),this.createdTime=t,this.queueTime=t+e,this.preempt=n,this.persistent=i,this.async=r,this.callback=s,this._status="pending",p(this,"reuse")}dispose(){f(this,"dispose"),this.prev=void 0,this.next=void 0,this.callback=void 0,this.resolve=void 0,this.reject=void 0,this._result=void 0}}class m{constructor(t,e,n,i){this.now=t,this.priority=e,this.scheduler=n,this.processingSize=0,this.processingHead=void 0,this.processingTail=void 0,this.processingAsync=void 0,this.pendingSize=0,this.pendingHead=void 0,this.pendingTail=void 0,this.delayedSize=0,this.delayedHead=void 0,this.delayedTail=void 0,this.flushRequested=!1,this.yieldPromise=void 0,this.taskPool=[],this.taskPoolSize=0,this.lastRequest=0,this.microTaskRequestFlushTask=null,this.flushRequestor=i.create(this),this.requestFlush=this.requestFlush.bind(this)}get isEmpty(){return 0===this.processingSize&&0===this.pendingSize&&0===this.delayedSize}get hasNoMoreFiniteWork(){let t=this.processingHead;for(;void 0!==t;){if(!t.persistent)return!1;t=t.next}for(t=this.pendingHead;void 0!==t;){if(!t.persistent)return!1;t=t.next}for(t=this.delayedHead;void 0!==t;){if(!t.persistent)return!1;t=t.next}return!0}flush(){if(d(this,"flush"),null!==this.microTaskRequestFlushTask&&(this.microTaskRequestFlushTask.cancel(),this.microTaskRequestFlushTask=null),this.flushRequested=!1,void 0===this.processingAsync){let t;for(this.pendingSize>0&&this.movePendingToProcessing(),this.delayedSize>0&&this.moveDelayedToProcessing();this.processingSize>0;)if(t=this.processingHead,t.run(),"running"===t.status)return this.processingAsync=t,this.requestFlushClamped(),void p(this,"flush early async");if(this.pendingSize>0&&this.movePendingToProcessing(),this.delayedSize>0&&this.moveDelayedToProcessing(),this.processingSize>0?this.requestFlush():this.delayedSize>0&&this.requestFlushClamped(),void 0!==this.yieldPromise&&this.hasNoMoreFiniteWork){const t=this.yieldPromise;this.yieldPromise=void 0,t.resolve()}}else this.requestFlushClamped();p(this,"flush full")}cancel(){d(this,"cancel"),null!==this.microTaskRequestFlushTask&&(this.microTaskRequestFlushTask.cancel(),this.microTaskRequestFlushTask=null),this.flushRequested&&(this.flushRequestor.cancel(),this.flushRequested=!1),p(this,"cancel")}async yield(){d(this,"yield"),this.isEmpty?p(this,"yield empty"):(void 0===this.yieldPromise&&(f(this,"yield - creating promise"),this.yieldPromise=u()),await this.yieldPromise,p(this,"yield task"))}queueTask(t,e){d(this,"queueTask");const{delay:n,preempt:i,persistent:r,reusable:s,async:o}={...a,...e};if(i){if(n>0)throw new Error("Invalid arguments: preempt cannot be combined with a greater-than-zero delay");if(r)throw new Error("Invalid arguments: preempt cannot be combined with persistent")}if(r&&0===this.priority)throw new Error("Invalid arguments: cannot queue persistent tasks on the micro task queue");0===this.processingSize&&this.requestFlush();const c=this.now();let l;if(s){const e=this.taskPool,a=this.taskPoolSize-1;a>=0?(l=e[a],e[a]=void 0,this.taskPoolSize=a,l.reuse(c,n,i,r,o,t)):l=new b(this,c,c+n,i,r,o,s,t)}else l=new b(this,c,c+n,i,r,o,s,t);return i?0==this.processingSize++?this.processingHead=this.processingTail=l:this.processingTail=(l.prev=this.processingTail).next=l:0===n?0==this.pendingSize++?this.pendingHead=this.pendingTail=l:this.pendingTail=(l.prev=this.pendingTail).next=l:0==this.delayedSize++?this.delayedHead=this.delayedTail=l:this.delayedTail=(l.prev=this.delayedTail).next=l,p(this,"queueTask"),l}take(t){if(d(this,"take"),"pending"!==t.status)throw p(this,"take error"),new Error("Can only take pending tasks.");0===this.processingSize&&this.requestFlush(),t.taskQueue.remove(t),t.preempt?this.addToProcessing(t):t.queueTime<=this.now()?this.addToPending(t):this.addToDelayed(t),p(this,"take")}remove(t){if(d(this,"remove"),t.preempt)return this.removeFromProcessing(t),void p(this,"remove processing fast");if(t.queueTime>this.now())return this.removeFromDelayed(t),void p(this,"remove delayed fast");let e=this.processingHead;for(;void 0!==e;){if(e===t)return this.removeFromProcessing(t),void p(this,"remove processing slow");e=e.next}for(e=this.pendingHead;void 0!==e;){if(e===t)return this.removeFromPending(t),void p(this,"remove pending slow");e=e.next}for(e=this.delayedHead;void 0!==e;){if(e===t)return this.removeFromDelayed(t),void p(this,"remove delayed slow");e=e.next}throw p(this,"remove error"),new Error(`Task #${t.id} could not be found`)}returnToPool(t){f(this,"returnToPool"),this.taskPool[this.taskPoolSize++]=t}resetPersistentTask(t){d(this,"resetPersistentTask"),t.reset(this.now()),t.createdTime===t.queueTime?0==this.pendingSize++?(this.pendingHead=this.pendingTail=t,t.prev=t.next=void 0):(this.pendingTail=(t.prev=this.pendingTail).next=t,t.next=void 0):0==this.delayedSize++?(this.delayedHead=this.delayedTail=t,t.prev=t.next=void 0):(this.delayedTail=(t.prev=this.delayedTail).next=t,t.next=void 0),p(this,"resetPersistentTask")}completeAsyncTask(t){var e;if(d(this,"completeAsyncTask"),this.processingAsync!==t)throw p(this,"completeAsyncTask error"),new Error(`Async task completion mismatch: processingAsync=${null===(e=this.processingAsync)||void 0===e?void 0:e.id}, task=${t.id}`);if(this.processingAsync=void 0,void 0!==this.yieldPromise&&this.hasNoMoreFiniteWork){const t=this.yieldPromise;this.yieldPromise=void 0,t.resolve()}this.isEmpty&&this.cancel(),p(this,"completeAsyncTask")}finish(t){d(this,"finish"),void 0!==t.next&&(t.next.prev=t.prev),void 0!==t.prev&&(t.prev.next=t.next),p(this,"finish")}removeFromProcessing(t){d(this,"removeFromProcessing"),this.processingHead===t&&(this.processingHead=t.next),this.processingTail===t&&(this.processingTail=t.prev),--this.processingSize,this.finish(t),p(this,"removeFromProcessing")}removeFromPending(t){d(this,"removeFromPending"),this.pendingHead===t&&(this.pendingHead=t.next),this.pendingTail===t&&(this.pendingTail=t.prev),--this.pendingSize,this.finish(t),p(this,"removeFromPending")}removeFromDelayed(t){d(this,"removeFromDelayed"),this.delayedHead===t&&(this.delayedHead=t.next),this.delayedTail===t&&(this.delayedTail=t.prev),--this.delayedSize,this.finish(t),p(this,"removeFromDelayed")}addToProcessing(t){d(this,"addToProcessing"),0==this.processingSize++?this.processingHead=this.processingTail=t:this.processingTail=(t.prev=this.processingTail).next=t,p(this,"addToProcessing")}addToPending(t){d(this,"addToPending"),0==this.pendingSize++?this.pendingHead=this.pendingTail=t:this.pendingTail=(t.prev=this.pendingTail).next=t,p(this,"addToPending")}addToDelayed(t){d(this,"addToDelayed"),0==this.delayedSize++?this.delayedHead=this.delayedTail=t:this.delayedTail=(t.prev=this.delayedTail).next=t,p(this,"addToDelayed")}movePendingToProcessing(){d(this,"movePendingToProcessing"),0===this.processingSize?(this.processingHead=this.pendingHead,this.processingTail=this.pendingTail,this.processingSize=this.pendingSize):(this.processingTail.next=this.pendingHead,this.processingTail=this.pendingTail,this.processingSize+=this.pendingSize),this.pendingHead=void 0,this.pendingTail=void 0,this.pendingSize=0,p(this,"movePendingToProcessing")}moveDelayedToProcessing(){d(this,"moveDelayedToProcessing");const t=this.now(),e=this.delayedHead;if(e.queueTime<=t){let n=e,i=n.next,r=1;for(;void 0!==i&&i.queueTime<=t;)n=i,i=n.next,++r;0===this.processingSize?(this.processingHead=e,this.processingTail=n,this.processingSize=r):(this.processingTail.next=e,this.processingTail=n,this.processingSize+=r),this.delayedHead=i,this.delayedSize-=r,0===this.delayedSize&&(this.delayedTail=void 0)}p(this,"moveDelayedToProcessing")}requestFlush(){d(this,"requestFlush"),null!==this.microTaskRequestFlushTask&&(this.microTaskRequestFlushTask.cancel(),this.microTaskRequestFlushTask=null),this.flushRequested||(this.flushRequested=!0,this.lastRequest=this.now(),this.flushRequestor.request()),p(this,"requestFlush")}requestFlushClamped(){d(this,"requestFlushClamped"),this.priority<=0?this.microTaskRequestFlushTask=this.scheduler.queueMacroTask(this.requestFlush,y):this.requestFlush(),p(this,"requestFlushClamped")}}const y={delay:0,preempt:!0,persistent:!1,reusable:!0,async:!1},w=new WeakMap,C=i.a.createInterface("IScheduler").noDefault();class S{constructor(t,e,n,i,r,s){this.taskQueues=[this.microtask=new m(t,0,this,e),this.render=new m(t,1,this,n),this.macroTask=new m(t,2,this,i),this.postRender=new m(t,3,this,r),this.idle=new m(t,4,this,s)],this.yieldMicroTask=this.yieldMicroTask.bind(this),this.yieldRenderTask=this.yieldRenderTask.bind(this),this.yieldMacroTask=this.yieldMacroTask.bind(this),this.yieldPostRenderTask=this.yieldPostRenderTask.bind(this),this.yieldIdleTask=this.yieldIdleTask.bind(this),this.yieldAll=this.yieldAll.bind(this)}static get(t){return w.get(t)}static set(t,e){w.set(t,e)}getTaskQueue(t){return this.taskQueues[t]}yield(t){return this.taskQueues[t].yield()}queueTask(t,e){const{delay:n,preempt:i,priority:r,persistent:s,reusable:o,async:c}={...a,...e};return this.taskQueues[r].queueTask(t,{delay:n,preempt:i,persistent:s,reusable:o,async:c})}getMicroTaskQueue(){return this.microtask}getRenderTaskQueue(){return this.render}getMacroTaskQueue(){return this.macroTask}getPostRenderTaskQueue(){return this.postRender}getIdleTaskQueue(){return this.idle}yieldMicroTask(){return this.microtask.yield()}yieldRenderTask(){return this.render.yield()}yieldMacroTask(){return this.macroTask.yield()}yieldPostRenderTask(){return this.postRender.yield()}yieldIdleTask(){return this.idle.yield()}async yieldAll(t=1){for(;t-- >0;)await this.yieldMicroTask(),await this.yieldRenderTask(),await this.yieldMacroTask(),await this.yieldPostRenderTask(),await this.yieldIdleTask()}queueMicroTask(t,e){return this.microtask.queueTask(t,e)}queueRenderTask(t,e){return this.render.queueTask(t,e)}queueMacroTask(t,e){return this.macroTask.queueTask(t,e)}queuePostRenderTask(t,e){return this.postRender.queueTask(t,e)}queueIdleTask(t,e){return this.idle.queueTask(t,e)}}},function(t,e,n){"use strict";(function(t,i){n.d(e,"a",(function(){return p}));const r=function(){if(void 0!==t)return t;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;try{return new Function("return this")()}catch(t){return{}}}(),s="undefined"!=typeof window&&void 0!==window.document,o="object"==typeof self&&null!=self.constructor&&"DedicatedWorkerGlobalScope"===self.constructor.name,a=void 0!==i&&null!=i.versions&&null!=i.versions.node,c=function(){var t,e;let n,i,s,o,a;if(null!=(null===(t=r.performance)||void 0===t?void 0:t.now)){const t=r.performance;return function(){return t.now()}}if(null!=(null===(e=r.process)||void 0===e?void 0:e.hrtime)){const t=function(){return(n()-o)/1e6};return i=r.process.hrtime,n=function(){const t=i();return 1e9*t[0]+t[1]},s=n(),a=1e9*r.process.uptime(),o=s-a,t}{const t=function(){return Date.now()-o};return o=Date.now(),t}}(),l=Object.prototype.hasOwnProperty,h=Object.freeze([]),u=Object.freeze({}),d={isBrowserLike:s,isWebWorkerLike:o,isNodeLike:a,global:r,emptyArray:h,emptyObject:u,noop:function(){},now:c,hasOwnProperty:l,restore(){Object.assign(p,d)}},p={...d}}).call(this,n(9),n(8))},function(t,e,n){"use strict";var i=n(0),r=n(1);r.a,r.b,r.c,r.d,r.e,r.f,r.g,r.j,r.m,r.n,r.q,r.r,r.s,r.t,r.C,r.D,r.X,r.eb,r.fb,r.ib,r.tb,r.vb,r.xb,r.yb;i.j;function s(t){const e=o[t];return void 0!==e?e:function(t){return{level:4,message:`Attempted to report with unknown code ${t}.`}}(t)}const o={0:{level:3,message:"Cannot add observers to object."},1:{level:3,message:"Cannot observe property of object."},2:{level:2,message:"Starting application in debug mode."},3:{level:4,message:"Runtime expression compilation is only available when including JIT support."},4:{level:4,message:"Invalid animation direction."},5:{level:4,message:"key/value cannot be null or undefined. Are you trying to inject/register something that doesn't exist with DI?"},6:{level:4,message:"Invalid resolver strategy specified."},7:{level:4,message:"Constructor Parameter with index cannot be null or undefined. Are you trying to inject/register something that doesn't exist with DI?"},8:{level:4,message:"Self binding behavior only supports events."},9:{level:4,message:"The updateTrigger binding behavior requires at least one event name argument: eg <input value.bind=\"firstName & updateTrigger:'blur'\">"},10:{level:4,message:"The updateTrigger binding behavior can only be applied to two-way/ from-view bindings on input/select elements."},11:{level:4,message:"Only property bindings and string interpolation bindings can be signaled. Trigger, delegate and call bindings cannot be signaled."},12:{level:4,message:"Signal name is required."},14:{level:4,message:"Property cannot be assigned."},15:{level:4,message:"Unexpected call context."},16:{level:4,message:"A dependency registration is missing for the interface %s."},17:{level:4,message:"You can only define one default implementation for an interface."},18:{level:4,message:"You cannot observe a setter only property."},19:{level:4,message:"Value for expression is non-repeatable."},20:{level:4,message:"No template compiler found with the specified name. JIT support or a custom compiler is required."},21:{level:4,message:"You cannot combine the containerless custom element option with Shadow DOM."},22:{level:4,message:"A containerless custom element cannot be the root component of an application."},30:{level:4,message:"There are more targets than there are target instructions."},31:{level:4,message:"There are more target instructions than there are targets."},100:{level:4,message:"Invalid start of expression."},101:{level:4,message:"Unconsumed token."},102:{level:4,message:"Double dot and spread operators are not supported."},103:{level:4,message:"Invalid member expression."},104:{level:4,message:"Unexpected end of expression."},105:{level:4,message:"Expected identifier."},106:{level:4,message:'Invalid BindingIdentifier at left hand side of "of".'},107:{level:4,message:"Invalid or unsupported property definition in object literal."},108:{level:4,message:"Unterminated quote in string literal."},109:{level:4,message:"Unterminated template string."},110:{level:4,message:"Missing expected token."},111:{level:4,message:"Unexpected character."},150:{level:4,message:"Left hand side of expression is not assignable."},151:{level:4,message:'Unexpected keyword "of"'},401:{level:3,message:"AttributePattern is missing a handler for '%s'."},402:{level:3,message:"AttributePattern handler for '%s' is not a function."},800:{level:4,message:"Property '%s' is being dirty-checked."},801:{level:3,message:"Property '%s' is being dirty-checked."},2e3:{level:4,message:"Router has not been activated."},2001:{level:4,message:"Router has already been activated."},2002:{level:4,message:"Failed to resolve all viewports."},2003:{level:4,message:"Browser navigation has already been activated."},2004:{level:4,message:"LinkHandler has already been activated."},1001:{level:2,message:"DOM already initialized. Destroying and re-initializing.."},1e4:{level:1,message:"%s"}},a={objName:"marker",methodName:"noop",params:i.g.emptyArray,depth:-1,prev:null,next:null};let c=(()=>{class t{constructor(e,n,i){this.objName=e,this.methodName=n,this.params=i,this.objName=e,this.methodName=n,this.depth=t.stack.length,this.params=i,this.next=a,this.prev=t.tail,t.tail.next=this,t.tail=this,t.stack.push(this)}static reset(){let e=t.head,n=null;for(;null!=e;)n=e.next,e.next=null,e.prev=null,e.params=null,e=n;t.head=a,t.tail=a,t.stack=[]}static enter(e,n,i){return new t(e,n,i)}static leave(){return t.stack.pop()}}return t.head=a,t.tail=a,t.stack=[],t})();i.k;const l={rendering:!0,binding:!0,observation:!0,attaching:!0,mounting:!0,di:!0,lifecycle:!0,jit:!0};const h=Object.prototype.toString;function u(t,e=0){return null!=t.params&&t.params.length>e?function(t){const e=[];128&t&&e.push("mustEvaluate");8&t&&e.push("updateTargetInstance");16&t&&e.push("updateSourceExpression");32&t&&e.push("fromBind");64&t&&e.push("fromUnbind");256&t&&e.push("isTraversingParentScope");1024&t&&e.push("allowParentScopeTraversal");1&t&&e.push("getterSetterStrategy");2&t&&e.push("proxyStrategy");16384&t&&e.push("secondaryExpression");if(0===e.length)return"none";return e.join("|")}(t.params[e]):"none"}function d(t){let e;return e=void 0===t?"undefined":null===t?"null":void 0!==t.constructor?t.constructor.description?`Resource{'${t.constructor.description.name}'}`:t.constructor.name:"string"==typeof t?`'${t}'`:h.call(t),e}function p(t,e=0){return null!=t.params&&t.params.length>e?d(t.params[e]):"undefined"}function f(t,e=0){let n;if(null!=t.params&&t.params.length>e){const i=t.params[e];return n=null!=i&&null!=i.bindingContext?d(i.bindingContext):"undefined",`Scope{${n}}`}return"undefined"}function g(t,e=0){if(null!=t.params&&t.params.length>e){const n=t.params[e];return"string"==typeof n?`'${n}'`:void 0!==n&&Reflect.has(n,"friendlyName")?n.friendlyName:d(n)}return"undefined"}function v(t,e=0){if(null!=t.params&&t.params.length>e){const n=t.params[e];return"string"==typeof n?`'${n}'`:n.toString()}return"undefined"}const b={$hydrate:t=>u(t),render:t=>`${u(t)},IDOM,IContainer,${p(t,3)}`,addBinding:t=>`${p(t)},${p(t,1)}`,addComponent:t=>`${p(t)},${p(t,1)}`},m={$bind:t=>u(t),$unbind:t=>u(t),connect:t=>u(t),constructor(t){switch(t.objName){case"ArrayObserver":case"MapObserver":case"SetObserver":return u(t);case"SetterObserver":case"BindableObserver":return`${u(t)},${p(t,1)},${v(t,2)}`;case"ProxyObserver":return p(t);case"ProxySubscriberCollection":case"DirtyCheckProperty":return`${p(t,1)},${v(t,2)}`;case"PrimitiveObserver":case"PropertyAccessor":return`${p(t)},${v(t,1)}`;default:return""}},lockedBind:t=>u(t),lockedUnbind:t=>u(t),InternalObserversLookup:t=>`${u(t)},${p(t,1)},${v(t,2)}`,BindingContext(t){switch(t.methodName){case"get":return`${f(t)},${v(t,1)},${v(t,2)},${u(t,3)}`;case"getObservers":return u(t);default:return"unknown"}},Scope(t){switch(t.methodName){case"create":return`${u(t)},${p(t,1)},${p(t,2)}`;case"fromOverride":return`${u(t)},${p(t,1)}`;case"fromParent":return`${u(t)},${f(t,1)},${p(t,2)}`;default:return"unknown"}},OverrideContext(t){switch(t.methodName){case"create":return`${u(t)},${p(t,1)},${p(t,2)}`;case"getObservers":return"";default:return"unknown"}}},y={callSource(t){const e=[];switch(t.objName){case"Listener":return t.params[0].type;case"CallBinding":if(null!=t.params)for(let n=0,i=t.params.length;n<i;++n)e.push(p(t,n));return e.join(",");default:return"unknown"}},setValue(t){let e;const n=t.params[0];switch(typeof n){case"undefined":e="undefined";break;case"object":e=null===n?"null":d(n);break;case"string":e=`'${n}'`;break;case"number":e=n.toString();break;default:e=d(n)}return`${e},${u(t,1)}`},flush:t=>u(t),handleChange:t=>`${v(t)},${v(t,1)},${u(t,2)}`,lockScope:t=>f(t)},w={$attach:t=>u(t),$detach:t=>u(t),$cache:t=>u(t),setLocation:t=>`Node{'${t.params[0].textContent}'}`},C={project:t=>p(t),take:t=>p(t)},S={construct:t=>p(t),Container(t){const e=[];switch(t.methodName){case"get":case"getAll":return g(t);case"register":if(null!=t.params)for(let n=0,i=t.params.length;n<i;++n)e.push(g(t,n));return e.join(",");case"createChild":return"";default:return"unknown"}}},k={Lifecycle(t){switch(t.methodName.slice(0,3)){case"beg":return"";case"enq":return p(t);case"end":case"pro":return u(t);default:return"unknown"}},CompositionCoordinator(t){switch(t.methodName){case"enqueue":return"IController";case"swap":return"IController,"+u(t,1);case"processNext":return"";default:return"unknown"}},AggregateLifecycleTask(t){switch(t.methodName){case"addTask":case"removeTask":return p(t);case"complete":return""+v(t,2);default:return"unknown"}}},O={TemplateBinder:t=>""}},function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var i=n(0),r=n(1),s=n(2),o=n(3);function a(t,e){let n=o.c.get(i.g.global);return void 0===n&&o.c.set(i.g.global,n=new o.c(t.get(o.b),{create(t){let e=!1,n=!1;const i=Promise.resolve();function r(){n?n=!1:(e=!1,t.flush())}return{request(){e||(n=!1,e=!0,i.then(r))},cancel(){n=!0,e=!1}}}},function(t){return{create(e){let n=-1;function i(){n>-1&&(n=-1,e.flush())}return{cancel(){n>-1&&(t.cancelAnimationFrame(n),n=-1)},request(){-1===n&&(n=t.requestAnimationFrame(i))}}}}}(e),function(t){return{create(e){let n=-1;function i(){n>-1&&(n=-1,e.flush())}return{cancel(){n>-1&&(t.clearTimeout(n),n=-1)},request(){-1===n&&(n=t.setTimeout(i,0))}}}}}(e),function(t){return{create(e){let n=-1,i=-1;function r(){i>-1&&(i=-1,e.flush())}function s(){n>-1&&(n=-1,-1===i&&(i=t.setTimeout(r,0)))}return{cancel(){n>-1&&(t.cancelAnimationFrame(n),n=-1),i>-1&&(t.clearTimeout(i),i=-1)},request(){-1===n&&(n=t.requestAnimationFrame(s))}}}}}(e),function(t){return{create(e){let n=-1;function r(){n>-1&&(n=-1,e.flush())}return"function"==typeof t.requestIdleCallback&&Object(i.v)(t.requestIdleCallback)?{cancel(){n>-1&&(t.cancelIdleCallback(n),n=-1)},request(){-1===n&&(n=t.requestIdleCallback(r))}}:{cancel(){n>-1&&(t.clearTimeout(n),n=-1)},request(){-1===n&&(n=t.setTimeout(r,45))}}}}}(e))),n}var c=function(t,e,n,i){var r,s=arguments.length,o=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(o=(s<3?r(o):s>3?r(e,n,o):r(e,n))||o);return s>3&&o&&Object.defineProperty(e,n,o),o},l=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},h=function(t,e){return function(n,i){e(n,i,t)}};const u=[(()=>{let t=class{constructor(t){this.container=t}static register(t){return i.i.singleton(r.K,this).register(t)}initialize(t){if(this.container.has(r.J,!1))return this.container.get(r.J);let e;return e=void 0!==t?void 0!==t.dom?t.dom:null!==t.host.ownerDocument?new s.b(window,t.host.ownerDocument,Node,Element,HTMLElement,CustomEvent,CSSStyleSheet,ShadowRoot):new s.b(window,document,Node,Element,HTMLElement,CustomEvent,CSSStyleSheet,ShadowRoot):new s.b(window,document,Node,Element,HTMLElement,CustomEvent,CSSStyleSheet,ShadowRoot),i.i.instance(r.J,e).register(this.container),i.i.instance(r.R,a(this.container,window)).register(this.container),e}};return t=c([h(0,i.b),l("design:paramtypes",[Object])],t),t})()],d={register:t=>s.g.register(t).register(...u),createContainer(){return this.register(i.a.createContainer())}}},function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return a}));n(5);var i=n(6),r=n(0),s=n(1);function o(){const e=new a;return e.register(i.a),void 0!==t&&t.env,e}class a extends s.i{constructor(t=r.a.createContainer()){super(t)}static start(t){return o().start(t)}static app(t){return o().app(t)}static enhance(t){return o().enhance(t)}static register(...t){return o().register(...t)}app(t){if(s.x.isType(t)){const e=s.x.getDefinition(t);let n=document.querySelector(e.name);return null===n&&(n=document.body),super.app({host:n,component:t})}return super.app(t)}}}).call(this,n(8))},function(t,e){var n,i,r=t.exports={};function s(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function a(t){if(n===setTimeout)return setTimeout(t,0);if((n===s||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:s}catch(t){n=s}try{i="function"==typeof clearTimeout?clearTimeout:o}catch(t){i=o}}();var c,l=[],h=!1,u=-1;function d(){h&&c&&(h=!1,c.length?l=c.concat(l):u=-1,l.length&&p())}function p(){if(!h){var t=a(d);h=!0;for(var e=l.length;e;){for(c=l,l=[];++u<e;)c&&c[u].run();u=-1,e=l.length}c=null,h=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===o||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(t)}}function f(t,e){this.fun=t,this.array=e}function g(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];l.push(new f(t,e)),1!==l.length||h||a(p)},f.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=g,r.addListener=g,r.once=g,r.off=g,r.removeListener=g,r.removeAllListeners=g,r.emit=g,r.prependListener=g,r.prependOnceListener=g,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";n.r(e);var i={};n.r(i),n.d(i,"name",(function(){return oe})),n.d(i,"template",(function(){return ae})),n.d(i,"default",(function(){return ce})),n.d(i,"dependencies",(function(){return le})),n.d(i,"register",(function(){return ue}));var r=n(7);n(5);var s=n(2);const o=0,a=1,c=2,l=3,h={maxRetries:3,interval:1e3,strategy:o};class u{constructor(t){if(this.retryConfig={...h,...void 0!==t?t:{}},this.retryConfig.strategy===c&&this.retryConfig.interval<=1e3)throw new Error("An interval less than or equal to 1 second is not allowed when using the exponential retry strategy")}request(t){return t.retryConfig||(t.retryConfig={...this.retryConfig},t.retryConfig.counter=0),t.retryConfig.requestClone=t.clone(),t}response(t,e){return Reflect.deleteProperty(e,"retryConfig"),t}responseError(t,e,n){const{retryConfig:i}=e,{requestClone:r}=i;return Promise.resolve().then(()=>{if(i.counter<i.maxRetries){const h=void 0===i.doRetry||i.doRetry(t,e);return Promise.resolve(h).then(h=>{if(h){i.counter++;const t=function(t){const{interval:e,strategy:n,minRandomInterval:i,maxRandomInterval:r,counter:s}=t;if("function"==typeof n)return t.strategy(s);switch(n){case o:return d[o](e);case a:return d[a](s,e);case c:return d[c](s,e);case l:return d[l](s,e,i,r);default:throw new Error("Unrecognized retry strategy")}}(i);return new Promise(e=>s.a.window.setTimeout(e,isNaN(t)?0:t)).then(()=>{const t=r.clone();return"function"==typeof i.beforeRetry?i.beforeRetry(t,n):t}).then(t=>{const e={...t,retryConfig:i};return n.fetch(e)})}throw Reflect.deleteProperty(e,"retryConfig"),t})}throw Reflect.deleteProperty(e,"retryConfig"),t})}}const d=[t=>t,(t,e)=>e*t,(t,e)=>1===t?e:e**t/1e3,(t,e,n=0,i=6e4)=>Math.random()*(i-n)+n];class p{constructor(){this.baseUrl="",this.defaults={},this.interceptors=[]}withBaseUrl(t){return this.baseUrl=t,this}withDefaults(t){return this.defaults=t,this}withInterceptor(t){return this.interceptors.push(t),this}useStandardConfiguration(){return Object.assign(this.defaults,{credentials:"same-origin"},this.defaults),this.rejectErrorResponses()}rejectErrorResponses(){return this.withInterceptor({response:f})}withRetry(t){const e=new u(t);return this.withInterceptor(e)}}function f(t){if(!t.ok)throw t;return t}var g=n(1),v=function(t,e,n,i){var r,s=arguments.length,o=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(o=(s<3?r(o):s>3?r(e,n,o):r(e,n))||o);return s>3&&o&&Object.defineProperty(e,n,o),o},b=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},m=function(t,e){return function(n,i){e(n,i,t)}};const y=/^([a-z][a-z0-9+\-.]*:)?\/\//i;(()=>{let t=class{constructor(t){if(this.dom=t,void 0===t.window.fetch)throw new Error("HttpClient requires a Fetch API implementation, but the current environment doesn't support it. You may need to load a polyfill such as https://github.com/github/fetch");this.dom=t,this.activeRequestCount=0,this.isRequesting=!1,this.isConfigured=!1,this.baseUrl="",this.defaults=null,this.interceptors=[]}configure(t){let e;if("object"==typeof t){e={defaults:t}}else{if("function"!=typeof t)throw new Error("invalid config");{e=new p,e.baseUrl=this.baseUrl,e.defaults={...this.defaults},e.interceptors=this.interceptors;const n=t(e);Object.prototype.isPrototypeOf.call(p.prototype,n)&&(e=n)}}const n=e.defaults;if(void 0!==n&&Object.prototype.isPrototypeOf.call(Headers.prototype,n.headers))throw new Error("Default headers must be a plain object.");const i=e.interceptors;if(void 0!==i&&i.length){if(i.filter(t=>Object.prototype.isPrototypeOf.call(u.prototype,t)).length>1)throw new Error("Only one RetryInterceptor is allowed.");const t=i.findIndex(t=>Object.prototype.isPrototypeOf.call(u.prototype,t));if(t>=0&&t!==i.length-1)throw new Error("The retry interceptor must be the last interceptor defined.")}return this.baseUrl=e.baseUrl,this.defaults=n,this.interceptors=void 0!==e.interceptors?e.interceptors:[],this.isConfigured=!0,this}fetch(t,e){this.trackRequestStart();let n=this.buildRequest(t,e);return this.processRequest(n,this.interceptors).then(t=>{let e;if(Object.prototype.isPrototypeOf.call(Response.prototype,t))e=Promise.resolve(t);else{if(!Object.prototype.isPrototypeOf.call(Request.prototype,t))throw new Error(`An invalid result was returned by the interceptor chain. Expected a Request or Response instance, but got [${t}]`);n=t,e=fetch(n)}return this.processResponse(e,this.interceptors,n)}).then(t=>Object.prototype.isPrototypeOf.call(Request.prototype,t)?this.fetch(t):t).then(t=>(this.trackRequestEnd(),t),t=>{throw this.trackRequestEnd(),t})}buildRequest(t,e){const n=null!==this.defaults?this.defaults:{};let i,r,s;const o=function(t){const e={},n=void 0!==t?t:{};for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]="function"==typeof n[t]?n[t]():n[t]);return e}(n.headers);if(Object.prototype.isPrototypeOf.call(Request.prototype,t))i=t,s=new Headers(i.headers).get("Content-Type");else{e||(e={}),r=e.body;const o=void 0!==r?{body:r}:null,a={...n,headers:{},...e,...o};s=new Headers(a.headers).get("Content-Type"),i=new Request(function(t,e){if(y.test(e))return e;return(void 0!==t?t:"")+e}(this.baseUrl,t),a)}return s||(new Headers(o).has("content-type")?i.headers.set("Content-Type",new Headers(o).get("content-type")):void 0!==r&&function(t){try{JSON.parse(t)}catch(t){return!1}return!0}(r)&&i.headers.set("Content-Type","application/json")),function(t,e){const n=void 0!==e?e:{};for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&!t.has(e)&&t.set(e,n[e])}(i.headers,o),void 0!==r&&Object.prototype.isPrototypeOf.call(Blob.prototype,r)&&r.type&&i.headers.set("Content-Type",r.type),i}get(t,e){return this.fetch(t,e)}post(t,e,n){return this.callFetch(t,e,n,"POST")}put(t,e,n){return this.callFetch(t,e,n,"PUT")}patch(t,e,n){return this.callFetch(t,e,n,"PATCH")}delete(t,e,n){return this.callFetch(t,e,n,"DELETE")}trackRequestStart(){if(this.isRequesting=!!++this.activeRequestCount,this.isRequesting){const t=s.a.createCustomEvent("aurelia-fetch-client-request-started",{bubbles:!0,cancelable:!0});s.a.window.setTimeout(()=>{s.a.dispatchEvent(t)},1)}}trackRequestEnd(){if(this.isRequesting=!!--this.activeRequestCount,!this.isRequesting){const t=s.a.createCustomEvent("aurelia-fetch-client-requests-drained",{bubbles:!0,cancelable:!0});s.a.window.setTimeout(()=>{s.a.dispatchEvent(t)},1)}}processRequest(t,e){return this.applyInterceptors(t,e,"request","requestError",this)}processResponse(t,e,n){return this.applyInterceptors(t,e,"response","responseError",n,this)}applyInterceptors(t,e,n,i,...r){return(void 0!==e?e:[]).reduce((t,e)=>{const s=e[n],o=e[i];return t.then(s?t=>s.call(e,t,...r):w,o?t=>o.call(e,t,...r):C)},Promise.resolve(t))}callFetch(t,e,n,i){return n||(n={}),n.method=i,e&&(n.body=e),this.fetch(t,n)}};t=v([m(0,g.J),b("design:paramtypes",[s.b])],t)})();function w(t){return t}function C(t){throw t}n(6);var S=n(0);let k=(()=>{class t{constructor(e){this.options={useHref:!0,callback:()=>{}},this.isActive=!1,this.handler=e=>{const n=t.getEventInfo(e,this.window,this.options);n.shouldHandleEvent&&(e.preventDefault(),this.options.callback(n))},this.window=e.window,this.document=e.document}static getEventInfo(e,n,i){var r;const s={shouldHandleEvent:!1,instruction:null,anchor:null},o=s.anchor=e.currentTarget;if(!o||!t.targetIsThisWindow(o,n))return s;if(o.hasAttribute("external"))return s;if(e.altKey||e.ctrlKey||e.metaKey||e.shiftKey)return s;const a=g.v.for(o,"goto"),c=void 0!==a?a.viewModel.value:null,l=g.v.for(o,"load"),h=void 0!==l?l.viewModel.value:null,u=i.useHref&&o.hasAttribute("href")?o.getAttribute("href"):null;if(!(null!==c&&0!==c.length||null!==h&&0!==h.length||null!==u&&0!==u.length))return s;s.anchor=o,s.instruction=null!==(r=null!=h?h:c)&&void 0!==r?r:u;const d=0===e.button;return s.shouldHandleEvent=d,s}static targetIsThisWindow(t,e){const n=t.getAttribute("target");return!n||n===e.name||"_self"===n}start(t){if(this.isActive)throw new Error("Link handler has already been started");this.isActive=!0,this.options={...t}}stop(){if(!this.isActive)throw new Error("Link handler has not been started");this.isActive=!1}}return t.inject=[g.J],t})();function O(t,e){const n=[];let i=t.findIndex(e);for(;i>=0;)n.push(t.splice(i,1)[0]),i=t.findIndex(e);return n}function j(t,e){console.warn(`[Deprecated] The ${t} has been deprecated. Please use the ${e} instead.`)}function T(t){if(!t||!t.length)return{};const e={},n=t.replace("+"," ").split("&");for(const t of n){const[n,i]=t.split("=");e[decodeURIComponent(n)]=decodeURIComponent(void 0!==i?i:n)}return e}class x{constructor(t={instruction:"",fullStateInstruction:""}){var e;this.navigation=null!==(e=t.navigation)&&void 0!==e?e:{first:!1,new:!1,refresh:!1,forward:!1,back:!1,replace:!1},this.repeating=t.repeating,this.fromBrowser=t.fromBrowser,this.origin=t.origin,this.replacing=t.replacing,this.refreshing=t.refreshing,this.untracked=t.untracked,this.historyMovement=t.historyMovement,this.resolve=t.resolve,this.reject=t.reject,this.instruction=t.instruction,this.fullStateInstruction=t.fullStateInstruction,this.scope=t.scope,this.index=t.index,this.firstEntry=t.firstEntry,this.route=t.route,this.path=t.path,this.title=t.title,this.query=t.query,this.parameters=t.parameters,this.data=t.data}get useFullStateInstruction(){var t,e;return null!==(t=this.navigation.back)&&void 0!==t&&t||null!==(e=this.navigation.forward)&&void 0!==e&&e}toStored(){return{navigation:this.navigation,repeating:this.repeating,instruction:this.instruction,fullStateInstruction:this.fullStateInstruction,scope:this.scope,index:this.index,firstEntry:this.firstEntry,route:this.route,path:this.path,title:this.title,query:this.query,parameters:this.parameters,data:this.data}}}let A=(()=>{class t{constructor(){this.isDone=!1,this.isCancelled=!1,this.isResolved=!1,this.isRejected=!1,this.isAsync=!1}get stop(){return this.isCancelled||this.isRejected}static run(...e){const n=new t,i=t.$run(n,...e);return i instanceof Promise&&(this.runners.set(i,n),i.then(()=>{n.isDone=!0,n.isAsync&&!n.stop&&(n.isResolved=!0),this.runners.delete(i)}).catch(t=>{throw t})),i}static runner(e){if(e instanceof Promise)return t.runners.get(e)}static cancel(e){const n=t.runner(e);void 0!==n&&n.cancel()}static runAll(e){const n=new t,i=t.$runAll(n,e);if(n.isAsync){const t=Promise.all(i);return this.runners.set(t,n),t.then(()=>{n.isDone=!0,n.isAsync&&!n.stop&&(n.isResolved=!0),this.runners.delete(t)}).catch(t=>{throw t}),t}return i}static runOne(e){let n;for(;e instanceof Function;)(e=e(n))instanceof Function||e instanceof Promise||(n=e);return e instanceof Function||e instanceof Promise||(n=e),e instanceof Promise?e.then(e=>t.runOne(e)).catch(t=>{throw t}):n}cancel(){this.isCancelled=!0}static $run(e,...n){let i;for(;n.length>0&&!e.stop;){for(i=n.shift();i instanceof Function&&!e.stop;)i=i(e.value),i instanceof Function||i instanceof Promise||(e.value=i);if(i instanceof Function||i instanceof Promise||(e.value=i),i instanceof Promise)break}return i instanceof Promise&&!e.stop?(e.isAsync=!0,i.then(i=>t.$run(e,i,...n)).catch(t=>{throw e.isRejected=!0,t})):e.value}static $runAll(t,e){const n=new Array(e.length);return e.forEach((e,i)=>{for(;e instanceof Function;)(e=e(n[i]))instanceof Function||e instanceof Promise||(n[i]=e);e instanceof Function||(n[i]=e),e instanceof Promise&&(t.isAsync=!0)}),n}}return t.runners=new WeakMap,t})();class R{constructor(){this.isPending=!0,this.promise=new Promise((t,e)=>{this.res=t,this.rej=e})}resolve(t){this.res(t),this.isPending=!1}reject(t){this.rej(t),this.isPending=!1}}class P{constructor(){this.map=new Map}set(t,e){const n=this.map.get(t);n instanceof R&&n.resolve(e),this.map.set(t,e)}delete(t){const e=this.map.get(t);e instanceof R&&e.reject(),this.map.delete(t)}await(t){if(!this.map.has(t)){const e=new R;return this.map.set(t,e),e.promise}const e=this.map.get(t);return e instanceof R?e.promise:e}has(t){return this.map.has(t)&&!(this.map.get(t)instanceof R)}clone(){const t=new P;return t.map=new Map(this.map),t}}var I,E;!function(t){t[t.none=0]="none",t[t.created=1]="created",t[t.activated=3]="activated"}(I||(I={}));class V{constructor(t=it.create(null,""),e=new x({instruction:"",fullStateInstruction:""}),n=null){var i;this.content=t,this.instruction=e,this.contentStates=new P,this.loaded=!1,this.fromCache=!1,this.fromHistory=!1,this.reentry=!1,this.content.isComponentType()||null===(null!==(i=null==n?void 0:n.container)&&void 0!==i?i:null)||(this.content.componentType=this.toComponentType(n.container))}get componentInstance(){return this.content.componentInstance}get viewport(){return this.content.viewport}equalComponent(t){return this.content.sameComponent(t.content)}equalParameters(t){return this.content.sameComponent(t.content,!0)&&this.instruction.query===t.instruction.query}reentryBehavior(){return null!==this.content.componentInstance&&"reentryBehavior"in this.content.componentInstance&&void 0!==this.content.componentInstance.reentryBehavior?this.content.componentInstance.reentryBehavior:"default"}isCacheEqual(t){return this.content.sameComponent(t.content,!0)}contentController(t){return g.u.forCustomElement(this.content.componentInstance,t.container.get(g.M),t.element,t.container,null,void 0)}createComponent(t,e){if(!this.contentStates.has("created")){if(!this.fromCache&&!this.fromHistory)try{this.content.componentInstance=this.toComponentInstance(t.container)}catch(n){if(void 0===e)throw n;this.content.setParameters({id:this.content.componentName}),this.content.setComponent(e);try{this.content.componentInstance=this.toComponentInstance(t.container)}catch(t){throw n}}if(this.contentStates.set("created",void 0),!this.contentStates.has("loaded")&&this.content.componentInstance&&(!this.fromCache||!this.fromHistory)){this.contentController(t).parent=t.controller}}}canLoad(t,e){if(!this.contentStates.has("created")||this.contentStates.has("guarded")&&!this.reentry)return!0;if(this.contentStates.set("guarded",void 0),!this.content.componentInstance)return!1;if(!this.content.componentInstance.canLoad)return!0;const n=this.content.componentType?this.content.componentType.parameters:null;this.instruction.parameters=this.content.toSpecifiedParameters(n);const i={...T(this.instruction.query),...this.instruction.parameters},r=this.content.componentInstance.canLoad(i,this.instruction,e);return"boolean"==typeof r?r:"string"==typeof r?[t.router.createViewportInstruction(r,t)]:r}canUnload(t){return!this.content.componentInstance||!this.content.componentInstance.canUnload||(!this.contentStates.has("loaded")||this.content.componentInstance.canUnload(t,this.instruction))}load(t){return A.run(()=>this.contentStates.await("guarded"),()=>{if(this.contentStates.has("created")&&(!this.contentStates.has("loaded")||this.reentry)&&(this.reentry=!1,this.contentStates.set("loaded",void 0),this.content.componentInstance&&this.content.componentInstance.load)){const e=this.content.componentType?this.content.componentType.parameters:null;this.instruction.parameters=this.content.toSpecifiedParameters(e);const n={...T(this.instruction.query),...this.instruction.parameters};return this.content.componentInstance.load(n,this.instruction,t)}})}unload(t){if(this.contentStates.has("loaded"))return this.contentStates.delete("loaded"),this.content.componentInstance&&this.content.componentInstance.unload?this.content.componentInstance.unload(t,this.instruction):void 0}activateComponent(t,e,n,i,r){return A.run(()=>this.contentStates.await("loaded"),()=>{if(this.contentStates.has("activated"))return;this.contentStates.set("activated",void 0);const e=this.contentController(i);return e.activate(null!=t?t:e,null,n)},()=>{if(this.fromCache||this.fromHistory){const t=Array.from(i.element.getElementsByTagName("*"));for(const e of t){const t=e.getAttribute("au-element-scroll");if(t){const[n,i]=t.split(",");e.removeAttribute("au-element-scroll"),e.scrollTo(+i,+n)}}}})}deactivateComponent(t,e,n,i,r=!1){if(!this.contentStates.has("activated"))return;if(this.contentStates.delete("activated"),r&&null!==i.element){const t=Array.from(i.element.getElementsByTagName("*"));for(const e of t)(e.scrollTop>0||e.scrollLeft)&&e.setAttribute("au-element-scroll",`${e.scrollTop},${e.scrollLeft}`)}const s=this.contentController(i);return A.run(()=>s.deactivate(null!=t?t:s,e,n))}disposeComponent(t,e,n=!1){if(this.contentStates.has("created")){if(!n){this.contentStates.delete("created");return this.contentController(t).dispose()}e.push(this)}}freeContent(t,e,n,i=!1){return A.run(()=>this.unload(e),()=>this.deactivateComponent(null,t.controller,0,t,i),()=>this.disposeComponent(t,n,i))}toComponentName(){return this.content.componentName}toComponentType(t){return this.content.isEmpty()?null:this.content.toComponentType(t)}toComponentInstance(t){return this.content.isEmpty()?null:this.content.toComponentInstance(t)}}class ${constructor(t,e,n,i,r,s=null,o={catches:[],source:null}){this.name=t,this.router=e,this.connectedCE=n,this.rootComponentType=s,this.options=o,this.path=null,this.content=null,this.nextContent=null,this.available=!0,this.sourceItem=null,this.sourceItemIndex=-1,this.remove=!1,this.add=!1,this.connectedScope=new G(e,r,i,null,this),this.catches.length>0&&(this.content=e.createViewportInstruction(this.catches[0],this.name))}get scope(){return this.connectedScope.scope}get owningScope(){return this.connectedScope.owningScope}get enabled(){return this.connectedScope.enabled}set enabled(t){this.connectedScope.enabled=t}get isViewport(){return!1}get isViewportScope(){return!0}get isEmpty(){return null===this.content}get passThroughScope(){return null===this.rootComponentType&&0===this.catches.length}get siblings(){const t=this.connectedScope.parent;return null===t?[this]:t.enabledChildren.filter(t=>t.isViewportScope&&t.viewportScope.name===this.name).map(t=>t.viewportScope)}get source(){return this.options.source||null}get catches(){let t=this.options.catches||[];return"string"==typeof t&&(t=t.split(",")),t}get default(){if(this.catches.length>0)return this.catches[0]}get nextContentActivated(){var t,e,n;return null!==(n=null===(e=null===(t=this.scope.parent)||void 0===t?void 0:t.owner)||void 0===e?void 0:e.nextContentActivated)&&void 0!==n&&n}get parentNextContentActivated(){var t,e,n;return null!==(n=null===(e=null===(t=this.scope.parent)||void 0===t?void 0:t.owner)||void 0===e?void 0:e.nextContentActivated)&&void 0!==n&&n}get nextContentAction(){return""}toString(){var t,e,n,i;const r=null!==(e=null===(t=this.content)||void 0===t?void 0:t.componentName)&&void 0!==e?e:"",s=null!==(i=null===(n=this.nextContent)||void 0===n?void 0:n.componentName)&&void 0!==i?i:"";return`vs:${this.name}[${r}->${s}]`}setNextContent(t,e){return t.viewportScope=this,this.remove=this.router.instructionResolver.isClearViewportInstruction(t)||this.router.instructionResolver.isClearAllViewportsInstruction(t),this.add=this.router.instructionResolver.isAddViewportInstruction(t)&&Array.isArray(this.source),this.add&&(t.componentName=null),void 0!==this.default&&null===t.componentName&&(t.componentName=this.default),this.nextContent=t,"swap"}transition(t){A.run(()=>t.addEntityState(this,"guardedUnload"),()=>t.addEntityState(this,"guardedLoad"),()=>t.addEntityState(this,"guarded"),()=>t.addEntityState(this,"loaded"),()=>t.addEntityState(this,"unloaded"),()=>t.addEntityState(this,"routed"),()=>t.addEntityState(this,"swapped"),()=>{this.content=this.remove?null:this.nextContent,this.nextContent=null,t.addEntityState(this,"completed")})}canUnload(){return!0}canLoad(){return!0}unload(){}load(){}finalizeContentChange(){this.remove&&Array.isArray(this.source)&&this.removeSourceItem()}abortContentChange(){if(this.nextContent=null,this.add){const t=this.source.indexOf(this.sourceItem);this.source.splice(t,1),this.sourceItem=null}return Promise.resolve()}acceptSegment(t){return null===t&&void 0===t||0===t.length||(t===this.router.instructionResolver.clearViewportInstruction||t===this.router.instructionResolver.addViewportInstruction||t===this.name||(0===this.catches.length||(!!this.catches.includes(t)||!!this.catches.filter(t=>t.includes("*")).length)))}beforeBind(){(this.source||[]).length>0&&null===this.sourceItem&&(this.sourceItem=this.getAvailableSourceItem())}beforeUnbind(){null!==this.sourceItem&&null!==this.source&&O(this.source,t=>t===this.sourceItem),this.sourceItem=null}getAvailableSourceItem(){if(null===this.source)return null;const t=this.siblings;for(const e of this.source)if(t.every(t=>t.sourceItem!==e))return e;return null}addSourceItem(){const t={};return this.source.push(t),t}removeSourceItem(){this.sourceItemIndex=this.source.indexOf(this.sourceItem),this.sourceItemIndex>=0&&this.source.splice(this.sourceItemIndex,1)}getRoutes(){return null!==this.rootComponentType?this.rootComponentType.routes:null}}class N{constructor(t=null,e="",n=[],i="",r={}){this.match=t,this.matching=e,this.instructions=n,this.remaining=i,this.params=r}get foundConfiguration(){return null!==this.match}get foundInstructions(){return this.instructions.length>0}get hasRemaining(){return null!==this.remaining&&this.remaining.length>0}}class F extends Array{constructor(){super(...arguments),this.currentIndex=-1}next(){return this.length>this.currentIndex+1?this[++this.currentIndex]:(this.currentIndex=-1,null)}removeCurrent(){this.splice(this.currentIndex--,1)}remove(t){O(this,e=>e===t)}}class B{constructor(t,e,n){this.path=t,this.caseSensitive=e,this.handler=n}}class L{constructor(t,e){this.route=t,this.paramNames=e}}class M{constructor(t,e,n,i,r){this.endpoint=t,this.params=e,this.searchParams=n,this.isDynamic=i,this.queryString=r}}class D{constructor(t,e,n,i){var r;this.chars=t,this.states=e,this.skippedStates=n,this.result=i,this.head=e[e.length-1],this.endpoint=null===(r=this.head)||void 0===r?void 0:r.endpoint}advance(t){const{chars:e,states:n,skippedStates:i,result:r}=this;let s=null,o=0;const a=n[n.length-1];function c(l,h){if(l.isMatch(t)&&(1==++o?s=l:r.add(new D(e.concat(t),n.concat(l),null===h?i:i.concat(h),r))),null===a.segment&&l.isOptional&&null!==l.nextStates){if(l.nextStates.length>1)throw new Error(l.nextStates.length+" nextStates");const t=l.nextStates[0];if(!t.isSeparator)throw new Error("Not a separator");if(null!==t.nextStates)for(const e of t.nextStates)c(e,l)}}if(a.isDynamic&&c(a,null),null!==a.nextStates)for(const t of a.nextStates)c(t,null);null!==s&&(n.push(this.head=s),e.push(t),null!==s.endpoint&&(this.endpoint=s.endpoint)),0===o&&r.remove(this)}finalize(){!function t(e,n){const i=n.nextStates;if(null!==i)if(1===i.length&&null===i[0].segment)t(e,i[0]);else for(const n of i)if(n.isOptional&&null!==n.endpoint){if(e.push(n),null!==n.nextStates)for(const i of n.nextStates)t(e,i);break}}(this.skippedStates,this.head)}getParams(){const{states:t,chars:e,endpoint:n}=this,i={};for(const t of n.paramNames)i[t]=void 0;for(let n=0,r=t.length;n<r;++n){const r=t[n];if(r.isDynamic){const t=r.segment.name;void 0===i[t]?i[t]=e[n]:i[t]+=e[n]}}return i}compareTo(t){const e=this.states,n=t.states;for(let t=0,i=0,r=Math.max(e.length,n.length);t<r;++t){let r=e[t];if(void 0===r)return 1;let s=n[i];if(void 0===s)return-1;let o=r.segment,a=s.segment;if(null===o){if(null===a){++i;continue}if(void 0===(r=e[++t]))return 1;o=r.segment}else if(null===a){if(void 0===(s=n[++i]))return-1;a=s.segment}if(o.kind<a.kind)return 1;if(o.kind>a.kind)return-1;++i}const i=this.skippedStates,r=t.skippedStates,s=i.length,o=r.length;if(s<o)return 1;if(s>o)return-1;for(let t=0;t<s;++t){const e=i[t],n=r[t];if(e.length<n.length)return 1;if(e.length>n.length)return-1}return 0}}function U(t){return null!==t.head.endpoint}function q(t,e){return t.compareTo(e)}class _{constructor(t){this.candidates=[],this.candidates=[new D([""],[t],[],this)]}get isEmpty(){return 0===this.candidates.length}getSolution(){const t=this.candidates.filter(U);if(0===t.length)return null;for(const e of t)e.finalize();return t.sort(q),t[0]}add(t){this.candidates.push(t)}remove(t){this.candidates.splice(this.candidates.indexOf(t),1)}advance(t){const e=this.candidates.slice();for(const n of e)n.advance(t)}}class H{constructor(t,e,n){switch(this.prevState=t,this.segment=e,this.value=n,this.nextStates=null,this.endpoint=null,null==e?void 0:e.kind){case 2:this.length=t.length+1,this.isSeparator=!1,this.isDynamic=!0,this.isOptional=e.optional;break;case 1:this.length=t.length+1,this.isSeparator=!1,this.isDynamic=!0,this.isOptional=!1;break;case 3:this.length=t.length+1,this.isSeparator=!1,this.isDynamic=!1,this.isOptional=!1;break;case void 0:this.length=null===t?0:t.length,this.isSeparator=!0,this.isDynamic=!1,this.isOptional=!1}}append(t,e){let n,i=this.nextStates;return null===i?(n=void 0,i=this.nextStates=[]):n=null===t?i.find(t=>t.value===e):i.find(e=>{var n;return null===(n=e.segment)||void 0===n?void 0:n.equals(t)}),void 0===n&&i.push(n=new H(this,t,e)),n}setEndpoint(t){if(null!==this.endpoint)throw new Error(`Cannot add ambiguous route. The pattern ${t.route.path} clashes with ${this.endpoint.route.path}`);this.endpoint=t,this.isOptional&&(this.prevState.setEndpoint(t),this.prevState.isSeparator&&null!==this.prevState.prevState&&this.prevState.prevState.setEndpoint(t))}isMatch(t){const e=this.segment;switch(null==e?void 0:e.kind){case 2:return!this.value.includes(t);case 1:return!0;case 3:case void 0:return this.value.includes(t)}}}function z(t){return t.length>0}!function(t){t[t.star=1]="star",t[t.dynamic=2]="dynamic",t[t.static=3]="static"}(E||(E={}));class K{constructor(t,e){this.value=t,this.caseSensitive=e}get kind(){return 3}appendTo(t){const{value:e,value:{length:n}}=this;if(this.caseSensitive)for(let i=0;i<n;++i)t=t.append(this,e.charAt(i));else for(let i=0;i<n;++i){const n=e.charAt(i);t=t.append(this,n.toUpperCase()+n.toLowerCase())}return t}equals(t){return 3===t.kind&&t.caseSensitive===this.caseSensitive&&t.value===this.value}}class W{constructor(t,e){this.name=t,this.optional=e}get kind(){return 2}appendTo(t){return t=t.append(this,"/")}equals(t){return 2===t.kind&&t.optional===this.optional&&t.name===this.name}}class Q{constructor(t){this.name=t}get kind(){return 1}appendTo(t){return t=t.append(this,"")}equals(t){return 1===t.kind&&t.name===this.name}}const J=class{constructor(){this.rootState=new H(null,null,"")}add(t){if(t instanceof Array){for(const e of t)this.add(e);return}const e=t,n=new B(e.path,!0===e.caseSensitive,e.handler),i=n.path.split("/").filter(z);const r=[];let s=this.rootState;for(const t of i)switch(s=s.append(null,"/"),t.charAt(0)){case":":{const e=t.endsWith("?"),n=e?t.slice(1,-1):t.slice(1);r.push(n),s=new W(n,e).appendTo(s);break}case"*":{const e=t.slice(1);r.push(e),s=new Q(e).appendTo(s);break}default:s=new K(t,n.caseSensitive).appendTo(s)}const o=new L(n,r);s.setEndpoint(o)}recognize(t){let e,n="";const i=t.indexOf("?");i>=0?(n=t.slice(i+1),t=t.slice(0,i),e=new URLSearchParams(n)):e=new URLSearchParams,(t=decodeURI(t)).startsWith("/")||(t="/"+t),t.length>1&&t.endsWith("/")&&(t=t.slice(0,-1));const r=new _(this.rootState);for(let e=0,n=t.length;e<n;++e){const n=t.charAt(e);if(r.advance(n),r.isEmpty)return null}const s=r.getSolution();if(null===s)return null;const{endpoint:o}=s,a=s.getParams(),c=s.endpoint.paramNames.length>0;return new M(o,a,e,c,n)}};class G{constructor(t,e,n,i=null,r=null,s=null){this.router=t,this.hasScope=e,this.owningScope=n,this.viewport=i,this.viewportScope=r,this.rootComponentType=s,this.id=".",this.parent=null,this.children=[],this.replacedChildren=[],this.path=null,this.enabled=!0,this.childCollections={},this.owningScope=null!=n?n:this,this.scope=this.hasScope?this:this.owningScope.scope}toString(t=!1){return`${this.owningScope!==this?this.owningScope.toString():""}/${this.owner.toString()}`+(t?"\n"+this.children.map(t=>t.toString(!0)).join(""):"")}get isViewport(){return null!==this.viewport}get isViewportScope(){return null!==this.viewportScope}get passThroughScope(){return this.isViewportScope&&this.viewportScope.passThroughScope}get owner(){return this.isViewport?this.viewport:this.isViewportScope?this.viewportScope:null}get enabledChildren(){return this.children.filter(t=>t.enabled)}get hoistedChildren(){const t=this.enabledChildren;for(;t.some(t=>t.passThroughScope);)for(const e of t.slice())if(e.passThroughScope){const n=t.indexOf(e);t.splice(n,1,...e.enabledChildren)}return t}get enabledViewports(){return this.children.filter(t=>t.isViewport&&t.enabled).map(t=>t.viewport)}get viewportInstruction(){return this.isViewportScope?this.viewportScope.content:this.isViewport?this.viewport.content.content:null}get parentNextContentAction(){if(null===this.parent)return"";const t=this.parent.owner.nextContentAction;return"swap"===t||"skip"===t?t:this.parent.parentNextContentAction}getEnabledViewports(t){return t.filter(t=>!t.isViewportScope).map(t=>t.viewport).reduce((t,e)=>(t[e.name]=e,t),{})}getOwnedViewports(t=!1){return this.allViewports(t).filter(t=>t.owningScope===this)}getOwnedScopes(t=!1){const e=this.allScopes(t).filter(t=>t.owningScope===this);for(const t of e.slice())if(t.passThroughScope){const n=e.indexOf(t);e.splice(n,1,...t.getOwnedScopes())}return e}findInstructions(t){var e,n;let i=new N;if("string"==typeof t){const r=this.router.instructionResolver.parseViewportInstructions(t);if(this.router.options.useConfiguredRoutes&&!this.router.hasSiblingInstructions(r)){const s=this.findMatchingRoute(t);if(null!==(e=null==s?void 0:s.foundConfiguration)&&void 0!==e&&e)i=s;else if(this.router.options.useDirectRoutes&&(i.instructions=r,i.instructions.length>0)){const t=null!==(n=i.instructions[0].nextScopeInstructions)&&void 0!==n?n:[];i.remaining=this.router.instructionResolver.stringifyViewportInstructions(t),i.instructions[0].nextScopeInstructions=null}}else this.router.options.useDirectRoutes&&(i.instructions=r)}else i.instructions=t;for(const t of i.instructions)null===t.scope&&(t.scope=this);return i}findViewports(t,e,n=!1){var i;const r=[];let s=[];const o=this.getOwnedScopes(),a=o.filter(t=>t.isViewportScope).map(t=>t.viewportScope),c=a.filter(t=>e.every(e=>e.viewportScope!==t)),l={...this.getEnabledViewports(o)};for(const t of e.filter(t=>t.scope===this))l[t.viewportName]=null;const h=new F(...t.slice());let u=null;for(;null!==(u=h.next());)null===u.viewportScope||this.router.instructionResolver.isAddViewportInstruction(u)||(s.push(...this.foundViewportScope(u,u.viewportScope)),r.push(u),O(c,t=>t===u.viewportScope),h.removeCurrent());if(!n)for(;null!==(u=h.next());)null!==u.viewport&&(s.push(...this.foundViewport(u,u.viewport,n)),r.push(u),l[u.viewport.name]=null,h.removeCurrent());for(;null!==(u=h.next());)for(let t of a)if(t.acceptSegment(u.componentName)){if(Array.isArray(t.source)){let e=c.find(e=>e.name===t.name);if(void 0===e||this.router.instructionResolver.isAddViewportInstruction(u)){const n=t.addSourceItem();e=this.getOwnedScopes().filter(t=>t.isViewportScope).map(t=>t.viewportScope).find(t=>t.sourceItem===n)}t=e}s.push(...this.foundViewportScope(u,t)),r.push(u),O(c,t=>t===u.viewportScope),h.removeCurrent();break}for(;null!==(u=h.next());){u.needsViewportDescribed=!0;for(const t in l){const e=l[t];if(null==e?void 0:e.wantComponent(u.componentName)){const i=this.foundViewport(u,e,n,!0);r.push(u),s.push(...i),l[t]=null,h.removeCurrent();break}}}if(!n)for(;null!==(u=h.next());){const t=u.viewportName;if(!t||!t.length)continue;u.ownsScope;if(!this.getEnabledViewports(o)[t])continue;const e=l[t];if(null==e?void 0:e.acceptComponent(u.componentName)){const i=this.foundViewport(u,e,n,!0);r.push(u),s.push(...i),l[t]=null,h.removeCurrent()}}for(;null!==(u=h.next());){const t=[];for(const e in l){const n=l[e];(null==n?void 0:n.acceptComponent(u.componentName))&&t.push(n)}if(1===t.length){const e=t.shift(),i=this.foundViewport(u,e,n,!0);r.push(u),s.push(...i),l[e.name]=null,h.removeCurrent()}}if(n)for(;null!==(u=h.next());){let t=u.viewport;if(!t){const e=u.viewportName;if(0===(null!==(i=null==e?void 0:e.length)&&void 0!==i?i:0))continue;u.ownsScope;if(!this.getEnabledViewports(o)[e])continue;t=l[e]}if(null==t?void 0:t.acceptComponent(u.componentName)){const e=this.foundViewport(u,t,n);r.push(u),s.push(...e),l[t.name]=null,h.removeCurrent()}}return s=[...h,...s],{foundViewports:r,remainingInstructions:s}}foundViewportScope(t,e){var n,i;t.viewportScope=e,t.needsViewportDescribed=!1;const r=null!==(i=null===(n=t.nextScopeInstructions)||void 0===n?void 0:n.slice())&&void 0!==i?i:[];for(const t of r)null===t.scope&&(t.scope=e.scope.scope);return r}foundViewport(t,e,n,i=!1){var r,s;t.setViewport(e),i&&(t.needsViewportDescribed=!1);const o=null!==(s=null===(r=t.nextScopeInstructions)||void 0===r?void 0:r.slice())&&void 0!==s?s:[];for(const t of o)null===t.scope&&(t.scope=e.scope);return o}addViewport(t,e,n={}){var i,r;let s=this.getEnabledViewports(this.getOwnedScopes())[t];return null!==(null!=e?e:null)&&null!==(null!==(i=null==s?void 0:s.connectedCE)&&void 0!==i?i:null)&&s.connectedCE!==e&&(s.enabled=!1,s=null!==(r=this.getOwnedViewports(!0).find(n=>n.name===t&&n.connectedCE===e))&&void 0!==r?r:null,null!==(null!=s?s:null)&&(s.enabled=!0)),null===(null!=s?s:null)&&(s=new Y(this.router,t,e,this.scope,!!n.scope,n),this.addChild(s.connectedScope)),null!==(null!=e?e:null)&&s.setConnectedCE(e,n),s}removeViewport(t,e){return!(null===(null!=e?e:null)&&!t.remove(e))&&(this.removeChild(t.connectedScope),!0)}addViewportScope(t,e,n={}){const i=new $(t,this.router,e,this.scope,!0,null,n);return this.addChild(i.connectedScope),i}removeViewportScope(t){return this.removeChild(t.connectedScope),!0}addChild(t){this.children.some(e=>e===t)||(null!==t.parent&&t.parent.removeChild(t),this.children.push(t),t.parent=this)}removeChild(t){const e=this.children.indexOf(t);e>=0&&(this.children.splice(e,1),t.parent=null)}clearReplacedChildren(){this.replacedChildren=[]}disableReplacedChildren(){this.replacedChildren=this.enabledChildren;for(const t of this.replacedChildren)t.enabled=!1}reenableReplacedChildren(){for(const t of this.replacedChildren)t.enabled=!0}allViewports(t=!1,e=!1){return this.allScopes(t,e).filter(t=>t.isViewport).map(t=>t.viewport)}allScopes(t=!1,e=!1){const n=t?this.children.slice():this.enabledChildren;for(const i of n.slice())n.push(...i.allScopes(t,e));return n}reparentViewportInstructions(){const t=this.hoistedChildren.filter(t=>null!==t.viewportInstruction&&t.viewportInstruction.componentName);if(!t.length)return null;for(const e of t){const t=e.reparentViewportInstructions();e.viewportInstruction.nextScopeInstructions=null!==t&&t.length>0?t:null}return t.map(t=>t.viewportInstruction)}findMatchingRoute(t){if(this.isViewportScope&&!this.passThroughScope)return this.findMatchingRouteInRoutes(t,this.viewportScope.getRoutes());if(this.isViewport)return this.findMatchingRouteInRoutes(t,this.viewport.getRoutes());for(const e of this.enabledChildren){const n=e.findMatchingRoute(t);if(null!==n)return n}return null}canLoad(t){const e=A.runAll(this.children.map(e=>null!==e.viewport?e.viewport.canLoad(t):e.canLoad(t)));return e instanceof Promise?e.then(t=>t.every(t=>t)):e.every(t=>t)}canUnload(){const t=A.runAll(this.children.map(t=>null!==t.viewport?t.viewport.canUnload():t.canUnload()));return t instanceof Promise?t.then(t=>t.every(t=>t)):t.every(t=>t)}load(t){const e=A.runAll(this.children.map(e=>null!==e.viewport?e.viewport.load(t):e.load(t)));if(e instanceof Promise)return e}unload(t){const e=A.runAll(this.children.map(e=>null!==e.viewport?e.viewport.unload(t):e.unload(t)));if(e instanceof Promise)return e}removeContent(){const t=A.runAll(this.children.map(t=>null!==t.viewport?t.viewport.removeContent():t.removeContent()));if(t instanceof Promise)return t}findMatchingRouteInRoutes(t,e){if(!Array.isArray(e))return null;const n=(e=e.map(t=>this.ensureProperRoute(t))).map(t=>({path:t.path,handler:t}));for(let t=0,e=n.length;t<e;++t){const e=n[t];n.push({...e,path:e.path+"/*remainingPath"})}const i=new N;(t.startsWith("/")||t.startsWith("+"))&&(t=t.slice(1));const r=new J;r.add(n);const s=r.recognize(t);if(null!==s){i.match=s.endpoint.route.handler,i.matching=t;const e={...s.params};void 0!==e.remainingPath&&(i.remaining=e.remainingPath,Reflect.deleteProperty(e,"remainingPath"),i.matching=i.matching.slice(0,i.matching.indexOf(i.remaining))),i.params=e}if(i.foundConfiguration){i.instructions=this.router.instructionResolver.cloneViewportInstructions(i.match.instructions,!1,!0);const t=i.instructions.slice();for(;t.length>0;){const e=t.shift();e.addParameters(i.params),e.route="",null!==e.nextScopeInstructions&&t.unshift(...e.nextScopeInstructions)}i.instructions.length>0&&(i.instructions[0].route=i)}return i}ensureProperRoute(t){return void 0===t.id&&(t.id=t.path),void 0===t.instructions&&(t.instructions=[{component:t.component,viewport:t.viewport,parameters:t.parameters,children:t.children}]),t.instructions=tt.toViewportInstructions(this.router,t.instructions),t}}class Y{constructor(t,e,n,i,r,s={}){this.router=t,this.name=e,this.connectedCE=n,this.options=s,this.nextContent=null,this.nextContentAction="",this.forceRemove=!1,this.path=null,this.clear=!1,this.connectionResolve=null,this.previousViewportState=null,this.cache=[],this.historyCache=[],this.content=new V,this.connectedScope=new G(t,r,i,this)}get scope(){return this.connectedScope.scope}get owningScope(){return this.connectedScope.owningScope}get connectedController(){var t,e;return null!==(e=null===(t=this.connectedCE)||void 0===t?void 0:t.$controller)&&void 0!==e?e:null}get enabled(){return this.connectedScope.enabled}set enabled(t){this.connectedScope.enabled=t}get isViewport(){return!0}get isViewportScope(){return!1}get isEmpty(){return null===this.content.componentInstance}get doForceRemove(){let t=this.connectedScope;for(;null!==t;){if(null!==t.viewport&&t.viewport.forceRemove)return!0;t=t.parent}return!1}get activeContent(){var t;return null!==(t=this.nextContent)&&void 0!==t?t:this.content}get nextContentActivated(){var t,e;return null!==(e=null===(t=this.nextContent)||void 0===t?void 0:t.contentStates.has("activated"))&&void 0!==e&&e}get parentNextContentActivated(){var t,e,n;return null!==(n=null===(e=null===(t=this.scope.parent)||void 0===t?void 0:t.owner)||void 0===e?void 0:e.nextContentActivated)&&void 0!==n&&n}get performLoad(){return!0}get performSwap(){return!0}toString(){var t,e,n,i;const r=null!==(e=null===(t=this.content)||void 0===t?void 0:t.content.componentName)&&void 0!==e?e:"",s=null!==(i=null===(n=this.nextContent)||void 0===n?void 0:n.content.componentName)&&void 0!==i?i:"";return`v:${this.name}[${r}->${s}]`}setNextContent(t,e){var n;if(t.setViewport(this),this.clear=this.router.instructionResolver.isClearViewportInstruction(t),this.nextContent=new V(this.clear?void 0:t,e,null!==(n=this.connectedCE)&&void 0!==n?n:null),this.nextContent.fromHistory=!(!this.nextContent.componentInstance||!e.navigation)&&(!!e.navigation.back||!!e.navigation.forward),this.options.stateful){const t=this.cache.find(t=>this.nextContent.isCacheEqual(t));t?(this.nextContent=t,this.nextContent.fromCache=!0):this.cache.push(this.nextContent)}return this.connectedScope.clearReplacedChildren(),null!==this.nextContent.componentInstance&&this.content.componentInstance===this.nextContent.componentInstance?(this.nextContent=null,this.nextContentAction="skip"):!this.content.equalComponent(this.nextContent)||"swap"===this.connectedScope.parentNextContentAction||e.navigation.refresh||"refresh"===this.content.reentryBehavior()?(this.connectedScope.disableReplacedChildren(),this.nextContentAction="swap"):"disallow"===this.content.reentryBehavior()?(this.nextContent=null,this.nextContentAction="skip"):"load"===this.content.reentryBehavior()?(this.content.reentry=!0,this.nextContent.content.setComponent(this.content.componentInstance),this.nextContent.contentStates=this.content.contentStates.clone(),this.nextContent.reentry=this.content.reentry,this.nextContentAction="reload"):this.options.stateful&&this.content.equalParameters(this.nextContent)?(this.nextContent=null,this.nextContentAction="skip"):this.content.equalParameters(this.nextContent)?"skip":(this.connectedScope.disableReplacedChildren(),this.nextContentAction="swap")}setConnectedCE(t,e){if(e=e||{},this.connectedCE!==t&&(this.previousViewportState={...this},this.clearState(),this.connectedCE=t,e.usedBy&&(this.options.usedBy=e.usedBy),e.default&&(this.options.default=e.default),e.fallback&&(this.options.fallback=e.fallback),e.noLink&&(this.options.noLink=e.noLink),e.noTitle&&(this.options.noTitle=e.noTitle),e.noHistory&&(this.options.noHistory=e.noHistory),e.stateful&&(this.options.stateful=e.stateful),this.connectionResolve&&this.connectionResolve()),!this.content.componentInstance&&(!this.nextContent||!this.nextContent.componentInstance)&&this.options.default){const t=this.router.instructionResolver.parseViewportInstructions(this.options.default);for(const e of t)e.setViewport(this.name),e.scope=this.owningScope,e.default=!0;this.router.load(t,{append:!0}).catch(t=>{throw t})}}remove(t){return this.connectedCE===t&&A.run(()=>{if(this.content.componentInstance)return this.content.freeContent(this.connectedCE,this.nextContent?this.nextContent.instruction:null,this.historyCache,!this.doForceRemove&&(this.router.statefulHistory||this.options.stateful))},()=>{if(this.doForceRemove){const t=[];for(const e of this.historyCache)t.push(()=>e.freeContent(null,null,this.historyCache,!1));return t.push(()=>{this.historyCache=[]}),A.run(...t)}return!0})}transition(t){const e=t.checkingSyncState("guarded"),n=this.performLoad||!e,i=this.performSwap||!e,r=[()=>!n||this.canUnload(),e=>{if(!e)return A.cancel(void 0),void t.cancel();this.router.isRestrictedNavigation&&this.nextContent.createComponent(this.connectedCE,this.options.fallback),t.addEntityState(this,"guardedUnload")},()=>t.syncState("guardedUnload",this),()=>!n||this.canLoad(e),e=>{if("boolean"==typeof e){if(!e)return A.cancel(void 0),void t.cancel();t.addEntityState(this,"guardedLoad"),t.addEntityState(this,"guarded")}else A.run(()=>this.router.load(e,{append:!0}),()=>this.abortContentChange())}],s=[()=>t.syncState("guarded",this),()=>!n||this.unload(!0),()=>t.addEntityState(this,"unloaded"),()=>t.syncState("unloaded",this),()=>!n||this.load(t.checkingSyncState("routed")),()=>t.addEntityState(this,"loaded"),()=>t.addEntityState(this,"routed")],o=[()=>t.syncState("routed",this)];i&&(this.router.options.swapStrategy.includes("parallel")?o.push(()=>this.router.options.swapStrategy.includes("add")?A.run(this.addContent(),this.removeContent()):A.run(this.removeContent(),this.addContent())):o.push(()=>i?this.router.options.swapStrategy.includes("add")?this.addContent():this.removeContent():void 0,()=>i?this.router.options.swapStrategy.includes("add")?this.removeContent():this.addContent():void 0)),o.push(()=>t.addEntityState(this,"swapped")),A.run(...r,...s,...o,()=>t.addEntityState(this,"completed"))}canUnload(){return A.run(()=>this.connectedScope.canUnload(),t=>{var e,n;return!!t&&this.content.canUnload(null!==(n=null===(e=this.nextContent)||void 0===e?void 0:e.instruction)&&void 0!==n?n:null)})}canLoad(t){var e,n;return!!this.clear||(null===(null!==(n=null===(e=this.nextContent)||void 0===e?void 0:e.content)&&void 0!==n?n:null)||A.run(()=>this.waitForConnected(),()=>(this.nextContent.createComponent(this.connectedCE,this.options.fallback),this.nextContent.canLoad(this,this.content.instruction))))}load(t){var e,n;if(!this.clear&&null!==(null!==(n=null===(e=this.nextContent)||void 0===e?void 0:e.componentInstance)&&void 0!==n?n:null))return A.run(()=>{var t;return null===(t=this.nextContent)||void 0===t?void 0:t.load(this.content.instruction)})}addContent(){return A.run(()=>this.activate(null,this.connectedController,0,this.parentNextContentActivated))}removeContent(){if(!this.isEmpty)return A.run(()=>this.connectedScope.removeContent(),()=>this.deactivate(null,null,0),()=>this.dispose())}removeChildrenContent(){return A.run(()=>this.isEmpty?void 0:this.connectedScope.removeContent())}activate(t,e,n,i){if(null!==this.activeContent.componentInstance)return this.connectedScope.reenableReplacedChildren(),A.run(()=>this.activeContent.load(this.activeContent.instruction),()=>this.activeContent.activateComponent(t,e,n,this.connectedCE,i))}deactivate(t,e,n){var i;if(this.content.componentInstance&&!this.content.reentry&&this.content.componentInstance!==(null===(i=this.nextContent)||void 0===i?void 0:i.componentInstance))return A.run(()=>{var t;return null===(t=this.content)||void 0===t?void 0:t.unload(this.content.instruction)},()=>{var i;return null===(i=this.content)||void 0===i?void 0:i.deactivateComponent(t,e,n,this.connectedCE,this.router.statefulHistory||this.options.stateful)})}unload(t){return A.run(()=>!t||this.connectedScope.unload(t),()=>{var t,e;if(this.content.componentInstance)return this.content.unload(null!==(e=null===(t=this.nextContent)||void 0===t?void 0:t.instruction)&&void 0!==e?e:null)})}dispose(){var t;if(this.content.componentInstance&&!this.content.reentry&&this.content.componentInstance!==(null===(t=this.nextContent)||void 0===t?void 0:t.componentInstance))return A.run(()=>this.content.disposeComponent(this.connectedCE,this.historyCache,this.router.statefulHistory||this.options.stateful))}finalizeContentChange(){this.nextContent.componentInstance&&(this.content=this.nextContent,this.content.reentry=!1),this.clear&&(this.content=new V(void 0,this.nextContent.instruction)),this.nextContent=null,this.nextContentAction="",this.previousViewportState=null,this.connectedScope.clearReplacedChildren()}abortContentChange(){return this.connectedScope.reenableReplacedChildren(),A.run(()=>this.nextContent.freeContent(this.connectedCE,this.nextContent.instruction,this.historyCache,this.router.statefulHistory||this.options.stateful),()=>{this.previousViewportState&&Object.assign(this,this.previousViewportState),this.nextContentAction=""})}wantComponent(t){let e=this.options.usedBy||[];return"string"==typeof e&&(e=e.split(",")),e.includes(t)}acceptComponent(t){if("-"===t||null===t)return!0;let e=this.options.usedBy;return!e||!e.length||("string"==typeof e&&(e=e.split(",")),!!e.includes(t)||!!e.filter(t=>t.includes("*")).length)}freeContent(t){const e=this.historyCache.find(e=>e.componentInstance===t);if(void 0!==e)return A.run(()=>(this.forceRemove=!0,e.freeContent(null,null,this.historyCache,!1)),()=>{this.forceRemove=!1,O(this.historyCache,t=>t===e)})}getRoutes(){const t=this.getComponentType();if(null===t)return null;const e=t.routes;return Array.isArray(e)?e:null}getTitle(t){var e,n;if(this.options.noTitle)return"";const i=this.getComponentType();if(null===i)return"";let r="";const s=i.title;if(void 0!==s)if("string"==typeof s)r=s;else{const e=this.getComponentInstance();r=s.call(e,e,t)}else if(this.router.options.title.useComponentNames){let t=null!==(e=this.getContentInstruction().componentName)&&void 0!==e?e:"";const i=null!==(n=this.router.options.title.componentPrefix)&&void 0!==n?n:"";t.startsWith(i)&&(t=t.slice(i.length)),t=t.replace("-"," "),r=t.slice(0,1).toLocaleUpperCase()+t.slice(1)}return void 0!==this.router.options.title.transformTitle&&(r=this.router.options.title.transformTitle.call(this,r,this.getContentInstruction())),r}getComponentType(){var t;let e=null!==(t=this.getContentInstruction().componentType)&&void 0!==t?t:null;if(null===e){e=g.x.for(this.connectedCE.element).context.componentType}return null!=e?e:null}getComponentInstance(){var t;return null!==(t=this.getContentInstruction().componentInstance)&&void 0!==t?t:null}getContentInstruction(){var t,e,n;return null!==(n=null!==(e=null===(t=this.nextContent)||void 0===t?void 0:t.content)&&void 0!==e?e:this.content.content)&&void 0!==n?n:null}clearState(){this.options={},this.content=new V,this.cache=[]}waitForConnected(){if(null===this.connectedCE)return new Promise(t=>{this.connectionResolve=t})}}const Z={isName:t=>"string"==typeof t,isType:t=>g.x.isType(t),isInstance:t=>!Z.isName(t)&&!Z.isType(t),getName:t=>Z.isName(t)?t:Z.isType(t)?g.x.getDefinition(t).name:Z.getName(t.constructor),getType:t=>Z.isName(t)?null:Z.isType(t)?t:t.constructor,getInstance:t=>Z.isName(t)||Z.isType(t)?null:t},X={isName:t=>"string"==typeof t,isInstance:t=>t instanceof Y,getName:t=>X.isName(t)?t:t?t.name:null,getInstance:t=>X.isName(t)?null:t},tt={createViewportInstructions(t,e,n){let i=null;if((n=n||{}).context)if(i=t.findScope(n.context),"string"==typeof e)if(e.startsWith("/"))i=t.rootScope.scope;else{if(e.startsWith("."))for(e.startsWith("./")&&(e=e.slice(2));e.startsWith("../");)i=i.parent||i,e=e.slice(3);null!==i.path&&(e=`${i.path}/${e}`,i=t.rootScope.scope)}else{e=tt.toViewportInstructions(t,e);for(const t of e)null===t.scope&&(t.scope=i)}return{instructions:e,scope:i}},toViewportInstructions(t,e){if(!Array.isArray(e))return tt.toViewportInstructions(t,[e]);const n=[];for(const i of e)if("string"==typeof i)n.push(...t.instructionResolver.parseViewportInstructions(i));else if(i instanceof it)n.push(i);else if(i.component){const e=i,r=t.createViewportInstruction(e.component,e.viewport,e.parameters);void 0!==e.children&&null!==e.children&&(r.nextScopeInstructions=tt.toViewportInstructions(t,e.children)),n.push(r)}else n.push(t.createViewportInstruction(i));return n}};class et{constructor(){this.separators={viewport:"@",sibling:"+",scope:"/",scopeStart:"(",scopeEnd:")",noScope:"!",parameters:"(",parametersEnd:")",parameterSeparator:",",parameterKeySeparator:"=",parameter:"&",add:"+",clear:"-",action:"."},this.useUrlFragmentHash=!0,this.useHref=!0,this.statefulHistoryLength=0,this.useDirectRoutes=!0,this.useConfiguredRoutes=!0,this.additiveInstructionDefault=!0,this.title={appTitle:"${componentTitles}${appTitleSeparator}Aurelia",appTitleSeparator:" | ",componentTitleOrder:"top-down",componentTitleSeparator:" > ",useComponentNames:!0,componentPrefix:"app-"},this.navigationSyncStates=["guardedUnload","swapped","completed"],this.swapStrategy="add-first-sequential",this.routingHookIntegration="integrated"}}var nt;!function(t){t.none="none",t.string="string",t.array="array",t.object="object"}(nt||(nt={}));let it=(()=>{class t{constructor(){this.componentName=null,this.componentType=null,this.componentInstance=null,this.viewportName=null,this.viewport=null,this.parametersString=null,this.parametersRecord=null,this.parametersList=null,this.parametersType="none",this.ownsScope=!0,this.nextScopeInstructions=null,this.scope=null,this.context="",this.viewportScope=null,this.needsViewportDescribed=!1,this.route=null,this.default=!1,this.topInstruction=!1,this.instructionResolver=null}static create(e,n,i,r,s=!0,o=null){const a=new t;return a.setComponent(n),a.setViewport(i),a.setParameters(r),a.ownsScope=s,a.nextScopeInstructions=o,a.setInstructionResolver(e),a}get owner(){var t,e;return null!==(e=null!==(t=this.viewport)&&void 0!==t?t:this.viewportScope)&&void 0!==e?e:null}get typedParameters(){switch(this.parametersType){case"string":return this.parametersString;case"array":return this.parametersList;case"object":return this.parametersRecord;default:return null}}get parameters(){return null!==this.instructionResolver?this.instructionResolver.parseComponentParameters(this.typedParameters):[]}get normalizedParameters(){return null!==this.instructionResolver&&null!==this.typedParameters?this.instructionResolver.stringifyComponentParameters(this.parameters):""}setComponent(t){Z.isName(t)?(this.componentName=Z.getName(t),this.componentType=null,this.componentInstance=null):Z.isType(t)?(this.componentName=this.getNewName(t),this.componentType=Z.getType(t),this.componentInstance=null):Z.isInstance(t)&&(this.componentName=this.getNewName(Z.getType(t)),this.componentType=Z.getType(t),this.componentInstance=Z.getInstance(t))}setViewport(t){void 0!==t&&""!==t||(t=null),"string"==typeof t?(this.viewportName=t,this.viewport=null):(this.viewport=t,null!==t&&(this.viewportName=t.name,this.scope=t.owningScope))}setParameters(t){null==t||""===t?(this.parametersType="none",t=null):"string"==typeof t?(this.parametersType="string",this.parametersString=t):Array.isArray(t)?(this.parametersType="array",this.parametersList=t):(this.parametersType="object",this.parametersRecord=t)}addParameters(t){if("none"===this.parametersType)return this.setParameters(t);if("object"!==this.parametersType)throw new Error("Can't add object parameters to existing non-object parameters!");this.setParameters({...this.parametersRecord,...t})}setInstructionResolver(t){this.instructionResolver=t}isEmpty(){return!this.isComponentName()&&!this.isComponentType()&&!this.isComponentInstance()}isComponentName(){return!!this.componentName&&!this.isComponentType()&&!this.isComponentInstance()}isComponentType(){return null!==this.componentType&&!this.isComponentInstance()}isComponentInstance(){return null!==this.componentInstance}toComponentType(t){if(null!==this.componentType)return this.componentType;if(null!==this.componentName&&"string"==typeof this.componentName&&null!==t&&t.has(g.x.keyFrom(this.componentName),!0)){const e=t.getResolver(g.x.keyFrom(this.componentName));if(null!==e&&void 0!==e.getFactory){const n=e.getFactory(t);if(n)return n.Type}}return null}toComponentInstance(t){if(null!==this.componentInstance)return this.componentInstance;if(null!=t){const e=this.isComponentType()?t.get(this.componentType):t.get(g.x.keyFrom(this.componentName));return!this.isComponentType()||e instanceof this.componentType||console.warn("Failed to instantiate",this.componentType,e),null!=e?e:null}return null}toViewportInstance(t){return null!==this.viewport?this.viewport:t.getViewport(this.viewportName)}toSpecifiedParameters(t){t=t||[];const e=this.parameters,n={};for(const i of t){let t=e.findIndex(t=>t.key===i);if(t>=0){const[r]=e.splice(t,1);n[i]=r.value}else if(t=e.findIndex(t=>void 0===t.key),t>=0){const[r]=e.splice(t,1);n[i]=r.value}}for(const t of e.filter(t=>void 0!==t.key))n[t.key]=t.value;let i=t.length;for(const t of e.filter(t=>void 0===t.key))n[i++]=t.value;return n}toSortedParameters(t){t=t||[];const e=this.parameters,n=[];for(const i of t){let t=e.findIndex(t=>t.key===i);if(t>=0){const i={...e.splice(t,1)[0]};i.key=void 0,n.push(i)}else if(t=e.findIndex(t=>void 0===t.key),t>=0){const i={...e.splice(t,1)[0]};n.push(i)}else n.push({value:void 0})}const i=e.filter(t=>void 0!==t.key);return i.sort((t,e)=>(t.key||"")<(e.key||"")?1:(e.key||"")<(t.key||"")?-1:0),n.push(...i),n.push(...e.filter(t=>void 0===t.key)),n}sameComponent(t,e=!1,n=!1){return!(e&&!this.sameParameters(t,n))&&(n?this.componentType===t.componentType:this.componentName===t.componentName)}sameParameters(t,e=!1){if(!this.sameComponent(t,!1,e))return!1;const n=this.componentType?this.componentType.parameters:[],i=this.toSpecifiedParameters(n),r=t.toSpecifiedParameters(n);return Object.keys(i).every(t=>i[t]===r[t])&&Object.keys(r).every(t=>r[t]===i[t])}sameViewport(t){return null!==this.viewport&&null!==t.viewport?this.viewport===t.viewport:this.scope===t.scope&&(this.viewport?this.viewport.name:this.viewportName)===(t.viewport?t.viewport.name:t.viewportName)}getNewName(t){return null===this.componentName?Z.getName(t):this.componentName}}return t.inject=[et],t})();class rt{constructor(){this.separators={viewport:"@",sibling:"+",scope:"/",scopeStart:"(",scopeEnd:")",noScope:"!",parameters:"(",parametersEnd:")",parameterSeparator:",",parameterKeySeparator:"=",parameter:"&",add:"+",clear:"-",action:"."}}start(t){t=t||{},this.separators={...this.separators,...t.separators}}get clearViewportInstruction(){return this.separators.clear}get addViewportInstruction(){return this.separators.add}isClearViewportInstruction(t){return t instanceof it?t.componentName===this.clearViewportInstruction&&!!t.viewportName:t.startsWith(this.clearViewportInstruction)&&t!==this.clearViewportInstruction}isAddViewportInstruction(t){return t instanceof it?t.componentName===this.addViewportInstruction:t===this.addViewportInstruction||t.startsWith(`${this.separators.add}${this.separators.viewport}`)}isClearViewportScopeInstruction(t){return t instanceof it?t.componentName===this.clearViewportInstruction&&!!t.viewportScope:t.startsWith(this.clearViewportInstruction)&&t!==this.clearViewportInstruction}isClearAllViewportsInstruction(t){return t instanceof it?t.componentName===this.clearViewportInstruction&&!t.viewportName:t===this.clearViewportInstruction}isAddAllViewportsInstruction(t){return t instanceof it?t.componentName===this.addViewportInstruction&&!t.viewportName:t===this.addViewportInstruction}createViewportInstruction(t,e,n,i=!0,r=null){return t instanceof Promise?t.then(t=>this.createViewportInstruction(t,e,n,i,r)):it.create(this,t,e,n,i,r)}parseViewportInstructions(t){const e=/^[./]+/.exec(t);let n="";Array.isArray(e)&&e.length>0&&(n=e[0],t=t.slice(n.length));const i=this.parseViewportInstructionsWorker(t,!0).instructions;for(const t of i)t.context=n;return i}parseViewportInstruction(t){const e=this.parseViewportInstructions(t);return e.length?e[0]:this.createViewportInstruction("")}stringifyViewportInstructions(t,e=!1,n=!1){return"string"==typeof t?t:t.map(t=>this.stringifyViewportInstruction(t,e,n)).filter(t=>t&&t.length).join(this.separators.sibling)}stringifyViewportInstruction(t,e=!1,n=!1){var i;if("string"==typeof t)return this.stringifyAViewportInstruction(t,e);{let r=e,s=!1;if(n){if(t.viewport&&t.viewport.options.noLink)return"";t.needsViewportDescribed||!t.viewport||t.viewport.options.forceDescription||(r=!0),t.viewport&&t.viewport.options.fallback===t.componentName&&(s=!0),!t.needsViewportDescribed&&t.viewportScope&&(r=!0)}let o=null!==(i=t.route)&&void 0!==i?i:null;const a=t.nextScopeInstructions;let c=t.context;if(null!==o){if(""===o)return Array.isArray(a)?this.stringifyViewportInstructions(a,e,n):"";o=o.matching,c+=o.endsWith(this.separators.scope)?o.slice(0,-this.separators.scope.length):o}else c+=this.stringifyAViewportInstruction(t,r,s);if(Array.isArray(a)&&a.length){const t=this.stringifyViewportInstructions(a,e,n);t.length>0&&(c+=1===a.length?`${this.separators.scope}${t}`:`${this.separators.scope}${this.separators.scopeStart}${t}${this.separators.scopeEnd}`)}return c}}stringifyScopedViewportInstructions(t){return Array.isArray(t)?t.map(t=>this.stringifyViewportInstruction(t)).join(this.separators.scope):this.stringifyScopedViewportInstructions([t])}encodeViewportInstructions(t){return encodeURIComponent(this.stringifyViewportInstructions(t)).replace(/\(/g,"%28").replace(/\)/g,"%29")}decodeViewportInstructions(t){return this.parseViewportInstructions(decodeURIComponent(t))}buildScopedLink(t,e){return t&&(e=`/${t}${this.separators.scope}${e}`),e}shouldClearViewports(t){return{clearViewports:t===this.separators.clear||t.startsWith(this.separators.clear+this.separators.add),newPath:t.startsWith(this.separators.clear)?t.slice(2):t}}mergeViewportInstructions(t){const e=[];for(let n of t){"string"==typeof n&&(n=this.parseViewportInstruction(n));const t=e.findIndex(t=>t.sameViewport(n));t>=0?e.splice(t,1,n):e.push(n)}return e}flattenViewportInstructions(t){const e=[];for(const n of t)e.push(n),n.nextScopeInstructions&&e.push(...this.flattenViewportInstructions(n.nextScopeInstructions));return e}cloneViewportInstructions(t,e=!1,n=!1){var i,r,s;const o=[];for(const a of t){const t=this.createViewportInstruction(a.componentName,a.viewportName,null!==a.typedParameters?a.typedParameters:void 0);e&&(t.setComponent(null!==(r=null!==(i=a.componentInstance)&&void 0!==i?i:a.componentType)&&void 0!==r?r:a.componentName),t.setViewport(null!==(s=a.viewport)&&void 0!==s?s:a.viewportName)),t.needsViewportDescribed=a.needsViewportDescribed,t.route=a.route,n&&(t.context=a.context),t.viewportScope=e?a.viewportScope:null,t.scope=e?a.scope:null,a.nextScopeInstructions&&(t.nextScopeInstructions=this.cloneViewportInstructions(a.nextScopeInstructions,e,n)),o.push(t)}return o}parseComponentParameters(t,e=!1){if(null==t||0===t.length)return[];if("string"==typeof t){const n=[],i=t.split(this.separators.parameterSeparator);for(const t of i){let i,r;[i,r]=t.split(this.separators.parameterKeySeparator),void 0===r?(r=e?decodeURIComponent(i):i,i=void 0):e&&(i=decodeURIComponent(i),r=decodeURIComponent(r)),n.push({key:i,value:r})}return n}if(Array.isArray(t))return t.map(t=>({key:void 0,value:t}));const n=Object.keys(t);return n.sort(),n.map(e=>({key:e,value:t[e]}))}stringifyComponentParameters(t,e=!1){if(!Array.isArray(t)||0===t.length)return"";const n=this.separators;return t.map(t=>{const i=void 0!==t.key&&e?encodeURIComponent(t.key):t.key,r=e?encodeURIComponent(t.value):t.value;return void 0!==i&&i!==r?i+n.parameterKeySeparator+r:r}).join(n.parameterSeparator)}matchScope(t,e){const n=[];return n.push(...t.filter(t=>t.scope===e)),n.push(...t.filter(t=>t.scope!==e).map(t=>Array.isArray(t.nextScopeInstructions)?this.matchScope(t.nextScopeInstructions,e):[]).flat()),n}matchChildren(t,e){for(const n of t){const t=e.filter(t=>t.sameComponent(n));if(0===t.length)return!1;if(Array.isArray(n.nextScopeInstructions)&&n.nextScopeInstructions.length>0&&!1===this.matchChildren(n.nextScopeInstructions,t.map(t=>Array.isArray(t.nextScopeInstructions)?t.nextScopeInstructions:[]).flat()))return!1}return!0}parseViewportInstructionsWorker(t,e=!1){if(!t)return{instructions:[],remaining:""};t.startsWith(this.separators.scopeStart)&&(t=`${this.separators.scope}${t}`);const n=[];let i=1e3;for(;t.length&&i;)if(i--,t.startsWith(this.separators.scope)){const e=(t=t.slice(this.separators.scope.length)).startsWith(this.separators.scopeStart);e&&(t=t.slice(this.separators.scopeStart.length));const{instructions:i,remaining:r}=this.parseViewportInstructionsWorker(t,e);n.length?n[n.length-1].nextScopeInstructions=i:n.push(...i),t=r}else{if(t.startsWith(this.separators.scopeEnd))return e&&(t=t.slice(this.separators.scopeEnd.length)),{instructions:n,remaining:t};if(t.startsWith(this.separators.sibling)&&!this.isAddViewportInstruction(t)){if(!e)return{instructions:n,remaining:t};t=t.slice(this.separators.sibling.length)}else{const{instruction:e,remaining:i}=this.parseAViewportInstruction(t);n.push(e),t=i}}return{instructions:n,remaining:t}}findNextToken(t,e){const n={};for(const i of e){t.indexOf(i)>-1&&(n[i]=t.indexOf(i))}const i=Math.min(...Object.values(n));for(const t in n)if(n[t]===i)return{token:t,pos:i};return{token:"",pos:-1}}parseAViewportInstruction(t){const e=this.separators,n=[e.parameters,e.viewport,e.noScope,e.scopeEnd,e.scope,e.sibling];let i,r,s=void 0,o=void 0,a=void 0,c=!0;const l=[e.add,e.clear];for(const r of l)if(t===r){s=t,t="",n.shift(),n.shift(),i=e.viewport;break}if(void 0===s)for(const r of l)if(t.startsWith(`${r}${e.viewport}`)){s=r,t=t.slice(`${r}${e.viewport}`.length),n.shift(),n.shift(),i=e.viewport;break}void 0===s&&(({token:i,pos:r}=this.findNextToken(t,n)),s=-1!==r?t.slice(0,r):t,t=-1!==r?t.slice(r+i.length):"",n.shift(),i===e.parameters&&(({token:i,pos:r}=this.findNextToken(t,[e.parametersEnd])),o=t.slice(0,r),t=t.slice(r+i.length),({token:i}=this.findNextToken(t,n)),t=t.slice(i.length)),n.shift()),i===e.viewport&&(({token:i,pos:r}=this.findNextToken(t,n)),a=-1!==r?t.slice(0,r):t,t=-1!==r?t.slice(r+i.length):""),n.shift(),i===e.noScope&&(c=!1),i!==e.scopeEnd&&i!==e.scope&&i!==e.sibling||(t=`${i}${t}`);return{instruction:this.createViewportInstruction(s,a,o,c),remaining:t}}stringifyAViewportInstruction(t,e=!1,n=!1){if("string"==typeof t)return this.stringifyViewportInstruction(this.parseViewportInstruction(t),e,n);{let i=n?"":t.componentName;const r=t.componentType?t.componentType.parameters:null,s=this.stringifyComponentParameters(t.toSortedParameters(r));return s.length>0&&(i+=n?s:`${this.separators.parameters}${s}${this.separators.parametersEnd}`),null===t.viewportName||e||(i+=this.separators.viewport+t.viewportName),t.ownsScope||(i+=this.separators.noScope),i||""}}}var st,ot;!function(t){t.default="default",t.disallow="disallow",t.load="load",t.refresh="refresh"}(st||(st={}));class at{constructor(t,e,n){this.hook=t,this.id=n,this.type="beforeNavigation",this.includeTargets=[],this.excludeTargets=[],void 0!==e.type&&(this.type=e.type);for(const t of e.include||[])this.includeTargets.push(new ct(t));for(const t of e.exclude||[])this.excludeTargets.push(new ct(t))}get wantsMatch(){return this.includeTargets.length>0||this.excludeTargets.length>0}matches(t){return!(this.includeTargets.length&&!this.includeTargets.some(e=>e.matches(t)))&&(!this.excludeTargets.length||!this.excludeTargets.some(e=>e.matches(t)))}invoke(t,e){return this.hook(e,t)}}class ct{constructor(t){if(this.componentType=null,this.componentName=null,this.viewport=null,this.viewportName=null,"string"==typeof t)this.componentName=t;else if(Z.isType(t))this.componentType=t,this.componentName=Z.getName(t);else{const e=t;e.component&&(this.componentType=Z.isType(e.component)?Z.getType(e.component):null,this.componentName=Z.getName(e.component)),e.viewport&&(this.viewport=X.isInstance(e.viewport)?e.viewport:null,this.viewportName=X.getName(e.viewport))}}matches(t){const e=t.slice();e.length||e.push(it.create(null,""));for(const t of e)if(null!==this.componentName&&this.componentName===t.componentName||null!==this.componentType&&this.componentType===t.componentType||null!==this.viewportName&&this.viewportName===t.viewportName||null!==this.viewport&&this.viewport===t.viewport)return!0;return!1}}!function(t){t.BeforeNavigation="beforeNavigation",t.TransformFromUrl="transformFromUrl",t.TransformToUrl="transformToUrl",t.SetTitle="setTitle"}(ot||(ot={}));class lt{constructor(){this.hooks={beforeNavigation:[],transformFromUrl:[],transformToUrl:[],setTitle:[]},this.lastIdentity=0}addHook(t,e){const n=new at(t,e||{},++this.lastIdentity);return this.hooks[n.type].push(n),this.lastIdentity}removeHook(t){for(const e in this.hooks)if(Object.prototype.hasOwnProperty.call(this.hooks,e)){const n=this.hooks[e].findIndex(e=>e.id===t);n>=0&&this.hooks[e].splice(n,1)}}async invokeBeforeNavigation(t,e){return this.invoke("beforeNavigation",e,t)}async invokeTransformFromUrl(t,e){return this.invoke("transformFromUrl",e,t)}async invokeTransformToUrl(t,e){return this.invoke("transformToUrl",e,t)}async invokeSetTitle(t,e){return this.invoke("setTitle",e,t)}async invoke(t,e,n){for(const i of this.hooks[t])if(!i.wantsMatch||i.matches(n)){const t=await i.invoke(e,n);if("boolean"==typeof t){if(!t)return!1}else n=t}return n}}class ht{constructor(t,e){this.nav=t,this.instructions=[],this.link=null,this.linkVisible=null,this.linkActive=null,this.compareParameters=!1,this.children=null,this.visible=!0,this.active="",this.title=e.title,this.meta=e.meta,e.route&&(this.instructions=this.parseRoute(e.route),this.link=this.computeLink(this.instructions)),this.linkActive=null!==e.consideredActive&&void 0!==e.consideredActive?e.consideredActive:this.link,null===this.linkActive||this.linkActive instanceof Function&&!Z.isType(this.linkActive)||(this.linkActive=tt.toViewportInstructions(this.nav.router,this.linkActive)),this.execute=e.execute,this.compareParameters=!!e.compareParameters,this.linkVisible=void 0===e.condition||e.condition,this.update()}get hasChildren(){return this.children&&this.children.length?"nav-has-children":""}update(){this.visible=this.computeVisible(),this.link&&this.link.length||this.execute?this.active=this.computeActive():this.active="nav-active"===this.active?"nav-active":this.activeChild()?"nav-active-child":""}executeAction(t){this.execute&&this.execute(this),t.stopPropagation()}toggleActive(){this.active=this.active.startsWith("nav-active")?"":"nav-active"}parseRoute(t){return tt.toViewportInstructions(this.nav.router,t)}computeVisible(){return this.linkVisible instanceof Function?this.linkVisible(this):!!this.linkVisible}computeActive(){if(!Array.isArray(this.linkActive))return this.linkActive(this)?"nav-active":"";const t=this.linkActive,e=this.nav.router.instructionResolver.flattenViewportInstructions(this.nav.router.activeComponents);for(const n of t)if(e.every(t=>!t.sameComponent(n,this.compareParameters&&null!==n.typedParameters)))return"";return"nav-active"}computeLink(t){return this.nav.router.instructionResolver.stringifyViewportInstructions(t)}activeChild(){if(this.children)for(const t of this.children)if(t.active.startsWith("nav-active")||t.activeChild())return!0;return!1}}class ut{constructor(t,e,n=[],i={}){this.router=t,this.name=e,this.routes=n,this.classes=i,this.update()}addRoutes(t){for(const e of t)this.addRoute(this.routes,e);this.update()}update(){this.updateRoutes(this.routes),this.routes=this.routes.slice()}addRoute(t,e){const n=new ht(this,e);if(t.push(n),e.children){n.children=[];for(const t of e.children)this.addRoute(n.children,t)}}updateRoutes(t){for(const e of t)e.update(),e.children&&e.children.length&&this.updateRoutes(e.children)}}var dt=function(t,e,n,i){var r,s=arguments.length,o=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(o=(s<3?r(o):s>3?r(e,n,o):r(e,n))||o);return s>3&&o&&Object.defineProperty(e,n,o),o},pt=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};let ft=(()=>{class t{constructor(t){this.callback=t,this.pending=[],this.processing=null,this.allowedExecutionCostWithinTick=null,this.currentExecutionCostInCurrentTick=0,this.scheduler=null,this.task=null}get isActive(){return null!==this.task}get length(){return this.pending.length}start(t){if(this.isActive)throw new Error("Queue has already been started");this.scheduler=t.scheduler,this.allowedExecutionCostWithinTick=t.allowedExecutionCostWithinTick,this.task=this.scheduler.queueRenderTask(this.dequeue,{persistent:!0})}stop(){if(!this.isActive)throw new Error("Queue has not been started");this.task.cancel(),this.task=null,this.allowedExecutionCostWithinTick=null,this.clear()}enqueue(t,e){const n=Array.isArray(t),i=n?t:[t],r=i.map((t,n)=>Array.isArray(e)?e[n]:e).map(t=>void 0!==t?t:1),s=[];for(const t of i){const e={...t};e.cost=r.shift(),s.push(new Promise((t,n)=>{e.resolve=()=>{t(),this.processing=null,this.dequeue()},e.reject=t=>{n(t),this.processing=null,this.dequeue()}})),this.pending.push(e)}return this.dequeue(),n?s:s[0]}dequeue(t){null===this.processing&&(void 0!==t&&(this.currentExecutionCostInCurrentTick=0),this.pending.length&&(null!==this.allowedExecutionCostWithinTick&&void 0===t&&this.currentExecutionCostInCurrentTick+(this.pending[0].cost||0)>this.allowedExecutionCostWithinTick||(this.processing=this.pending.shift()||null,this.processing&&(this.currentExecutionCostInCurrentTick+=this.processing.cost||0,this.callback(this.processing)))))}clear(){this.pending.splice(0,this.pending.length)}}return dt([S.m,pt("design:type",Function),pt("design:paramtypes",[Number]),pt("design:returntype",void 0)],t.prototype,"dequeue",null),t})();class gt{constructor(){this.entries=[],this.options={statefulHistoryLength:0},this.isActive=!1,this.processNavigations=t=>{const e=t,n={first:!1,new:!1,refresh:!1,forward:!1,back:!1,replace:!1};this.currentEntry===this.uninitializedEntry&&(this.loadState(),this.currentEntry!==this.uninitializedEntry?n.refresh=!0:(n.first=!0,n.new=!0,this.currentEntry=new x({index:0,instruction:"",fullStateInstruction:""}),this.entries=[])),void 0===e.index||e.replacing||e.refreshing?e.refreshing||n.refresh?e.index=this.currentEntry.index:e.replacing?(n.replace=!0,n.new=!0,e.index=this.currentEntry.index):(n.new=!0,e.index=void 0!==this.currentEntry.index?this.currentEntry.index+1:this.entries.length):(e.historyMovement=e.index-(void 0!==this.currentEntry.index?this.currentEntry.index:0),e.instruction=void 0!==this.entries[e.index]&&null!==this.entries[e.index]?this.entries[e.index].fullStateInstruction:e.fullStateInstruction,e.replacing=!0,e.historyMovement>0?n.forward=!0:e.historyMovement<0&&(n.back=!0)),this.invokeCallback(e,n,this.currentEntry)},this.uninitializedEntry=new x({instruction:"NAVIGATOR UNINITIALIZED",fullStateInstruction:""}),this.currentEntry=this.uninitializedEntry,this.pendingNavigations=new ft(this.processNavigations)}get queued(){return this.pendingNavigations.length}start(t,e){if(this.isActive)throw new Error("Navigator has already been started");this.isActive=!0,this.router=t,this.options={...e}}stop(){if(!this.isActive)throw new Error("Navigator has not been started");this.pendingNavigations.clear(),this.isActive=!1}async navigate(t){return this.pendingNavigations.enqueue(t)}async refresh(){const t=this.currentEntry;return t===this.uninitializedEntry?Promise.reject():(t.replacing=!0,t.refreshing=!0,this.navigate(t))}async go(t){const e=(void 0!==this.currentEntry.index?this.currentEntry.index:0)+t;if(e>=this.entries.length)return Promise.reject();const n=this.entries[e];return this.navigate(n)}async setEntryTitle(t){return this.currentEntry.title=t,this.saveState()}get titles(){if(this.currentEntry===this.uninitializedEntry)return[];const t=void 0!==this.currentEntry.index?this.currentEntry.index:0;return this.entries.slice(0,t+1).filter(t=>!!t.title).map(t=>t.title?t.title:"")}getState(){var t,e;const n=this.options.store?{...this.options.store.state}:{};return{state:n,entries:null!==(t=n.entries)&&void 0!==t?t:[],currentEntry:null!==(e=n.currentEntry)&&void 0!==e?e:null}}loadState(){const t=this.getState();this.entries=t.entries.map(t=>new x(t)),this.currentEntry=null!==t.currentEntry?new x(t.currentEntry):this.uninitializedEntry}async saveState(t=!1){var e;if(this.currentEntry===this.uninitializedEntry)return Promise.resolve();const n=this.currentEntry.toStored();if(this.entries[void 0!==n.index?n.index:0]=new x(n),this.options.statefulHistoryLength>0){const t=this.entries.length-this.options.statefulHistoryLength;for(let e=0;e<t;e++){const n=this.entries[e];"string"==typeof n.instruction&&"string"==typeof n.fullStateInstruction||await this.serializeEntry(n,this.entries.slice(t))}}if(!this.options.store)return Promise.resolve();const i={entries:(null!==(e=this.entries)&&void 0!==e?e:[]).map(t=>this.toStoreableEntry(t)),currentEntry:this.toStoreableEntry(n)};return void 0!==i.currentEntry.title&&this.options.store.setTitle(i.currentEntry.title),t?this.options.store.pushNavigatorState(i):this.options.store.replaceNavigatorState(i)}toStoredEntry(t){const{previous:e,fromBrowser:n,origin:i,replacing:r,refreshing:s,untracked:o,historyMovement:a,navigation:c,scope:l,resolve:h,reject:u,...d}=t;return d}async finalize(t){this.currentEntry=t;let e=void 0!==this.currentEntry.index?this.currentEntry.index:0;if(this.currentEntry.untracked)t.fromBrowser&&this.options.store&&await this.options.store.popNavigatorState(),e--,this.currentEntry.index=e,this.entries[e]=this.currentEntry,await this.saveState();else if(this.currentEntry.replacing)this.entries[e]=this.currentEntry,await this.saveState();else{if(void 0!==this.options.serializeCallback&&this.options.statefulHistoryLength>0){const t=this.entries.length-this.options.statefulHistoryLength;for(const n of this.entries.slice(e))"string"==typeof n.instruction&&"string"==typeof n.fullStateInstruction||await this.options.serializeCallback(n,this.entries.slice(t,e))}this.entries=this.entries.slice(0,e),this.entries.push(this.currentEntry),await this.saveState(!0)}this.currentEntry.resolve&&this.currentEntry.resolve()}async cancel(t){t.fromBrowser&&this.options.store&&(t.navigation&&t.navigation.new?await this.options.store.popNavigatorState():await this.options.store.go(-(t.historyMovement||0),!0)),this.currentEntry.resolve&&this.currentEntry.resolve()}invokeCallback(t,e,n){const i=new x({...t});i.navigation=e,i.previous=n,S.j.write(1e4,"callback",i,i.previous,this.entries),this.options.callback&&this.options.callback(i)}toStoreableEntry(t){const e=t instanceof x?t.toStored():t;return e.instruction=this.router.instructionResolver.stringifyViewportInstructions(e.instruction),e.fullStateInstruction=this.router.instructionResolver.stringifyViewportInstructions(e.fullStateInstruction),"string"!=typeof e.scope&&(e.scope=null),e}async serializeEntry(t,e){const n=this.router.instructionResolver;let i=[];for(const t of e)"string"!=typeof t.instruction&&i.push(...n.flattenViewportInstructions(t.instruction).filter(t=>null!==t.viewport).map(t=>t.componentInstance)),"string"!=typeof t.fullStateInstruction&&i.push(...n.flattenViewportInstructions(t.fullStateInstruction).filter(t=>null!==t.viewport).map(t=>t.componentInstance));i=i.filter((t,e,n)=>null!==t&&n.indexOf(t)===e);let r=[];"string"!=typeof t.fullStateInstruction&&(r.push(...t.fullStateInstruction),t.fullStateInstruction=n.stringifyViewportInstructions(t.fullStateInstruction)),"string"!=typeof t.instruction&&(r.push(...t.instruction),t.instruction=n.stringifyViewportInstructions(t.instruction)),r=r.filter((t,e,n)=>null!==t&&null!==t.componentInstance&&n.indexOf(t)===e);const s=[];for(const t of r)await this.freeInstructionComponents(t,i,s)}freeInstructionComponents(t,e,n){const i=t.componentInstance,r=t.viewport;if(null!==i&&null!==r&&!n.some(t=>t===i)){if(!e.some(t=>t===i))return A.run(()=>r.freeContent(i),()=>{n.push(i)});if(null!==t.nextScopeInstructions)for(const i of t.nextScopeInstructions)return A.run(()=>this.freeInstructionComponents(i,e,n))}}}var vt=function(t,e,n,i){var r,s=arguments.length,o=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(o=(s<3?r(o):s>3?r(e,n,o):r(e,n))||o);return s>3&&o&&Object.defineProperty(e,n,o),o},bt=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};class mt{constructor(t,e,n=0){this.taskQueue=t,this.item=e,this.cost=n,this.done=!1,this.promise=new Promise((t,e)=>{this.resolve=()=>{this.taskQueue.resolve(this,t)},this.reject=t=>{this.taskQueue.reject(this,e,t)}})}async execute(){"execute"in this.item?await this.item.execute(this):await this.item(this)}wait(){return this.promise}canCancel(){return!1}cancel(){}}let yt=(()=>{class t{constructor(t){this.callback=t,this.pending=[],this.processing=null,this.allowedExecutionCostWithinTick=null,this.currentExecutionCostInCurrentTick=0,this.scheduler=null,this.task=null}get isActive(){return null!==this.task}get length(){return this.pending.length}start(t){if(this.isActive)throw new Error("TaskQueue has already been started");this.scheduler=t.scheduler,this.allowedExecutionCostWithinTick=t.allowedExecutionCostWithinTick,this.task=this.scheduler.queueRenderTask(this.dequeue,{persistent:!0})}stop(){if(!this.isActive)throw new Error("TaskQueue has not been started");this.task.cancel(),this.task=null,this.allowedExecutionCostWithinTick=null,this.clear()}enqueue(t,e){const n=Array.isArray(t),i=n?t:[t],r=i.map((t,n)=>Array.isArray(e)?e[n]:e).map(t=>void 0!==t?t:1),s=[];for(const t of i)s.push(t instanceof mt?t:this.createQueueTask(t,r.shift()));return this.pending.push(...s),this.dequeue(),n?s:s[0]}createQueueTask(t,e){return new mt(this,t,e)}dequeue(t){var e;null===this.processing&&(void 0!==t&&(this.currentExecutionCostInCurrentTick=0),this.pending.length&&(null!==this.allowedExecutionCostWithinTick&&void 0===t&&this.currentExecutionCostInCurrentTick+(this.pending[0].cost||0)>this.allowedExecutionCostWithinTick||(this.processing=this.pending.shift()||null,this.processing&&(this.currentExecutionCostInCurrentTick+=null!==(e=this.processing.cost)&&void 0!==e?e:0,void 0!==this.callback?this.callback(this.processing):this.processing.execute().catch(t=>{throw t})))))}clear(){this.pending.splice(0,this.pending.length)}resolve(t,e){e(),this.processing=null,this.dequeue()}reject(t,e,n){e(n),this.processing=null,this.dequeue()}}return vt([S.m,bt("design:type",Function),bt("design:paramtypes",[Number]),bt("design:returntype",void 0)],t.prototype,"dequeue",null),t})();var wt=function(t,e,n,i){var r,s=arguments.length,o=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(o=(s<3?r(o):s>3?r(e,n,o):r(e,n))||o);return s>3&&o&&Object.defineProperty(e,n,o),o},Ct=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},St=function(t,e){return function(n,i){e(n,i,t)}};let kt=(()=>{let t=class{constructor(t,e,n,i){this.scheduler=t,this.window=e,this.history=n,this.location=i,this.allowedExecutionCostWithinTick=2,this.isActive=!1,this.options={useUrlFragmentHash:!0,callback:()=>{}},this.forwardedState={eventTask:null,suppressPopstate:!1},this.handlePopstate=async t=>{const{eventTask:e,suppressPopstate:n}=this.forwardedState;return this.forwardedState={eventTask:null,suppressPopstate:!1},this.pendingCalls.enqueue(async i=>{const r=t,s=e,o=n;await this.popstate(r,s,o),i.resolve()},1).wait()},this.pendingCalls=new yt}start(t){if(this.isActive)throw new Error("Browser navigation has already been started");this.isActive=!0,this.options.callback=t.callback,null!=t.useUrlFragmentHash&&(this.options.useUrlFragmentHash=t.useUrlFragmentHash),this.pendingCalls.start({scheduler:this.scheduler,allowedExecutionCostWithinTick:this.allowedExecutionCostWithinTick}),this.window.addEventListener("popstate",this.handlePopstate)}stop(){if(!this.isActive)throw new Error("Browser navigation has not been started");this.window.removeEventListener("popstate",this.handlePopstate),this.pendingCalls.stop(),this.options={useUrlFragmentHash:!0,callback:()=>{}},this.isActive=!1}get length(){return this.history.length}get state(){return this.history.state}get viewerState(){const{pathname:t,search:e,hash:n}=this.location;return{path:t,query:e,hash:n,instruction:this.options.useUrlFragmentHash?n.slice(1):t}}async go(t,e=!1){const n=this.pendingCalls.createQueueTask(t=>t.resolve(),1);return this.pendingCalls.enqueue([t=>{const i=n,r=e;this.forwardState({eventTask:i,suppressPopstate:r}),t.resolve()},e=>{const n=this.history,i=t;n.go(i),e.resolve()}],[0,1]),n.wait()}async pushNavigatorState(t){const{title:e,path:n}=t.currentEntry,i=this.options.useUrlFragmentHash?"#/":"";return this.pendingCalls.enqueue(r=>{const s=this.history,o=t,a=e||"",c=`${i}${n}`;s.pushState(o,a,c),r.resolve()},1).wait()}async replaceNavigatorState(t){const{title:e,path:n}=t.currentEntry,i=this.options.useUrlFragmentHash?"#/":"";return this.pendingCalls.enqueue(r=>{const s=this.history,o=t,a=e||"",c=`${i}${n}`;s.replaceState(o,a,c),r.resolve()},1).wait()}async popNavigatorState(){const t=this.pendingCalls.createQueueTask(t=>t.resolve(),1);return this.pendingCalls.enqueue(async e=>{const n=t;await this.popState(n),e.resolve()},1),t.wait()}async popState(t){await this.go(-1,!0);const e=this.history.state;e&&e.currentEntry&&!e.currentEntry.firstEntry&&(await this.go(-1,!0),await this.pushNavigatorState(e)),await t.execute()}forwardState(t){this.forwardedState=t}async popstate(t,e,n=!1){n||this.options.callback({...this.viewerState,event:t,state:this.history.state}),null!==e&&await e.execute()}setTitle(t){this.window.document.title=t}};return t=wt([St(0,g.R),St(1,s.f),St(2,s.d),St(3,s.e),Ct("design:paramtypes",[Object,Object,Object,Object])],t),t})();class Ot{constructor(t){this.entity=t,this.running=!1,this.states=[],this.checkedStates=[],this.syncState=null,this.syncPromise=null}}class jt extends class{constructor(){this.entities=[],this.hasAllEntities=!1,this.syncStates=new Map,this.checkedSyncStates=new Set}addSyncState(t){const e=new R;this.syncStates.set(t,e)}addEntity(t){const e=new Ot(t);return this.entities.push(e),this.resetSyncStates(),e}addEntityState(t,e){let n=this.entities.find(e=>e.entity===t);void 0===n&&(n=this.addEntity(t)),n.states.push(e),this.checkSyncState(e)}syncState(t,e=null){const n=this.syncStates.get(t);if(void 0!==n){if(null!==e){const i=this.entities.find(t=>t.entity===e);if(null===(null==i?void 0:i.syncPromise)&&n.isPending)return i.syncState=t,i.syncPromise=new R,i.checkedStates.push(t),this.checkedSyncStates.add(t),Promise.resolve().then(()=>{this.checkSyncState(t)}).catch(t=>{throw t}),i.syncPromise.promise}return n.promise}}checkingSyncState(t){return this.syncStates.has(t)}finalEntity(){this.hasAllEntities=!0,this.syncStates.forEach((t,e)=>this.checkSyncState(e))}finalize(){}cancel(){}cancelReplaced(t){}checkSyncState(t){var e;const n=this.syncStates.get(t);if(void 0!==n&&this.hasAllEntities&&n.isPending&&this.entities.every(e=>e.states.includes(t))&&(!this.checkedSyncStates.has(t)||this.entities.every(e=>e.checkedStates.includes(t)))){for(const n of this.entities)n.syncState===t&&(null===(e=n.syncPromise)||void 0===e||e.resolve(),n.syncPromise=null,n.syncState=null);n.resolve()}}resetSyncStates(){this.syncStates.forEach((t,e)=>{t.isPending||this.entities.every(t=>t.states.includes(e))||this.addSyncState(e)})}}{constructor(){super(...arguments),this.running=!1}static create(t,e,n){const i=new jt;return i.router=t,i.navigation=e,n.syncStates.forEach(t=>i.addSyncState(t)),i}run(){if(!this.running){this.running=!0;for(const t of this.entities)t.running||(t.running=!0,t.entity.transition(this))}}addEntity(t){const e=super.addEntity(t);return this.running&&e.entity.transition(this),e}finalize(){this.entities.forEach(t=>t.entity.finalizeContentChange())}cancel(){this.entities.forEach(t=>{const e=t.entity.abortContentChange();e instanceof Promise&&e.catch(t=>{throw t})}),this.router.navigator.cancel(this.navigation).then(()=>{this.router.processingNavigation=null,this.navigation.resolve()}).catch(t=>{throw t})}cancelReplaced(t){}}const Tt=S.a.createInterface("IRouter").withDefault(t=>t.singleton(At));class xt{}let At=(()=>{class t{constructor(t,e,n,i,r,s,o){this.container=t,this.navigator=e,this.navigation=n,this.linkHandler=i,this.instructionResolver=r,this.hookManager=s,this.options=o,this.rootScope=null,this.navs={},this.activeComponents=[],this.appendedInstructions=[],this.processingNavigation=null,this.isActive=!1,this.pendingConnects=new Map,this.loadedFirst=!1,this.lastNavigation=null,this.staleChecks={},this.starters=[],this.linkCallback=t=>{let e=t.instruction||"";"string"==typeof e&&e.startsWith("#")&&(e=e.slice(1),e.startsWith("/")||(e="/"+e)),this.load(e,{origin:t.anchor}).catch(t=>{throw t})},this.navigatorCallback=t=>{this.processNavigations(t).catch(t=>{throw t})},this.navigatorSerializeCallback=async(t,e)=>{let n=[];for(const t of e)"string"!=typeof t.instruction&&n.push(...this.instructionResolver.flattenViewportInstructions(t.instruction).filter(t=>null!==t.viewport).map(t=>t.componentInstance)),"string"!=typeof t.fullStateInstruction&&n.push(...this.instructionResolver.flattenViewportInstructions(t.fullStateInstruction).filter(t=>null!==t.viewport).map(t=>t.componentInstance));n=n.filter((t,e,n)=>null!==t&&n.indexOf(t)===e);const i={...t};let r=[];i.fullStateInstruction&&"string"!=typeof i.fullStateInstruction&&(r.push(...i.fullStateInstruction),i.fullStateInstruction=this.instructionResolver.stringifyViewportInstructions(i.fullStateInstruction)),i.instruction&&"string"!=typeof i.instruction&&(r.push(...i.instruction),i.instruction=this.instructionResolver.stringifyViewportInstructions(i.instruction)),r=r.filter((t,e,n)=>null!==t&&null!==t.componentInstance&&n.indexOf(t)===e);const s=[];for(const t of r)await this.freeComponents(t,n,s);return i},this.browserNavigatorCallback=t=>{var e;const n=new x(null===(e=t.state)||void 0===e?void 0:e.currentEntry);n.instruction=t.instruction,n.fromBrowser=!0,this.navigator.navigate(n).catch(t=>{throw t})},this.processNavigations=async t=>{var e,n,i;const r=this.processingNavigation=t;this.pendingConnects.clear(),this.options.reportCallback&&this.options.reportCallback(r);const s=jt.create(this,r,{syncStates:this.options.navigationSyncStates});let o="string"!=typeof r.instruction||r.useFullStateInstruction?r.instruction:await this.hookManager.invokeTransformFromUrl(r.instruction,this.processingNavigation);"/"===o&&(o=""),r.scope=null!==(e=r.scope)&&void 0!==e?e:this.rootScope.scope;let a=r.scope.findInstructions(o),c=null;r.instruction.length>0&&!a.foundConfiguration&&!a.foundInstructions&&this.unknownRoute(a.remaining);let l=a.instructions;if(a.foundConfiguration&&(r.path=r.instruction.startsWith("/")?r.instruction.slice(1):r.instruction,c=(null!=c?c:"")+a.matching,this.rootScope.path=c),!this.options.additiveInstructionDefault&&l.length>0&&!this.instructionResolver.isAddAllViewportsInstruction(l[0])&&!this.instructionResolver.isClearAllViewportsInstruction(l[0])){const t=this.createViewportInstruction(this.instructionResolver.clearViewportInstruction);t.scope=l[0].scope,l.unshift(t)}const h=[];let u=[];for(const t of l.filter(t=>this.instructionResolver.isClearAllViewportsInstruction(t))){const e=t.scope||this.rootScope.scope,n=e.allScopes().filter(t=>!t.owner.isEmpty).map(t=>t.owner);h.push(...n),null!==e.viewportScope&&e.viewportScope!==this.rootScope&&u.push(e.viewportScope)}l=l.filter(t=>!this.instructionResolver.isClearAllViewportsInstruction(t));for(const t of l.filter(t=>this.instructionResolver.isAddAllViewportsInstruction(t)))t.setViewport((t.scope||this.rootScope.scope).viewportScope.name),t.scope=t.scope.owningScope;for(const t of l)t.topInstruction=!0;const d=[],p=[];let{found:f,remaining:g}=this.findViewports(l,p),v=100;do{if(!v--){const t=new Error(g.length+" remaining instructions after 100 iterations; there is likely an infinite loop.");throw t.remainingInstructions=g,console.log("remainingInstructions",g),t}const t=[],e=await this.hookManager.invokeBeforeNavigation(f,r);if(!1===e)return void s.cancel();f=e;for(const e of f){const n=e.owner;if(null!==n){n.path=c;const i=n.setNextContent(e,r);"skip"!==i&&(t.push(n),s.addEntity(n));const o=[n];"swap"===i&&o.push(...n.scope.allScopes(!0,!0).map(t=>t.owner)),O(h,t=>o.includes(t)),!this.instructionResolver.isClearViewportInstruction(e)&&null!==e.scope&&null!==e.scope.parent&&e.scope.parent.isViewportScope&&O(u,t=>t===e.scope.parent.viewportScope)}}this.isRestrictedNavigation||s.finalEntity(),s.run();for(const e of t)d.every(t=>t!==e)&&d.push(e);if(p.push(...f),({found:f,remaining:g}=this.findViewports(g,p)),a.hasRemaining&&0===f.length&&0===g.length){let t=new N;const e=p.filter(t=>null!==t.owner&&t.owner.path===c).map(t=>t.owner).filter((t,e,n)=>n.indexOf(t)===e);this.isRestrictedNavigation||await s.syncState("swapped");for(const n of e)if(t=n.scope.findInstructions(a.remaining),t.foundConfiguration)break;t.foundInstructions?(a=t,c=(null!=c?c:"")+"/"+a.matching):this.unknownRoute(t.remaining),this.appendInstructions(t.instructions)}r.useFullStateInstruction&&(this.appendedInstructions=this.appendedInstructions.filter(t=>!t.default));let n=this.appendedInstructions.filter(t=>!t.default);if(this.appendedInstructions=this.appendedInstructions.filter(t=>t.default),0===n.length){const t=this.appendedInstructions.findIndex(t=>t.default);t>=0&&(n=this.appendedInstructions.splice(t,1))}for(;n.length>0;){const t=n.shift(),e=p.some(e=>e.sameViewport(t)),i=f.find(e=>e.sameViewport(t)),r=g.find(e=>e.sameViewport(t));t.default&&(e||void 0!==i&&!i.default||void 0!==r&&!r.default)||(void 0!==i&&O(f,t=>t===i),void 0!==r&&O(g,t=>t===r),null!==t.viewport?f.push(t):g.push(t))}0===f.length&&0===g.length&&(f=h.map(t=>{const e=this.createViewportInstruction(this.instructionResolver.clearViewportInstruction,t.isViewport?t:void 0);return t.isViewportScope&&(e.viewportScope=t),e}),f.push(...u.map(t=>{const e=this.createViewportInstruction(this.instructionResolver.clearViewportInstruction);return e.viewportScope=t,e})),u=[])}while(f.length>0||g.length>0);s.finalEntity(),await s.syncState("completed"),s.finalize(),await this.replacePaths(r),r.navigation.new&&!r.navigation.first&&!r.repeating&&d.every(t=>t.options.noHistory)&&(r.untracked=!0),this.lastNavigation=this.processingNavigation,null!==(i=null===(n=this.lastNavigation)||void 0===n?void 0:n.repeating)&&void 0!==i&&i&&(this.lastNavigation.repeating=!1),this.processingNavigation=null,await this.navigator.finalize(r)}}get isNavigating(){return null!==this.processingNavigation}get isRestrictedNavigation(){const t=this.options.navigationSyncStates;return t.includes("guardedLoad")||t.includes("unloaded")||t.includes("loaded")||t.includes("guarded")||t.includes("routed")}get statefulHistory(){return void 0!==this.options.statefulHistoryLength&&this.options.statefulHistoryLength>0}start(t){var e;if(this.isActive)throw new Error("Router has already been started");this.isActive=!0,t=null!=t?t:{};const n={...this.options.title,..."string"==typeof t.title?{appTitle:t.title}:t.title};t.title=n;const i={...this.options.separators,...null!==(e=t.separators)&&void 0!==e?e:{}};t.separators=i,Object.assign(this.options,t),void 0!==this.options.hooks&&this.addHooks(this.options.hooks),this.instructionResolver.start({separators:this.options.separators}),this.navigator.start(this,{callback:this.navigatorCallback,store:this.navigation,statefulHistoryLength:this.options.statefulHistoryLength,serializeCallback:this.statefulHistory?this.navigatorSerializeCallback:void 0}),this.linkHandler.start({callback:this.linkCallback,useHref:this.options.useHref}),this.navigation.start({callback:this.browserNavigatorCallback,useUrlFragmentHash:this.options.useUrlFragmentHash}),this.ensureRootScope();for(const t of this.starters)t()}async loadUrl(){const t=new x({...this.navigation.viewerState,fullStateInstruction:"",replacing:!0,fromBrowser:!1}),e=this.navigator.navigate(t);return this.loadedFirst=!0,e}stop(){if(!this.isActive)throw new Error("Router has not been started");this.linkHandler.stop(),this.navigator.stop(),this.navigation.stop()}findScope(t){return null==t?this.rootScope.scope:t instanceof G||t instanceof Y?t.scope:this.getClosestScope(t)||this.rootScope.scope}findParentScope(t){return null===t||t.has(xt,!1)&&null===(t=t.parent)?this.rootScope.scope:t.has(xt,!0)?t.get(xt):this.rootScope.scope}getViewport(t){return this.allViewports().find(e=>e.name===t)||null}addViewport(...t){throw new Error("Not implemented")}findViewportScope(...t){throw new Error("Not implemented")}addViewportScope(...t){throw new Error("Not implemented")}setClosestScope(t,e){const n=this.getContainer(t);S.i.instance(xt,e).register(n)}getClosestScope(t){const e="resourceResolvers"in t?t:this.getClosestContainer(t);return null===e?null:e.has(xt,!0)&&e.get(xt)||null}unsetClosestScope(t){this.getContainer(t).resolvers.delete(xt)}connectViewport(t,e,n,i){var r,s,o;const a=this.findParentScope(e.container),c=(null!==(s=null===(r=e.parentViewport)||void 0===r?void 0:r.viewport)&&void 0!==s?s:this.rootScope).scope;return a!==c&&console.error("Viewport parentScope !== parentViewportScope",a.toString(!0),c.toString(!0),e.getClosestCustomElement()),null===t?(t=a.addViewport(n,e,i),this.setClosestScope(e.container,t.connectedScope),this.isRestrictedNavigation||this.pendingConnects.set(e,new R)):null===(o=this.pendingConnects.get(e))||void 0===o||o.resolve(),t}disconnectViewport(t,e){if(!t.connectedScope.parent.removeViewport(t,e))throw new Error("Failed to remove viewport: "+t.name);this.unsetClosestScope(e.container)}connectViewportScope(t,e,n,i){const r=this.findParentScope(e.container);return null===t&&(t=r.addViewportScope(n,e,i),this.setClosestScope(e.container,t.connectedScope)),t}disconnectViewportScope(t,e){if(!t.connectedScope.parent.removeViewportScope(t))throw new Error("Failed to remove viewport scope: "+t.path);this.unsetClosestScope(e.container)}allViewports(t=!1,e=!1){return this.rootScope.scope.allViewports(t,e)}async goto(t,e){return j('"goto" method','"load" method'),this.load(t,e)}async load(t,e){if(e=e||{},"string"==typeof t&&!e.query){const[n,i]=t.split("?");t=n,e.query=i}const n={};e.origin&&(n.context=e.origin);let i=null;if(({instructions:t,scope:i}=tt.createViewportInstructions(this,t,n)),e.append&&this.processingNavigation)return t=tt.toViewportInstructions(this,t),this.appendInstructions(t,i),Promise.resolve();const r=new x({instruction:t,fullStateInstruction:"",scope:i,title:e.title,data:e.data,query:e.query,replacing:e.replace,repeating:e.append,fromBrowser:!1,origin:e.origin});return this.navigator.navigate(r)}refresh(){return this.navigator.refresh()}back(){return this.navigator.go(-1)}forward(){return this.navigator.go(1)}go(t){return this.navigator.go(t)}checkActive(t){for(const e of t){const t=this.instructionResolver.matchScope(this.activeComponents,e.scope).filter(t=>t.sameComponent(e,!0));if(0===t.length)return!1;if(Array.isArray(e.nextScopeInstructions)&&e.nextScopeInstructions.length>0&&!1===this.instructionResolver.matchChildren(e.nextScopeInstructions,t.map(t=>Array.isArray(t.nextScopeInstructions)?t.nextScopeInstructions:[]).flat()))return!1}return!0}setNav(t,e,n){const i=this.findNav(t);null!=i&&(i.routes=[]),this.addNav(t,e,n)}addNav(t,e,n){let i=this.navs[t];null==i&&(i=this.navs[t]=new ut(this,t,[],n)),i.addRoutes(e),i.update()}updateNav(t){const e=t?[t]:Object.keys(this.navs);for(const t of e)void 0!==this.navs[t]&&null!==this.navs[t]&&this.navs[t].update()}findNav(t){return this.navs[t]}addRoutes(t,e){return[]}removeRoutes(t,e){}addHooks(t){return t.map(t=>this.addHook(t.hook,t.options))}addHook(t,e){return this.hookManager.addHook(t,e)}removeHooks(t){}createViewportInstruction(t,e,n,i=!0,r=null){return this.instructionResolver.createViewportInstruction(t,e,n,i,r)}hasSiblingInstructions(t){return null!==t&&(t.length>1||t.some(t=>this.hasSiblingInstructions(t.nextScopeInstructions)))}appendInstructions(t,e=null){null===e&&(e=this.rootScope.scope);for(const n of t)null===n.scope&&(n.scope=e);this.appendedInstructions.push(...t)}checkStale(t,e){const n=this.staleChecks[t];if(void 0===n)return this.staleChecks[t]=e.slice(),!1;if(n.length!==e.length)return this.staleChecks[t]=e.slice(),!1;for(let i=0,r=e.length;i<r;i++)if(n[i]!==e[i])return this.staleChecks[t]=e.slice(),!1;return!0}unknownRoute(t){if("string"==typeof t&&0!==t.length)throw this.options.useConfiguredRoutes&&this.options.useDirectRoutes?new Error("No matching configured route or component found for '"+t+"'"):this.options.useConfiguredRoutes?new Error("No matching configured route found for '"+t+"'"):new Error("No matching route/component found for '"+t+"'")}findViewports(t,e,n=!1){const i=[],r=[];for(;t.length;){null===t[0].scope&&(t[0].scope=this.rootScope.scope);const s=t[0].scope,{foundViewports:o,remainingInstructions:a}=s.findViewports(t.filter(t=>t.scope===s),e,n);i.push(...o),r.push(...a),t=t.filter(t=>t.scope!==s)}return{found:i.slice(),remaining:r}}async cancelNavigation(t,e){t.forEach(t=>{const e=t.abortContentChange();e instanceof Promise&&e.catch(t=>{throw t})}),await this.navigator.cancel(e),this.processingNavigation=null,e.resolve()}ensureRootScope(){if(!this.rootScope){const t=this.container.get(g.i).root;this.rootScope=new $("rootScope",this,t.viewModel,null,!0,t.config.component)}return this.rootScope}async replacePaths(t){var e;this.rootScope.scope.reparentViewportInstructions();let n=this.rootScope.scope.hoistedChildren.filter(t=>null!==t.viewportInstruction&&!t.viewportInstruction.isEmpty()).map(t=>t.viewportInstruction);n=this.instructionResolver.cloneViewportInstructions(n,!0);const i=[];let{found:r,remaining:s}=this.findViewports(n,i,!0),o=100;for(;s.length>0;){if(0==o--)throw new Error("Failed to find viewport when updating viewer paths.");i.push(...r),({found:r,remaining:s}=this.findViewports(s,i,!0))}this.activeComponents=n,this.activeRoute=t.route;let a=await this.hookManager.invokeTransformToUrl(n,t);"string"!=typeof a&&(a=this.instructionResolver.stringifyViewportInstructions(a,!1,!0)),a=await this.hookManager.invokeTransformToUrl(a,t);const c=t.query&&t.query.length?"?"+t.query:"";t.path=a+c;const l=[this.createViewportInstruction(this.instructionResolver.clearViewportInstruction)];if(l.push(...this.instructionResolver.cloneViewportInstructions(n,this.statefulHistory)),t.fullStateInstruction=l,null===(null!==(e=t.title)&&void 0!==e?e:null)){const e=await this.getTitle(n,t);null!==e&&(t.title=e)}return Promise.resolve()}async getTitle(t,e){let n=await this.hookManager.invokeSetTitle(t,e);if("string"!=typeof n){const t=this.stringifyTitles(n,e);n=this.options.title.appTitle,n=n.replace("${componentTitles}",t),n=n.replace("${appTitleSeparator}",""!==t?this.options.title.appTitleSeparator:"")}return n=await this.hookManager.invokeSetTitle(n,e),n}stringifyTitles(t,e){return t.map(t=>this.stringifyTitle(t,e)).filter(t=>{var e;return(null!==(e=null==t?void 0:t.length)&&void 0!==e?e:0)>0}).join(" + ")}stringifyTitle(t,e){var n;if("string"==typeof t)return this.resolveTitle(t,e);const i=null!==(n=t.route)&&void 0!==n?n:null,r=t.nextScopeInstructions;let s="";if(null!==i){if(""===i)return Array.isArray(r)?this.stringifyTitles(r,e):"";s+=this.resolveTitle(i,e)}else s+=this.resolveTitle(t,e);if(Array.isArray(r)&&r.length>0){let t=this.stringifyTitles(r,e);t.length>0&&(1!==r.length&&(t="[ "+t+" ]"),s=s.length>0?"top-down"===this.options.title.componentTitleOrder?s+this.options.title.componentTitleSeparator+t:t+this.options.title.componentTitleSeparator+s:t)}return s}resolveTitle(t,e){var n;let i="";if("string"==typeof t)i=t;else{if(t instanceof it)return t.viewport.getTitle(e);if(t instanceof N){const r=null===(n=t.match)||void 0===n?void 0:n.title;void 0!==r&&(i="string"==typeof r?r:r.call(t,t,e))}}return void 0!==this.options.title.transformTitle&&(i=this.options.title.transformTitle.call(this,i,t)),i}async freeComponents(t,e,n){const i=t.componentInstance,r=t.viewport;if(null!==i&&null!==r&&!n.some(t=>t===i)){if(!e.some(t=>t===i))return await r.freeContent(i),void n.push(i);if(null!==t.nextScopeInstructions)for(const i of t.nextScopeInstructions)await this.freeComponents(i,e,n)}}getClosestContainer(t){if("context"in t)return t.context;if("$controller"in t)return t.$controller.context;const e=this.CustomElementFor(t);return void 0===e?null:e.context}getContainer(t){return"resourceResolvers"in t?t:Object(g.Nb)(t)?t.get(S.b):"$controller"in t?t.$controller.context.get(S.b):null}CustomElementFor(t){let e=t;for(;null!==e;){const t=e.nodeName.toLowerCase(),n=S.f.getOwn(g.x.name+":"+t,e)||S.f.getOwn(g.x.name,e);if(void 0!==n)return n;e=g.A.getEffectiveParentNode(e)}}}return t.inject=[S.b,gt,kt,k,rt,lt,et],t})();var Rt=function(t,e,n,i){var r,s=arguments.length,o=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(o=(s<3?r(o):s>3?r(e,n,o):r(e,n))||o);return s>3&&o&&Object.defineProperty(e,n,o),o},Pt=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},It=function(t,e){return function(n,i){e(n,i,t)}};let Et=(()=>{let t=class{constructor(t){this.router=t,this.name=null,this.routes=null,this.level=0,this.classes={}}get navRoutes(){const t=this.router.navs[this.name];return null!=t?t.routes:[]}get navClasses(){const t=this.router.navs[this.name];return{nav:"",ul:"",li:"",a:"",ulActive:"",liActive:"nav-active",aActive:"",...null!=t?t.classes:{}}}active(t){return"Active"}};return Rt([g.Ab,Pt("design:type",Object)],t.prototype,"name",void 0),Rt([g.Ab,Pt("design:type",Object)],t.prototype,"routes",void 0),Rt([g.Ab,Pt("design:type",Number)],t.prototype,"level",void 0),Rt([g.Ab,Pt("design:type",Object)],t.prototype,"classes",void 0),t=Rt([Object(g.Fb)({name:"au-nav",template:'<template>\n  <nav if.bind="name" class="${name} ${navClasses.nav}">\n    <au-nav routes.bind="navRoutes" classes.bind="navClasses" containerless></au-nav>\n  </nav>\n  <ul if.bind="routes" class="nav-level-${level} ${classes.ul}">\n    <li repeat.for="route of routes" if.bind="route.visible" class="${route.active ? classes.liActive : \'\'} ${route.hasChildren} ${classes.li}">\n      <a if.bind="route.link && route.link.length" load="${route.link}" class="${route.active ? classes.aActive : \'\'} ${classes.a}" innerhtml.bind="route.title"></a>\n      <a if.bind="route.execute" click.trigger="route.executeAction($event)" href="" class="${route.active ? classes.aActive : \'\'} ${classes.a}" innerhtml.bind="route.title"></a>\n      <span if.bind="(!route.link || !route.link.length) && !route.execute && !route.children" class="${route.active ? classes.aActive : \'\'} ${classes.span} nav-separator" innerhtml.bind="route.title"></span>\n      <a if.bind="(!route.link || !route.link.length) && !route.execute && route.children" click.delegate="route.toggleActive()" href="" class="${route.active ? classes.aActive : \'\'} ${classes.a}" innerhtml.bind="route.title"></a>\n      <au-nav if.bind="route.children" routes.bind="route.children" level.bind="level + 1" classes.bind="classes" containerless></au-nav>\n    </li>\n  </ul>\n</template>'}),It(0,Tt),Pt("design:paramtypes",[Object])],t),t})();var Vt=function(t,e,n,i){var r,s=arguments.length,o=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(o=(s<3?r(o):s>3?r(e,n,o):r(e,n))||o);return s>3&&o&&Object.defineProperty(e,n,o),o},$t=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},Nt=function(t,e){return function(n,i){e(n,i,t)}};const Ft=g.x.createInjectable();let Bt=(()=>{var t;let e=t=class{constructor(t,e,n,i,r){this.router=t,this.container=n,this.parent=i,this.parentController=r,this.name="default",this.catches="",this.collection=!1,this.source=null,this.viewportScope=null,this.isBound=!1,this.element=e}afterCompile(t){this.controller=t}afterBind(t,e,n){this.isBound=!0,this.$controller.scope=this.parentController.scope,this.connect(),null!==this.viewportScope&&this.viewportScope.beforeBind()}beforeUnbind(t,e,n){return null!==this.viewportScope&&this.viewportScope.beforeUnbind(),Promise.resolve()}afterUnbind(t,e,n){return this.disconnect(),Promise.resolve()}afterUnbound(){this.isBound=!1}connect(){if(null===this.router.rootScope)return;const t=this.getAttribute("name",this.name),e={};let n=this.getAttribute("catches",this.catches);void 0!==n&&(e.catches=n),n=this.getAttribute("collection",this.collection,!0),void 0!==n&&(e.collection=n),e.source=this.source||null,this.controller.routingContainer=this.container,this.viewportScope=this.router.connectViewportScope(this.viewportScope,this,t,e)}disconnect(){this.viewportScope&&this.router.disconnectViewportScope(this.viewportScope,this),this.viewportScope=null}getAttribute(t,e,n=!1){if(this.isBound)return e;if(this.element.hasAttribute(t)){if(n)return!0;if((e=this.element.getAttribute(t)).length>0)return e}}isCustomElementController(t){return Object(g.Lb)(t)}isCustomElementViewModel(t){return Object(g.Mb)(t)}getClosestCustomElement(){let e=this.controller.parent,n=null;for(;null!==e&&null===n;)(e.viewModel instanceof qt||e.viewModel instanceof t)&&(n=e.viewModel),e=e.parent;return n}};return Vt([g.Ab,$t("design:type",String)],e.prototype,"name",void 0),Vt([g.Ab,$t("design:type",String)],e.prototype,"catches",void 0),Vt([g.Ab,$t("design:type",Boolean)],e.prototype,"collection",void 0),Vt([g.Ab,$t("design:type",Object)],e.prototype,"source",void 0),e=t=Vt([Object(g.Fb)({name:"au-viewport-scope",template:"<template></template>",containerless:!1,injectable:Ft}),Nt(0,Tt),Nt(1,g.N),Nt(2,S.b),Nt(3,Ft),Nt(4,g.I),$t("design:paramtypes",[Object,Object,Object,e,Object])],e),e})();var Lt=function(t,e,n,i){var r,s=arguments.length,o=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(o=(s<3?r(o):s>3?r(e,n,o):r(e,n))||o);return s>3&&o&&Object.defineProperty(e,n,o),o},Mt=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},Dt=function(t,e){return function(n,i){e(n,i,t)}};const Ut=g.x.createInjectable();let qt=(()=>{var t;let e=t=class{constructor(t,e,n,i){this.router=t,this.container=n,this.parentViewport=i,this.name="default",this.usedBy="",this.default="",this.fallback="",this.noScope=!1,this.noLink=!1,this.noTitle=!1,this.noHistory=!1,this.stateful=!1,this.viewport=null,this.isBound=!1,this.element=e}afterCompile(t){return this.controller=t,this.container=t.context.get(S.b),A.run(()=>this.waitForRouterStart(),()=>{this.router.isRestrictedNavigation&&this.connect()})}beforeBind(t,e,n){return this.isBound=!0,A.run(()=>this.waitForRouterStart(),()=>{this.router.isRestrictedNavigation||this.connect()})}afterAttach(t,e,n){var i;if(null!==this.viewport&&null===(null!==(i=this.viewport.nextContent)&&void 0!==i?i:null))return this.viewport.enabled=!0,this.viewport.activate(t,this.$controller,n,!0)}beforeUnbind(t,e,n){var i;if(null!==this.viewport&&null===(null!==(i=this.viewport.nextContent)&&void 0!==i?i:null))return A.run(()=>this.viewport.deactivate(t,e,n),()=>{this.isBound=!1,this.viewport.enabled=!1})}dispose(){if(null!==this.viewport)return A.run(()=>{var t,e,n;return null===(null!==(e=null===(t=this.viewport)||void 0===t?void 0:t.nextContent)&&void 0!==e?e:null)?null===(n=this.viewport)||void 0===n?void 0:n.dispose():void 0},()=>this.disconnect())}connect(){if(null===this.router.rootScope||null!==this.viewport&&this.router.isRestrictedNavigation)return;const t=this.getAttribute("name",this.name);let e=this.getAttribute("no-scope",this.noScope);const n={scope:void 0===e||!e};e=this.getAttribute("used-by",this.usedBy),void 0!==e&&(n.usedBy=e),e=this.getAttribute("default",this.default),void 0!==e&&(n.default=e),e=this.getAttribute("fallback",this.fallback),void 0!==e&&(n.fallback=e),e=this.getAttribute("no-link",this.noLink,!0),void 0!==e&&(n.noLink=e),e=this.getAttribute("no-title",this.noTitle,!0),void 0!==e&&(n.noTitle=e),e=this.getAttribute("no-history",this.noHistory,!0),void 0!==e&&(n.noHistory=e),e=this.getAttribute("stateful",this.stateful,!0),void 0!==e&&(n.stateful=e),this.controller.routingContainer=this.container,this.viewport=this.router.connectViewport(this.viewport,this,t,n)}disconnect(){this.viewport&&this.router.disconnectViewport(this.viewport,this),this.viewport=null}getAttribute(t,e,n=!1){if(this.isBound&&!n)return e;if(this.element.hasAttribute(t)){if(n)return!0;if((e=this.element.getAttribute(t)).length>0)return e}return e}getClosestCustomElement(){let e=this.controller.parent,n=null;for(;null!==e&&null===n;)(e.viewModel instanceof t||e.viewModel instanceof Bt)&&(n=e.viewModel),e=e.parent;return n}waitForRouterStart(){if(!this.router.isActive)return new Promise(t=>{this.router.starters.push(t)})}};return Lt([g.Ab,Mt("design:type",String)],e.prototype,"name",void 0),Lt([g.Ab,Mt("design:type",String)],e.prototype,"usedBy",void 0),Lt([g.Ab,Mt("design:type",String)],e.prototype,"default",void 0),Lt([g.Ab,Mt("design:type",String)],e.prototype,"fallback",void 0),Lt([g.Ab,Mt("design:type",Boolean)],e.prototype,"noScope",void 0),Lt([g.Ab,Mt("design:type",Boolean)],e.prototype,"noLink",void 0),Lt([g.Ab,Mt("design:type",Boolean)],e.prototype,"noTitle",void 0),Lt([g.Ab,Mt("design:type",Boolean)],e.prototype,"noHistory",void 0),Lt([g.Ab,Mt("design:type",Boolean)],e.prototype,"stateful",void 0),e=t=Lt([Object(g.Fb)({name:"au-viewport",injectable:Ut}),Dt(0,Tt),Dt(1,g.N),Dt(2,S.b),Dt(3,Ut),Mt("design:paramtypes",[Object,Object,Object,e])],e),e})();var _t=function(t,e,n,i){var r,s=arguments.length,o=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(o=(s<3?r(o):s>3?r(e,n,o):r(e,n))||o);return s>3&&o&&Object.defineProperty(e,n,o),o},Ht=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},zt=function(t,e){return function(n,i){e(n,i,t)}};let Kt=(()=>{let t=class{constructor(t,e,n,i){this.dom=t,this.router=n,this.eventManager=i,this.listener=null,this.hasHref=null,this.activeClass="goto-active",j('"goto" custom attribute','"load" custom attribute'),this.element=e}beforeBind(){this.listener=this.eventManager.addEventListener(this.dom,this.element,"click",this.router.linkHandler.handler,g.B.none),this.updateValue();const t=this.router.container.get(g.O);this.observer=t.getObserver(0,this.router,"activeComponents"),this.observer.subscribe(this)}beforeUnbind(){null!==this.listener&&this.listener.dispose(),this.observer.unsubscribe(this)}valueChanged(t){this.updateValue()}updateValue(){if(null===this.hasHref&&(this.hasHref=this.element.hasAttribute("href")),!this.hasHref){const t="string"==typeof this.value?this.value:JSON.stringify(this.value);this.element.setAttribute("href",t)}}handleChange(){const t=g.v.for(this.element,"goto").parent,e=tt.createViewportInstructions(this.router,this.value,{context:t}),n=tt.toViewportInstructions(this.router,e.instructions);for(const t of n)null===t.scope&&(t.scope=e.scope);this.router.checkActive(n)?this.element.classList.add(this.activeClass):this.element.classList.remove(this.activeClass)}};return _t([Object(g.Ab)({mode:g.o.toView}),Ht("design:type",Object)],t.prototype,"value",void 0),t=_t([Object(g.Eb)("goto"),zt(0,g.J),zt(1,g.N),zt(2,Tt),zt(3,s.c),Ht("design:paramtypes",[Object,Object,Object,Object])],t),t})();var Wt=function(t,e,n,i){var r,s=arguments.length,o=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(o=(s<3?r(o):s>3?r(e,n,o):r(e,n))||o);return s>3&&o&&Object.defineProperty(e,n,o),o},Qt=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},Jt=function(t,e){return function(n,i){e(n,i,t)}};let Gt=(()=>{let t=class{constructor(t,e,n,i){this.dom=t,this.router=n,this.eventManager=i,this.listener=null,this.hasHref=null,this.activeClass="load-active",this.element=e}beforeBind(){this.listener=this.eventManager.addEventListener(this.dom,this.element,"click",this.router.linkHandler.handler,g.B.none),this.updateValue();const t=this.router.container.get(g.O);this.observer=t.getObserver(0,this.router,"activeComponents"),this.observer.subscribe(this)}beforeUnbind(){null!==this.listener&&this.listener.dispose(),this.observer.unsubscribe(this)}valueChanged(t){this.updateValue()}updateValue(){if(null===this.hasHref&&(this.hasHref=this.element.hasAttribute("href")),!this.hasHref){const t="string"==typeof this.value?this.value:JSON.stringify(this.value);this.element.setAttribute("href",t)}}handleChange(){const t=g.v.for(this.element,"load").parent,e=tt.createViewportInstructions(this.router,this.value,{context:t}),n=tt.toViewportInstructions(this.router,e.instructions);for(const t of n)null===t.scope&&(t.scope=e.scope);this.router.checkActive(n)?this.element.classList.add(this.activeClass):this.element.classList.remove(this.activeClass)}};return Wt([Object(g.Ab)({mode:g.o.toView}),Qt("design:type",Object)],t.prototype,"value",void 0),t=Wt([Object(g.Eb)("load"),Jt(0,g.J),Jt(1,g.N),Jt(2,Tt),Jt(3,s.c),Qt("design:paramtypes",[Object,Object,Object,Object])],t),t})();var Yt=function(t,e,n,i){var r,s=arguments.length,o=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(o=(s<3?r(o):s>3?r(e,n,o):r(e,n))||o);return s>3&&o&&Object.defineProperty(e,n,o),o},Zt=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},Xt=function(t,e){return function(n,i){e(n,i,t)}};let te=(()=>{let t=class{constructor(t,e,n,i){this.dom=t,this.router=n,this.eventManager=i,this.eventListener=null,this.element=e}beforeBind(){this.router.options.useHref&&!this.hasGoto()&&(this.eventListener=this.eventManager.addEventListener(this.dom,this.element,"click",this.router.linkHandler.handler,g.B.none)),this.updateValue()}beforeUnbind(){null!==this.eventListener&&this.eventListener.dispose()}valueChanged(){this.updateValue()}updateValue(){this.element.setAttribute("href",this.value)}hasGoto(){const t=this.$controller.parent.children;return void 0!==t&&t.some(t=>1===t.vmKind&&t.viewModel instanceof Kt)}};return Yt([Object(g.Ab)({mode:g.o.toView}),Zt("design:type",Object)],t.prototype,"value",void 0),t=Yt([Object(g.Eb)({name:"href",noMultiBindings:!0}),Xt(0,g.J),Xt(1,g.N),Xt(2,Tt),Xt(3,s.c),Zt("design:paramtypes",[Object,Object,Object,Object])],t),t})();const ee=[Tt],ne=[qt,Bt,Et,Kt,Gt,te];let ie={},re=t=>{t.start(ie)};const se={register:t=>t.register(...ee,...ne,g.sb.with(Tt).beforeBind().call(re),g.sb.with(Tt).afterAttach().call(t=>t.loadUrl())),createContainer(){return this.register(S.a.createContainer())}},oe="jump",ae='<h5>移転しました</h5>\n<span>3秒経っても切り替わらない場合は<a href="https://ischca.github.io/">ここ</a>をクリックしてください</span>';var ce=ae;const le=[];let he;function ue(t){he||(he=g.x.define({name:oe,template:ae,dependencies:le})),t.register(he)}var de=function(t,e,n,i){var r,s=arguments.length,o=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(o=(s<3?r(o):s>3?r(e,n,o):r(e,n))||o);return s>3&&o&&Object.defineProperty(e,n,o),o};let pe=class{};pe=de([Object(g.Fb)(i)],pe),r.a.app(pe).start()}]);
//# sourceMappingURL=entry-bundle.js.map